!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VEditor=e():t.VEditor=e()}(self,(()=>(()=>{var t={5274:(t,e,n)=>{(t.exports=n(9252)(!1)).push([t.id,"@keyframes dashing {\n  from {\n    stroke-dashoffset: 200;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n.ve-editor {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.ve-editor .ve-editor-back {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: 0;\n  left: 0;\n  top: 0;\n}\n.ve-editor .ve-minimap {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: #fff;\n  border: 1px solid #cecece;\n  border-radius: 5px;\n  overflow: hidden;\n  width: 160px;\n  height: 127px;\n}\n.ve-editor .ve-minimap .drag-rect {\n  position: absolute;\n  left: 0px;\n  box-sizing: content-box;\n  top: 0px;\n  border: 2px solid #08c;\n  cursor: pointer;\n  transition: all 200ms ease;\n}\n.ve-editor .ve-minimap .drag-point {\n  width: 10px;\n  height: 10px;\n  border-radius: 5px;\n  border: 2px solid #08c;\n  background: #fff;\n  position: absolute;\n  right: -5px;\n  bottom: -5px;\n  cursor: nwse-resize;\n}\n.ve-editor > .ve-editor-svg {\n  cursor: grab;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.ve-editor > .ve-editor-svg svg {\n  position: absolute;\n  left: 0;\n  top: 0;\n  outline: none;\n}\n.ve-editor > .ve-editor-svg * {\n  transition: x, y, transform, cx, cy, width, stroke, height, fill 400ms;\n  outline: none;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-link-points {\n  cursor: crosshair;\n  display: none;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-link-points:hover,\n.ve-editor > .ve-editor-svg .ve-node .ve-link-points.hover {\n  fill: #4c79ff;\n  cursor: crosshair;\n  display: block;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-node-shape {\n  cursor: move;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-node-shape:hover > .icon-node {\n  stroke: #4c79ff;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-node-shape.active > .icon-node {\n  transition: stroke 400ms;\n  stroke: #4c79ff;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-node-shape.success .icon-node {\n  stroke: green;\n  fill: #fff;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-node-shape.error .icon-node {\n  stroke: red;\n}\n.ve-editor > .ve-editor-svg .ve-node .ve-node-shape.running .icon-node {\n  stroke: #4c79ff;\n}\n.ve-editor > .ve-editor-svg .ve-line .ve-line-path {\n  transition: stroke-dasharray 300ms ease-out;\n}\n.ve-editor > .ve-editor-svg .ve-line .ve-shdow-path {\n  stroke: transparent;\n  stroke-width: 3;\n  fill: none;\n}\n.ve-editor > .ve-editor-svg .ve-line.active .ve-line-shape,\n.ve-editor > .ve-editor-svg .ve-line:hover .ve-line-shape {\n  opacity: 0.5;\n}\n.ve-editor > .ve-editor-svg .ve-line.active .ve-line-arrow,\n.ve-editor > .ve-editor-svg .ve-line:hover .ve-line-arrow {\n  opacity: 0.5;\n}\n.ve-editor > .ve-editor-svg .ve-line.running .ve-line-path {\n  stroke-dasharray: 5 !important;\n  animation: dashing 5s linear infinite;\n}\n.ve-editor > .ve-editor-svg .ve-line .ve-line-shape {\n  cursor: pointer;\n}\n.ve-editor > .ve-editor-svg .ve-line .ve-line-arrow {\n  cursor: crosshair;\n}\n.ve-editor > .ve-editor-svg .ve-line .ve-line-label text {\n  text-anchor: middle;\n}\n.ve-editor > .ve-editor-svg .anchor-line {\n  stroke: #4c79ff;\n}\n.ve-editor > .ve-editor-html {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.ve-editor .anchor-back {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.ve-node-wrapper {\n  border: 1px solid #08c;\n  border-radius: 8px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: center;\n  background-color: #fff;\n  align-items: center;\n}\n",""])},9252:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[r].concat(s).concat([o]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},681:(t,e,n)=>{t.exports={graphlib:n(574),layout:n(8123),debug:n(7570),util:{time:n(1138).time,notime:n(1138).notime},version:n(8177)}},2188:(t,e,n)=>{"use strict";var r=n(8436),i=n(4079);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),(function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),(function(t){r.has(n,t.w)?e.push(t):o(t.w)})),delete n[s])})),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},1133:(t,e,n)=>{var r=n(8436),i=n(1138);function o(t,e,n,r,o,s){var a={width:0,height:0,rank:s,borderType:e},c=o[e][s-1],h=i.addDummyNode(t,"border",a,n);o[e][s]=h,t.setParent(h,r),c&&t.setEdge(c,h,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var i=t.children(n),s=t.node(n);if(i.length&&r.forEach(i,e),r.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,c=s.maxRank+1;a<c;++a)o(t,"borderLeft","_bl",n,s,a),o(t,"borderRight","_br",n,s,a)}}))}},3258:(t,e,n)=>{"use strict";var r=n(8436);function i(t){r.forEach(t.nodes(),(function(e){o(t.node(e))})),r.forEach(t.edges(),(function(e){o(t.edge(e))}))}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){s(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"y")&&s(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)}))}(t),i(t))}}},7822:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},7570:(t,e,n)=>{var r=n(8436),i=n(1138),o=n(574).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},574:(t,e,n)=>{var r;try{r=n(8282)}catch(t){}r||(r=window.graphlib),t.exports=r},4079:(t,e,n)=>{var r=n(8436),i=n(574).Graph,o=n(7822);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w).in+=i)}));var h=r.range(a+s+3).map((function(){return new o})),u=s+1;return r.forEach(n.nodes(),(function(t){c(h,u,n.node(t))})),{graph:n,buckets:h,zeroIdx:u}}(t,e||s),h=function(t,e,n){for(var r,i=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var c=e.length-2;c>0;--c)if(r=e[c].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(h,(function(e){return t.outEdges(e.v,e.w)})),!0)};var s=r.constant(1);function a(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),(function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,c(e,n,a)})),r.forEach(t.outEdges(i.v),(function(r){var i=t.edge(r),o=r.w,s=t.node(o);s.in-=i,c(e,n,s)})),t.removeNode(i.v),s}function c(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},8123:(t,e,n)=>{"use strict";var r=n(8436),i=n(2188),o=n(5995),s=n(8093),a=n(1138).normalizeRanks,c=n(4219),h=n(1138).removeEmptyRanks,u=n(2981),l=n(1133),d=n(3258),f=n(3408),p=n(7873),g=n(1138),v=n(574).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new v({multigraph:!0,compound:!0}),n=k(t.graph());return e.setGraph(r.merge({},m,S(n,y),r.pick(n,x))),r.forEach(t.nodes(),(function(n){var i=k(t.node(n));e.setNode(n,r.defaults(S(i,b),w)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var i=k(t.edge(n));e.setEdge(n,r.merge({},A,S(i,E),r.pick(i,_)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){i.run(t)})),e("    nestingGraph.run",(function(){u.run(t)})),e("    rank",(function(){s(g.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};g.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){h(t)})),e("    nestingGraph.cleanup",(function(){u.cleanup(t)})),e("    normalizeRanks",(function(){a(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){o.run(t)})),e("    parentDummyChains",(function(){c(t)})),e("    addBorderSegments",(function(){l(t)})),e("    order",(function(){f(t)})),e("    insertSelfEdges",(function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,(function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){d.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){o.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){d.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,c=s.marginy||0;function h(t){var r=t.x,s=t.y,a=t.width,c=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-c/2),o=Math.max(o,s+c/2)}r.forEach(t.nodes(),(function(e){h(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&h(n)})),e-=a,i-=c,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=i})),r.forEach(t.edges(),(function(n){var o=t.edge(n);r.forEach(o.points,(function(t){t.x-=e,t.y-=i})),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)})),s.width=n-e+a,s.height=o-i+c}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){i.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(t.edges(),(function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function S(t,e){return r.mapValues(r.pick(t,e),Number)}function k(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},8436:(t,e,n)=>{var r;try{r={cloneDeep:n(361),constant:n(5703),defaults:n(1747),each:n(6073),filter:n(3105),find:n(3311),flatten:n(5564),forEach:n(4486),forIn:n(2620),has:n(8721),isUndefined:n(2353),last:n(928),map:n(5161),mapValues:n(6604),max:n(6162),merge:n(3857),min:n(3632),minBy:n(2762),now:n(7771),pick:n(9722),range:n(6026),reduce:n(4061),sortBy:n(9734),uniqueId:n(3955),values:n(2628),zipObject:n(7287)}}catch(t){}r||(r=window._),t.exports=r},2981:(t,e,n)=>{var r=n(8436),i=n(1138);function o(t,e,n,s,a,c,h){var u=t.children(h);if(u.length){var l=i.addBorderNode(t,"_bt"),d=i.addBorderNode(t,"_bb"),f=t.node(h);t.setParent(l,h),f.borderTop=l,t.setParent(d,h),f.borderBottom=d,r.forEach(u,(function(r){o(t,e,n,s,a,c,r);var i=t.node(r),u=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,p=i.borderTop?s:2*s,g=u!==f?1:a-c[h]+1;t.setEdge(l,u,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(f,d,{weight:p,minlen:g,nestingEdge:!0})})),t.parent(h)||t.setEdge(e,l,{weight:0,minlen:a+c[h]})}else h!==e&&t.setEdge(e,h,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,(function(t){n(t,o+1)})),e[i]=o}return r.forEach(t.children(),(function(t){n(t,1)})),e}(t),s=r.max(r.values(n))-1,a=2*s+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var c=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(r){o(t,e,a,c,s,n,r)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},5995:(t,e,n)=>{"use strict";var r=n(8436),i=n(1138);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,o,s=e.v,a=t.node(s).rank,c=e.w,h=t.node(c).rank,u=e.name,l=t.edge(e),d=l.labelRank;if(h!==a+1){for(t.removeEdge(e),o=0,++a;a<h;++o,++a)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:a},n=i.addDummyNode(t,"edge",r,"_d"),a===d&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(s,n,{weight:l.weight},u),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,c,{weight:l.weight},u)}}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}}},5093:(t,e,n)=>{var r=n(8436);t.exports=function(t,e,n){var i,o={};r.forEach(n,(function(n){for(var r,s,a=t.parent(n);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}}))}},5439:(t,e,n)=>{var r=n(8436);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}},3128:(t,e,n)=>{var r=n(8436),i=n(574).Graph;t.exports=function(t,e,n){var o=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(i){var a=t.node(i),c=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,c||o),r.forEach(t[n](i),(function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})})),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),s}},6630:(t,e,n)=>{"use strict";var r=n(8436);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,(function(t,e){return e}))),o=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")})),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var c=r.map(new Array(a),(function(){return 0})),h=0;return r.forEach(o.forEach((function(t){var e=t.pos+s;c[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=c[e+1]),c[e=e-1>>1]+=t.weight;h+=t.weight*n}))),h}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},3408:(t,e,n)=>{"use strict";var r=n(8436),i=n(2588),o=n(6630),s=n(1026),a=n(3128),c=n(5093),h=n(574).Graph,u=n(1138);function l(t,e,n){return r.map(e,(function(e){return a(t,e,n)}))}function d(t,e){var n=new h;r.forEach(t,(function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,(function(e,n){t.node(e).order=n})),c(t,n,o.vs)}))}function f(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=u.maxRank(t),n=l(t,r.range(1,e+1),"inEdges"),s=l(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);f(t,a);for(var c,h=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){d(p%2?n:s,p%4>=2),a=u.buildLayerMatrix(t);var v=o(t,a);v<h&&(g=0,c=r.cloneDeep(a),h=v)}f(t,c)}},2588:(t,e,n)=>{"use strict";var r=n(8436);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),i=r.max(r.map(n,(function(e){return t.node(e).rank}))),o=r.map(r.range(i+1),(function(){return[]})),s=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(s,(function n(i){if(!r.has(e,i)){e[i]=!0;var s=t.node(i);o[s.rank].push(i),r.forEach(t.successors(i),n)}})),o}},9567:(t,e,n)=>{"use strict";var r=n(8436);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){var n,i,o,s;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,s=0,(n=t).weight&&(o+=n.barycenter*n.weight,s+=n.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},1026:(t,e,n)=>{var r=n(8436),i=n(5439),o=n(9567),s=n(7304);t.exports=function t(e,n,a,c){var h=e.children(n),u=e.node(n),l=u?u.borderLeft:void 0,d=u?u.borderRight:void 0,f={};l&&(h=r.filter(h,(function(t){return t!==l&&t!==d})));var p=i(e,h);r.forEach(p,(function(n){if(e.children(n.v).length){var i=t(e,n.v,a,c);f[n.v]=i,r.has(i,"barycenter")&&(o=n,s=i,r.isUndefined(o.barycenter)?(o.barycenter=s.barycenter,o.weight=s.weight):(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight))}var o,s}));var g=o(p,a);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(g,f);var v=s(g,c);if(l&&(v.vs=r.flatten([l,v.vs,d],!0),e.predecessors(l).length)){var y=e.node(e.predecessors(l)[0]),m=e.node(e.predecessors(d)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+m.order)/(v.weight+2),v.weight+=2}return v}},7304:(t,e,n)=>{var r=n(8436),i=n(1138);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,s=i.partition(t,(function(t){return r.has(t,"barycenter")})),a=s.lhs,c=r.sortBy(s.rhs,(function(t){return-t.i})),h=[],u=0,l=0,d=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),d=o(h,c,d),r.forEach(a,(function(t){d+=t.vs.length,h.push(t.vs),u+=t.barycenter*t.weight,l+=t.weight,d=o(h,c,d)}));var f={vs:r.flatten(h,!0)};return l&&(f.barycenter=u/l,f.weight=l),f}},4219:(t,e,n)=>{var r=n(8436);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),(function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}})),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,s=[],a=[],c=Math.min(e[n].low,e[r].low),h=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>c||h>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,c=0,h=s[c],u=!0;n!==i.w;){if(r=t.node(n),u){for(;(h=s[c])!==a&&t.node(h).maxRank<r.rank;)c++;h===a&&(u=!1)}if(!u){for(;c<s.length-1&&t.node(h=s[c+1]).minRank<=r.rank;)c++;h=s[c]}t.setParent(n,h),n=t.successors(n)[0]}}))}},3573:(t,e,n)=>{"use strict";var r=n(8436),i=n(574).Graph,o=n(1138);function s(t,e){var n={};return r.reduce(e,(function(e,i){var o=0,s=0,a=e.length,h=r.last(i);return r.forEach(i,(function(e,u){var l=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),d=l?t.node(l).order:a;(l||e===h)&&(r.forEach(i.slice(s,u+1),(function(e){r.forEach(t.predecessors(e),(function(r){var i=t.node(r),s=i.order;!(s<o||d<s)||i.dummy&&t.node(e).dummy||c(n,r,e)}))})),s=u+1,o=d)})),i})),n}function a(t,e){var n={};function i(e,i,o,s,a){var h;r.forEach(r.range(i,o),(function(i){h=e[i],t.node(h).dummy&&r.forEach(t.predecessors(h),(function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&c(n,e,h)}))}))}return r.reduce(e,(function(e,n){var o,s=-1,a=0;return r.forEach(n,(function(r,c){if("border"===t.node(r).dummy){var h=t.predecessors(r);h.length&&(o=t.node(h[0]).order,i(n,a,c,s,o),a=c,s=o)}i(n,a,n.length,o,e.length)})),n})),n}function c(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function h(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function u(t,e,n,i){var o={},s={},a={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){o[t]=t,s[t]=t,a[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var c=i(t);if(c.length){c=r.sortBy(c,(function(t){return a[t]}));for(var u=(c.length-1)/2,l=Math.floor(u),d=Math.ceil(u);l<=d;++l){var f=c[l];s[t]===t&&e<a[f]&&!h(n,t,f)&&(s[f]=t,s[t]=o[t]=o[f],e=a[f])}}}))})),{root:o,align:s}}function l(t,e,n,o,s){var a={},c=function(t,e,n,o){var s=new i,a=t.graph(),c=function(t,e,n){return function(i,o,s){var a,c=i.node(o),h=i.node(s),u=0;if(u+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=-c.width/2;break;case"r":a=c.width/2}if(a&&(u+=n?a:-a),a=0,u+=(c.dummy?e:t)/2,u+=(h.dummy?e:t)/2,u+=h.width/2,r.has(h,"labelpos"))switch(h.labelpos.toLowerCase()){case"l":a=h.width/2;break;case"r":a=-h.width/2}return a&&(u+=n?a:-a),a=0,u}}(a.nodesep,a.edgesep,o);return r.forEach(e,(function(e){var i;r.forEach(e,(function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(c(t,e,i),a||0))}i=e}))})),s}(t,e,n,s),h=s?"borderLeft":"borderRight";function u(t,e){for(var n=c.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return u((function(t){a[t]=c.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+c.edge(e))}),0)}),c.predecessors.bind(c)),u((function(e){var n=c.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-c.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==h&&(a[e]=Math.max(a[e],n))}),c.successors.bind(c)),r.forEach(o,(function(t){a[t]=a[n[t]]})),a}function d(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)})),n-i}))}function f(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(s){var a,c=n+s,h=t[c];if(h!==e){var u=r.values(h);(a="l"===s?i-r.min(u):o-r.max(u))&&(t[c]=r.mapValues(h,(function(t){return t+a})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2}))}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),c={};r.forEach(["u","d"],(function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var s=("u"===o?t.predecessors:t.successors).bind(t),a=u(0,e,i,s),h=l(t,e,a.root,a.align,"r"===n);"r"===n&&(h=r.mapValues(h,(function(t){return-t}))),c[o+n]=h}))}));var h=d(t,c);return f(c,h),p(c,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:c,hasConflict:h,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:p}},7873:(t,e,n)=>{"use strict";var r=n(8436),i=n(1138),o=n(3573).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,(function(e){var i=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=o+i/2})),o+=i+n}))})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),(function(e,n){t.node(n).x=e}))}},300:(t,e,n)=>{"use strict";var r=n(8436),i=n(574).Graph,o=n(6681).slack;function s(t,e){return r.forEach(t.nodes(),(function n(i){r.forEach(e.nodeEdges(i),(function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))}))})),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)}))}function c(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new i({directed:!1}),h=t.nodes()[0],u=t.nodeCount();for(r.setNode(h,{});s(r,t)<u;)e=a(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),c(r,t,n);return r}},8093:(t,e,n)=>{"use strict";var r=n(6681).longestPath,i=n(300),o=n(2472);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){o(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t)}};var s=r},2472:(t,e,n)=>{"use strict";var r=n(8436),i=n(300),o=n(6681).slack,s=n(6681).longestPath,a=n(574).alg.preorder,c=n(574).alg.postorder,h=n(1138).simplify;function u(t){t=h(t),s(t);var e,n=i(t);for(f(n),l(n,t);e=g(n);)y(n,t,e,v(n,t,e))}function l(t,e){var n=c(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=d(t,e,n)}(t,e,n)}))}function d(t,e,n){var i=t.node(n).parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,r.forEach(e.nodeEdges(n),(function(r){var s,c,h=r.v===n,u=h?r.w:r.v;if(u!==i){var l=h===o,d=e.edge(r).weight;if(a+=l?d:-d,s=n,c=u,t.hasEdge(s,c)){var f=t.edge(n,u).cutvalue;a+=l?-f:f}}})),a}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,o){var s=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),(function(o){r.has(e,o)||(n=p(t,e,n,o,i))})),a.low=s,a.lim=n++,o?a.parent=o:delete a.parent,n}function g(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function v(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),c=t.node(s),h=a,u=!1;a.lim>c.lim&&(h=c,u=!0);var l=r.filter(e.edges(),(function(e){return u===m(0,t.node(e.v),h)&&u!==m(0,t.node(e.w),h)}));return r.minBy(l,(function(t){return o(e,t)}))}function y(t,e,n,i){var o=n.v,s=n.w;t.removeEdge(o,s),t.setEdge(i.v,i.w,{}),f(t),l(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),i=a(t,n);i=i.slice(1),r.forEach(i,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function m(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=u,u.initLowLimValues=f,u.initCutValues=l,u.calcCutValue=d,u.leaveEdge=g,u.enterEdge=v,u.exchangeEdges=y},6681:(t,e,n)=>{"use strict";var r=n(8436);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.min(r.map(t.outEdges(i),(function(e){return n(e.w)-t.edge(e).minlen})));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},1138:(t,e,n)=>{"use strict";var r=n(8436),i=n(574).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,c=t.width/2,h=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*c>Math.abs(s)*h?(a<0&&(h=-h),n=h*s/a,r=h):(s<0&&(c=-c),n=c,r=c*a/s),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(s(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,o=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%o!=0?--i:i&&r.forEach(e,(function(e){t.node(e).rank+=i}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},8177:t=>{t.exports="0.8.5"},8282:(t,e,n)=>{var r=n(2354);t.exports={Graph:r.Graph,json:n(8974),alg:n(2440),version:r.version}},2842:(t,e,n)=>{var r=n(9126);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),(function(t){e=[],o(t),e.length&&i.push(e)})),i}},3984:(t,e,n)=>{var r=n(9126);function i(t,e,n,o,s,a){r.has(o,e)||(o[e]=!0,n||a.push(e),r.each(s(e),(function(e){i(t,e,n,o,s,a)})),n&&a.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,o,s)})),s}},4847:(t,e,n)=>{var r=n(3763),i=n(9126);t.exports=function(t,e,n){return i.transform(t.nodes(),(function(i,o){i[o]=r(t,o,e,n)}),{})}},3763:(t,e,n)=>{var r=n(9126),i=n(9675);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,s,a={},c=new i,h=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),h=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);h<r.distance&&(r.distance=h,r.predecessor=o,c.decrease(e,h))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},c.add(t,n)}));c.size()>0&&(o=c.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(h);return a}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},9096:(t,e,n)=>{var r=n(9126),i=n(5023);t.exports=function(t){return r.filter(i(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},8924:(t,e,n)=>{var r=n(9126);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)}))}))})),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},2440:(t,e,n)=>{t.exports={components:n(2842),dijkstra:n(3763),dijkstraAll:n(4847),findCycles:n(9096),floydWarshall:n(8924),isAcyclic:n(2707),postorder:n(8828),preorder:n(2648),prim:n(514),tarjan:n(5023),topsort:n(2166)}},2707:(t,e,n)=>{var r=n(2166);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},8828:(t,e,n)=>{var r=n(3984);t.exports=function(t,e){return r(t,e,"post")}},2648:(t,e,n)=>{var r=n(3984);t.exports=function(t,e){return r(t,e,"pre")}},514:(t,e,n)=>{var r=n(9126),i=n(771),o=n(9675);t.exports=function(t,e){var n,s=new i,a={},c=new o;function h(t){var r=t.v===n?t.w:t.v,i=c.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,c.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),(function(t){c.add(t,Number.POSITIVE_INFINITY),s.setNode(t)})),c.decrease(t.nodes()[0],0);for(var u=!1;c.size()>0;){if(n=c.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(n).forEach(h)}return s}},5023:(t,e,n)=>{var r=n(9126);t.exports=function(t){var e=0,n=[],i={},o=[];function s(a){var c=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){r.has(i,t)?i[t].onStack&&(c.lowlink=Math.min(c.lowlink,i[t].index)):(s(t),c.lowlink=Math.min(c.lowlink,i[t].lowlink))})),c.lowlink===c.index){var h,u=[];do{h=n.pop(),i[h].onStack=!1,u.push(h)}while(a!==h);o.push(u)}}return t.nodes().forEach((function(t){r.has(i,t)||s(t)})),o}},2166:(t,e,n)=>{var r=n(9126);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),(function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))})),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},9675:(t,e,n)=>{var r=n(9126);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},771:(t,e,n)=>{"use strict";var r=n(9126);t.exports=o;var i="\0";function o(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function c(t,e,n,i){var o=""+e,s=""+n;if(!t&&o>s){var a=o;o=s,s=a}return o+""+s+""+(r.isUndefined(i)?"\0":i)}function h(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function u(t,e){return c(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._in[e])}))},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._out[e])}))},o.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,(function(t){n.length>1?i.setNode(t,e):i.setNode(t)})),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),r.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),(function(t){e.setParent(t,o(t))})),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,(function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r})),this},o.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var u=c(this._isDirected,t,e,n);if(r.has(this._edgeLabels,u))return o&&(this._edgeLabels[u]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[u]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=h(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[u]=l,s(this._preds[e],t),s(this._sucs[t],e),this._in[e][u]=l,this._out[t][u]=l,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):c(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?u(this._isDirected,arguments[0]):c(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):c(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.v===e})):i}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.w===e})):i}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},2354:(t,e,n)=>{t.exports={Graph:n(771),version:n(9631)}},8974:(t,e,n)=>{var r=n(9126),i=n(771);function o(t){return r.map(t.nodes(),(function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o}))}function s(t){return r.map(t.edges(),(function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:s(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},9126:(t,e,n)=>{var r;try{r={clone:n(6678),constant:n(5703),each:n(6073),filter:n(3105),has:n(8721),isArray:n(1469),isEmpty:n(1609),isFunction:n(3560),isUndefined:n(2353),keys:n(3674),map:n(5161),reduce:n(4061),size:n(4238),transform:n(8718),union:n(3386),values:n(2628)}}catch(t){}r||(r=window._),t.exports=r},9631:t=>{t.exports="2.1.8"},8552:(t,e,n)=>{var r=n(852)(n(5639),"DataView");t.exports=r},1989:(t,e,n)=>{var r=n(1789),i=n(401),o=n(7667),s=n(1327),a=n(1866);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},8407:(t,e,n)=>{var r=n(7040),i=n(4125),o=n(2117),s=n(7518),a=n(4705);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},7071:(t,e,n)=>{var r=n(852)(n(5639),"Map");t.exports=r},3369:(t,e,n)=>{var r=n(4785),i=n(1285),o=n(6e3),s=n(9916),a=n(5265);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},3818:(t,e,n)=>{var r=n(852)(n(5639),"Promise");t.exports=r},8525:(t,e,n)=>{var r=n(852)(n(5639),"Set");t.exports=r},8668:(t,e,n)=>{var r=n(3369),i=n(619),o=n(2385);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},6384:(t,e,n)=>{var r=n(8407),i=n(7465),o=n(3779),s=n(7599),a=n(4758),c=n(4309);function h(t){var e=this.__data__=new r(t);this.size=e.size}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=s,h.prototype.has=a,h.prototype.set=c,t.exports=h},2705:(t,e,n)=>{var r=n(5639).Symbol;t.exports=r},1149:(t,e,n)=>{var r=n(5639).Uint8Array;t.exports=r},577:(t,e,n)=>{var r=n(852)(n(5639),"WeakMap");t.exports=r},6874:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},7412:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},4963:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},7443:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},4636:(t,e,n)=>{var r=n(2545),i=n(5694),o=n(1469),s=n(4144),a=n(5776),c=n(6719),h=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),l=!n&&!u&&s(t),d=!n&&!u&&!l&&c(t),f=n||u||l||d,p=f?r(t.length,String):[],g=p.length;for(var v in t)!e&&!h.call(t,v)||f&&("length"==v||l&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||p.push(v);return p}},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},2488:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},2663:t=>{t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},2908:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},8983:(t,e,n)=>{var r=n(371)("length");t.exports=r},6556:(t,e,n)=>{var r=n(9465),i=n(7813);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},4865:(t,e,n)=>{var r=n(9465),i=n(7813),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},4037:(t,e,n)=>{var r=n(8363),i=n(3674);t.exports=function(t,e){return t&&r(e,i(e),t)}},3886:(t,e,n)=>{var r=n(8363),i=n(1704);t.exports=function(t,e){return t&&r(e,i(e),t)}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5990:(t,e,n)=>{var r=n(6384),i=n(7412),o=n(4865),s=n(4037),a=n(3886),c=n(4626),h=n(278),u=n(8805),l=n(1911),d=n(8234),f=n(6904),p=n(4160),g=n(3824),v=n(9148),y=n(8517),m=n(1469),x=n(4144),b=n(6688),w=n(3218),E=n(2928),A=n(3674),_=n(1704),S="[object Arguments]",k="[object Function]",C="[object Object]",P={};P[S]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[C]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[k]=P["[object WeakMap]"]=!1,t.exports=function t(e,n,T,N,M,O){var L,I=1&n,V=2&n,R=4&n;if(T&&(L=M?T(e,N,M,O):T(e)),void 0!==L)return L;if(!w(e))return e;var j=m(e);if(j){if(L=g(e),!I)return h(e,L)}else{var D=p(e),B=D==k||"[object GeneratorFunction]"==D;if(x(e))return c(e,I);if(D==C||D==S||B&&!M){if(L=V||B?{}:y(e),!I)return V?l(e,a(L,e)):u(e,s(L,e))}else{if(!P[D])return M?e:{};L=v(e,D,I)}}O||(O=new r);var z=O.get(e);if(z)return z;O.set(e,L),E(e)?e.forEach((function(r){L.add(t(r,n,T,r,e,O))})):b(e)&&e.forEach((function(r,i){L.set(i,t(r,n,T,i,e,O))}));var U=j?void 0:(R?V?f:d:V?_:A)(e);return i(U||e,(function(r,i){U&&(r=e[i=r]),o(L,i,t(r,n,T,i,e,O))})),L}},3118:(t,e,n)=>{var r=n(3218),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},9881:(t,e,n)=>{var r=n(7816),i=n(9291)(r);t.exports=i},6029:(t,e,n)=>{var r=n(3448);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(void 0===c?a==a&&!r(a):n(a,c)))var c=a,h=s}return h}},760:(t,e,n)=>{var r=n(9881);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},1848:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},1078:(t,e,n)=>{var r=n(2488),i=n(7285);t.exports=function t(e,n,o,s,a){var c=-1,h=e.length;for(o||(o=i),a||(a=[]);++c<h;){var u=e[c];n>0&&o(u)?n>1?t(u,n-1,o,s,a):r(a,u):s||(a[a.length]=u)}return a}},8483:(t,e,n)=>{var r=n(5063)();t.exports=r},7816:(t,e,n)=>{var r=n(8483),i=n(3674);t.exports=function(t,e){return t&&r(t,e,i)}},7786:(t,e,n)=>{var r=n(1811),i=n(327);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},8866:(t,e,n)=>{var r=n(2488),i=n(1469);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},4239:(t,e,n)=>{var r=n(2705),i=n(9607),o=n(2333),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},3325:t=>{t.exports=function(t,e){return t>e}},8565:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2118:(t,e,n)=>{var r=n(1848),i=n(2722),o=n(2351);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},9454:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},939:(t,e,n)=>{var r=n(2492),i=n(7005);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,s,t,a))}},2492:(t,e,n)=>{var r=n(6384),i=n(7114),o=n(8351),s=n(6096),a=n(4160),c=n(1469),h=n(4144),u=n(6719),l="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,y){var m=c(t),x=c(e),b=m?d:a(t),w=x?d:a(e),E=(b=b==l?f:b)==f,A=(w=w==l?f:w)==f,_=b==w;if(_&&h(t)){if(!h(e))return!1;m=!0,E=!1}if(_&&!E)return y||(y=new r),m||u(t)?i(t,e,n,g,v,y):o(t,e,b,n,g,v,y);if(!(1&n)){var S=E&&p.call(t,"__wrapped__"),k=A&&p.call(e,"__wrapped__");if(S||k){var C=S?t.value():t,P=k?e.value():e;return y||(y=new r),v(C,P,n,g,y)}}return!!_&&(y||(y=new r),s(t,e,n,g,v,y))}},5588:(t,e,n)=>{var r=n(4160),i=n(7005);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},2958:(t,e,n)=>{var r=n(6384),i=n(939);t.exports=function(t,e,n,o){var s=n.length,a=s,c=!o;if(null==t)return!a;for(t=Object(t);s--;){var h=n[s];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<a;){var u=(h=n[s])[0],l=t[u],d=h[1];if(c&&h[2]){if(void 0===l&&!(u in t))return!1}else{var f=new r;if(o)var p=o(l,d,u,t,e,f);if(!(void 0===p?i(d,l,3,o,f):p))return!1}}return!0}},2722:t=>{t.exports=function(t){return t!=t}},8458:(t,e,n)=>{var r=n(3560),i=n(5346),o=n(3218),s=n(346),a=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,u=c.toString,l=h.hasOwnProperty,d=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?d:a).test(s(t))}},9221:(t,e,n)=>{var r=n(4160),i=n(7005);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},8749:(t,e,n)=>{var r=n(4239),i=n(1780),o=n(7005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},7206:(t,e,n)=>{var r=n(1573),i=n(6432),o=n(6557),s=n(1469),a=n(9601);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}},280:(t,e,n)=>{var r=n(5726),i=n(6916),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},313:(t,e,n)=>{var r=n(3218),i=n(5726),o=n(3498),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},433:t=>{t.exports=function(t,e){return t<e}},9199:(t,e,n)=>{var r=n(9881),i=n(8612);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},1573:(t,e,n)=>{var r=n(2958),i=n(1499),o=n(2634);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},6432:(t,e,n)=>{var r=n(939),i=n(7361),o=n(9095),s=n(5403),a=n(9162),c=n(2634),h=n(327);t.exports=function(t,e){return s(t)&&a(e)?c(h(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,3)}}},2980:(t,e,n)=>{var r=n(6384),i=n(6556),o=n(8483),s=n(9783),a=n(3218),c=n(1704),h=n(6390);t.exports=function t(e,n,u,l,d){e!==n&&o(n,(function(o,c){if(d||(d=new r),a(o))s(e,n,c,u,t,l,d);else{var f=l?l(h(e,c),o,c+"",e,n,d):void 0;void 0===f&&(f=o),i(e,c,f)}}),c)}},9783:(t,e,n)=>{var r=n(6556),i=n(4626),o=n(7133),s=n(278),a=n(8517),c=n(5694),h=n(1469),u=n(9246),l=n(4144),d=n(3560),f=n(3218),p=n(8630),g=n(6719),v=n(6390),y=n(3678);t.exports=function(t,e,n,m,x,b,w){var E=v(t,n),A=v(e,n),_=w.get(A);if(_)r(t,n,_);else{var S=b?b(E,A,n+"",t,e,w):void 0,k=void 0===S;if(k){var C=h(A),P=!C&&l(A),T=!C&&!P&&g(A);S=A,C||P||T?h(E)?S=E:u(E)?S=s(E):P?(k=!1,S=i(A,!0)):T?(k=!1,S=o(A,!0)):S=[]:p(A)||c(A)?(S=E,c(E)?S=y(E):f(E)&&!d(E)||(S=a(A))):k=!1}k&&(w.set(A,S),x(S,A,m,b,w),w.delete(A)),r(t,n,S)}}},9556:(t,e,n)=>{var r=n(9932),i=n(7786),o=n(7206),s=n(9199),a=n(1131),c=n(1717),h=n(5022),u=n(6557),l=n(1469);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return l(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[u];var d=-1;e=r(e,c(o));var f=s(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++d,value:t}}));return a(f,(function(t,e){return h(t,e,n)}))}},5970:(t,e,n)=>{var r=n(3012),i=n(9095);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},3012:(t,e,n)=>{var r=n(7786),i=n(611),o=n(1811);t.exports=function(t,e,n){for(var s=-1,a=e.length,c={};++s<a;){var h=e[s],u=r(t,h);n(u,h)&&i(c,o(h,t),u)}return c}},371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},9152:(t,e,n)=>{var r=n(7786);t.exports=function(t){return function(e){return r(e,t)}}},98:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var s=-1,a=n(e((r-t)/(i||1)),0),c=Array(a);a--;)c[o?a:++s]=t,t+=i;return c}},107:t=>{t.exports=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}},5976:(t,e,n)=>{var r=n(6557),i=n(5357),o=n(61);t.exports=function(t,e){return o(i(t,e,r),t+"")}},611:(t,e,n)=>{var r=n(4865),i=n(1811),o=n(5776),s=n(3218),a=n(327);t.exports=function(t,e,n,c){if(!s(t))return t;for(var h=-1,u=(e=i(e,t)).length,l=u-1,d=t;null!=d&&++h<u;){var f=a(e[h]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(h!=l){var g=d[f];void 0===(p=c?c(g,f,d):void 0)&&(p=s(g)?g:o(e[h+1])?[]:{})}r(d,f,p),d=d[f]}return t}},6560:(t,e,n)=>{var r=n(5703),i=n(8777),o=n(6557),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},1131:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},2545:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},531:(t,e,n)=>{var r=n(2705),i=n(9932),o=n(1469),s=n(3448),a=r?r.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},7561:(t,e,n)=>{var r=n(7990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},5652:(t,e,n)=>{var r=n(8668),i=n(7443),o=n(1196),s=n(4757),a=n(3593),c=n(1814);t.exports=function(t,e,n){var h=-1,u=i,l=t.length,d=!0,f=[],p=f;if(n)d=!1,u=o;else if(l>=200){var g=e?null:a(t);if(g)return c(g);d=!1,u=s,p=new r}else p=e?[]:f;t:for(;++h<l;){var v=t[h],y=e?e(v):v;if(v=n||0!==v?v:0,d&&y==y){for(var m=p.length;m--;)if(p[m]===y)continue t;e&&p.push(y),f.push(v)}else u(p,y,n)||(p!==f&&p.push(y),f.push(v))}return f}},7415:(t,e,n)=>{var r=n(9932);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},1757:t=>{t.exports=function(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}},4757:t=>{t.exports=function(t,e){return t.has(e)}},4290:(t,e,n)=>{var r=n(6557);t.exports=function(t){return"function"==typeof t?t:r}},1811:(t,e,n)=>{var r=n(1469),i=n(5403),o=n(5514),s=n(9833);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},4318:(t,e,n)=>{var r=n(1149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},4626:(t,e,n)=>{t=n.nmd(t);var r=n(5639),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},7157:(t,e,n)=>{var r=n(4318);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},3147:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},419:(t,e,n)=>{var r=n(2705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},7133:(t,e,n)=>{var r=n(4318);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},6393:(t,e,n)=>{var r=n(3448);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,s=r(t),a=void 0!==e,c=null===e,h=e==e,u=r(e);if(!c&&!u&&!s&&t>e||s&&a&&h&&!c&&!u||i&&a&&h||!n&&h||!o)return 1;if(!i&&!s&&!u&&t<e||u&&n&&o&&!i&&!s||c&&n&&o||!a&&o||!h)return-1}return 0}},5022:(t,e,n)=>{var r=n(6393);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,c=n.length;++i<a;){var h=r(o[i],s[i]);if(h)return i>=c?h:h*("desc"==n[i]?-1:1)}return t.index-e.index}},278:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},8363:(t,e,n)=>{var r=n(4865),i=n(9465);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var h=e[a],u=o?o(n[h],t[h],h,n,t):void 0;void 0===u&&(u=t[h]),s?i(n,h,u):r(n,h,u)}return n}},8805:(t,e,n)=>{var r=n(8363),i=n(9551);t.exports=function(t,e){return r(t,i(t),e)}},1911:(t,e,n)=>{var r=n(8363),i=n(1442);t.exports=function(t,e){return r(t,i(t),e)}},4429:(t,e,n)=>{var r=n(5639)["__core-js_shared__"];t.exports=r},1463:(t,e,n)=>{var r=n(5976),i=n(6612);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,s)}return e}))}},9291:(t,e,n)=>{var r=n(8612);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},5063:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}},7740:(t,e,n)=>{var r=n(7206),i=n(8612),o=n(3674);t.exports=function(t){return function(e,n,s){var a=Object(e);if(!i(e)){var c=r(n,3);e=o(e),n=function(t){return c(a[t],t,a)}}var h=t(e,n,s);return h>-1?a[c?e[h]:h]:void 0}}},7445:(t,e,n)=>{var r=n(98),i=n(6612),o=n(8601);t.exports=function(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),s=void 0===s?e<n?1:-1:o(s),r(e,n,s,t)}}},3593:(t,e,n)=>{var r=n(8525),i=n(308),o=n(1814),s=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=s},8777:(t,e,n)=>{var r=n(852),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},7114:(t,e,n)=>{var r=n(8668),i=n(2908),o=n(4757);t.exports=function(t,e,n,s,a,c){var h=1&n,u=t.length,l=e.length;if(u!=l&&!(h&&l>u))return!1;var d=c.get(t),f=c.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,v=2&n?new r:void 0;for(c.set(t,e),c.set(e,t);++p<u;){var y=t[p],m=e[p];if(s)var x=h?s(m,y,p,e,t,c):s(y,m,p,t,e,c);if(void 0!==x){if(x)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(y===t||a(y,t,n,s,c)))return v.push(e)}))){g=!1;break}}else if(y!==m&&!a(y,m,n,s,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},8351:(t,e,n)=>{var r=n(2705),i=n(1149),o=n(7813),s=n(7114),a=n(8776),c=n(1814),h=r?r.prototype:void 0,u=h?h.valueOf:void 0;t.exports=function(t,e,n,r,h,l,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=a;case"[object Set]":var p=1&r;if(f||(f=c),t.size!=e.size&&!p)return!1;var g=d.get(t);if(g)return g==e;r|=2,d.set(t,e);var v=s(f(t),f(e),r,h,l,d);return d.delete(t),v;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},6096:(t,e,n)=>{var r=n(8234),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var c=1&n,h=r(t),u=h.length;if(u!=r(e).length&&!c)return!1;for(var l=u;l--;){var d=h[l];if(!(c?d in e:i.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=c;++l<u;){var y=t[d=h[l]],m=e[d];if(o)var x=c?o(m,y,d,e,t,a):o(y,m,d,t,e,a);if(!(void 0===x?y===m||s(y,m,n,o,a):x)){g=!1;break}v||(v="constructor"==d)}if(g&&!v){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},9021:(t,e,n)=>{var r=n(5564),i=n(5357),o=n(61);t.exports=function(t){return o(i(t,void 0,r),t+"")}},1957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},8234:(t,e,n)=>{var r=n(8866),i=n(9551),o=n(3674);t.exports=function(t){return r(t,o,i)}},6904:(t,e,n)=>{var r=n(8866),i=n(1442),o=n(1704);t.exports=function(t){return r(t,o,i)}},5050:(t,e,n)=>{var r=n(7019);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},1499:(t,e,n)=>{var r=n(9162),i=n(3674);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}},852:(t,e,n)=>{var r=n(8458),i=n(7801);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},5924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},9607:(t,e,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},9551:(t,e,n)=>{var r=n(4963),i=n(479),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return o.call(t,e)})))}:i;t.exports=a},1442:(t,e,n)=>{var r=n(2488),i=n(5924),o=n(9551),s=n(479),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=a},4160:(t,e,n)=>{var r=n(8552),i=n(7071),o=n(3818),s=n(8525),a=n(577),c=n(4239),h=n(346),u="[object Map]",l="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=h(r),v=h(i),y=h(o),m=h(s),x=h(a),b=c;(r&&b(new r(new ArrayBuffer(1)))!=p||i&&b(new i)!=u||o&&b(o.resolve())!=l||s&&b(new s)!=d||a&&b(new a)!=f)&&(b=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?h(n):"";if(r)switch(r){case g:return p;case v:return u;case y:return l;case m:return d;case x:return f}return e}),t.exports=b},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},222:(t,e,n)=>{var r=n(1811),i=n(5694),o=n(1469),s=n(5776),a=n(1780),c=n(327);t.exports=function(t,e,n){for(var h=-1,u=(e=r(e,t)).length,l=!1;++h<u;){var d=c(e[h]);if(!(l=null!=t&&n(t,d)))break;t=t[d]}return l||++h!=u?l:!!(u=null==t?0:t.length)&&a(u)&&s(d,u)&&(o(t)||i(t))}},2689:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},1789:(t,e,n)=>{var r=n(4536);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},1327:(t,e,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},1866:(t,e,n)=>{var r=n(4536);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},3824:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},9148:(t,e,n)=>{var r=n(4318),i=n(7157),o=n(3147),s=n(419),a=n(7133);t.exports=function(t,e,n){var c=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return o(t);case"[object Symbol]":return s(t)}}},8517:(t,e,n)=>{var r=n(3118),i=n(5924),o=n(5726);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},7285:(t,e,n)=>{var r=n(2705),i=n(5694),o=n(1469),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},6612:(t,e,n)=>{var r=n(7813),i=n(8612),o=n(5776),s=n(3218);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},5403:(t,e,n)=>{var r=n(1469),i=n(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,n)=>{var r,i=n(4429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},5726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},9162:(t,e,n)=>{var r=n(3218);t.exports=function(t){return t==t&&!r(t)}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},4785:(t,e,n)=>{var r=n(1989),i=n(8407),o=n(7071);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},1285:(t,e,n)=>{var r=n(5050);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,n)=>{var r=n(5050);t.exports=function(t){return r(this,t).get(t)}},9916:(t,e,n)=>{var r=n(5050);t.exports=function(t){return r(this,t).has(t)}},5265:(t,e,n)=>{var r=n(5050);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},8776:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},2634:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},4523:(t,e,n)=>{var r=n(8306);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},4536:(t,e,n)=>{var r=n(852)(Object,"create");t.exports=r},6916:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},3498:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},1167:(t,e,n)=>{t=n.nmd(t);var r=n(1957),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5357:(t,e,n)=>{var r=n(6874),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),c=Array(a);++s<a;)c[s]=o[e+s];s=-1;for(var h=Array(e+1);++s<e;)h[s]=o[s];return h[e]=n(c),r(t,this,h)}}},5639:(t,e,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},6390:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},2385:t=>{t.exports=function(t){return this.__data__.has(t)}},1814:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},61:(t,e,n)=>{var r=n(6560),i=n(1275)(r);t.exports=i},1275:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},7465:(t,e,n)=>{var r=n(8407);t.exports=function(){this.__data__=new r,this.size=0}},3779:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},7599:t=>{t.exports=function(t){return this.__data__.get(t)}},4758:t=>{t.exports=function(t){return this.__data__.has(t)}},4309:(t,e,n)=>{var r=n(8407),i=n(7071),o=n(3369);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},2351:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},8016:(t,e,n)=>{var r=n(8983),i=n(2689),o=n(1903);t.exports=function(t){return i(t)?o(t):r(t)}},5514:(t,e,n)=>{var r=n(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},327:(t,e,n)=>{var r=n(3448);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},1903:t=>{var e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+e+"|"+n+")?",a="[\\ufe0e\\ufe0f]?",c=a+s+"(?:\\u200d(?:"+[r,i,o].join("|")+")"+a+s+")*",h="(?:"+[r+e+"?",e,i,o,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(n+"(?="+n+")|"+h+c,"g");t.exports=function(t){for(var e=u.lastIndex=0;u.test(t);)++e;return e}},6678:(t,e,n)=>{var r=n(5990);t.exports=function(t){return r(t,4)}},361:(t,e,n)=>{var r=n(5990);t.exports=function(t){return r(t,5)}},5703:t=>{t.exports=function(t){return function(){return t}}},1747:(t,e,n)=>{var r=n(5976),i=n(7813),o=n(6612),s=n(1704),a=Object.prototype,c=a.hasOwnProperty,h=r((function(t,e){t=Object(t);var n=-1,r=e.length,h=r>2?e[2]:void 0;for(h&&o(e[0],e[1],h)&&(r=1);++n<r;)for(var u=e[n],l=s(u),d=-1,f=l.length;++d<f;){var p=l[d],g=t[p];(void 0===g||i(g,a[p])&&!c.call(t,p))&&(t[p]=u[p])}return t}));t.exports=h},6073:(t,e,n)=>{t.exports=n(4486)},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},3105:(t,e,n)=>{var r=n(4963),i=n(760),o=n(7206),s=n(1469);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},3311:(t,e,n)=>{var r=n(7740)(n(998));t.exports=r},998:(t,e,n)=>{var r=n(1848),i=n(7206),o=n(554),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var c=null==n?0:o(n);return c<0&&(c=s(a+c,0)),r(t,i(e,3),c)}},5564:(t,e,n)=>{var r=n(1078);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},4486:(t,e,n)=>{var r=n(7412),i=n(9881),o=n(4290),s=n(1469);t.exports=function(t,e){return(s(t)?r:i)(t,o(e))}},2620:(t,e,n)=>{var r=n(8483),i=n(4290),o=n(1704);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},7361:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},8721:(t,e,n)=>{var r=n(8565),i=n(222);t.exports=function(t,e){return null!=t&&i(t,e,r)}},9095:(t,e,n)=>{var r=n(13),i=n(222);t.exports=function(t,e){return null!=t&&i(t,e,r)}},6557:t=>{t.exports=function(t){return t}},5694:(t,e,n)=>{var r=n(9454),i=n(7005),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var r=n(3560),i=n(1780);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},9246:(t,e,n)=>{var r=n(8612),i=n(7005);t.exports=function(t){return i(t)&&r(t)}},4144:(t,e,n)=>{t=n.nmd(t);var r=n(5639),i=n(5062),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;t.exports=c},1609:(t,e,n)=>{var r=n(280),i=n(4160),o=n(5694),s=n(1469),a=n(8612),c=n(4144),h=n(5726),u=n(6719),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||u(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(h(t))return!r(t).length;for(var n in t)if(l.call(t,n))return!1;return!0}},3560:(t,e,n)=>{var r=n(4239),i=n(3218);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},6688:(t,e,n)=>{var r=n(5588),i=n(1717),o=n(1167),s=o&&o.isMap,a=s?i(s):r;t.exports=a},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,n)=>{var r=n(4239),i=n(5924),o=n(7005),s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,u=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},2928:(t,e,n)=>{var r=n(9221),i=n(1717),o=n(1167),s=o&&o.isSet,a=s?i(s):r;t.exports=a},7037:(t,e,n)=>{var r=n(4239),i=n(1469),o=n(7005);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},3448:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},6719:(t,e,n)=>{var r=n(8749),i=n(1717),o=n(1167),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},2353:t=>{t.exports=function(t){return void 0===t}},3674:(t,e,n)=>{var r=n(4636),i=n(280),o=n(8612);t.exports=function(t){return o(t)?r(t):i(t)}},1704:(t,e,n)=>{var r=n(4636),i=n(313),o=n(8612);t.exports=function(t){return o(t)?r(t,!0):i(t)}},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},5161:(t,e,n)=>{var r=n(9932),i=n(7206),o=n(9199),s=n(1469);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},6604:(t,e,n)=>{var r=n(9465),i=n(7816),o=n(7206);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},6162:(t,e,n)=>{var r=n(6029),i=n(3325),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},8306:(t,e,n)=>{var r=n(3369);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},3857:(t,e,n)=>{var r=n(2980),i=n(1463)((function(t,e,n){r(t,e,n)}));t.exports=i},3632:(t,e,n)=>{var r=n(6029),i=n(433),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},2762:(t,e,n)=>{var r=n(6029),i=n(7206),o=n(433);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},308:t=>{t.exports=function(){}},7771:(t,e,n)=>{var r=n(5639);t.exports=function(){return r.Date.now()}},9722:(t,e,n)=>{var r=n(5970),i=n(9021)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},9601:(t,e,n)=>{var r=n(371),i=n(9152),o=n(5403),s=n(327);t.exports=function(t){return o(t)?r(s(t)):i(t)}},6026:(t,e,n)=>{var r=n(7445)();t.exports=r},4061:(t,e,n)=>{var r=n(2663),i=n(9881),o=n(7206),s=n(107),a=n(1469);t.exports=function(t,e,n){var c=a(t)?r:s,h=arguments.length<3;return c(t,o(e,4),n,h,i)}},4238:(t,e,n)=>{var r=n(280),i=n(4160),o=n(8612),s=n(7037),a=n(8016);t.exports=function(t){if(null==t)return 0;if(o(t))return s(t)?a(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},9734:(t,e,n)=>{var r=n(1078),i=n(9556),o=n(5976),s=n(6612),a=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=a},479:t=>{t.exports=function(){return[]}},5062:t=>{t.exports=function(){return!1}},8601:(t,e,n)=>{var r=n(4841);t.exports=function(t){return t?Infinity===(t=r(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},554:(t,e,n)=>{var r=n(8601);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},4841:(t,e,n)=>{var r=n(7561),i=n(3218),o=n(3448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||c.test(t)?h(t.slice(2),n?2:8):s.test(t)?NaN:+t}},3678:(t,e,n)=>{var r=n(8363),i=n(1704);t.exports=function(t){return r(t,i(t))}},9833:(t,e,n)=>{var r=n(531);t.exports=function(t){return null==t?"":r(t)}},8718:(t,e,n)=>{var r=n(7412),i=n(3118),o=n(7816),s=n(7206),a=n(5924),c=n(1469),h=n(4144),u=n(3560),l=n(3218),d=n(6719);t.exports=function(t,e,n){var f=c(t),p=f||h(t)||d(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=p?f?new g:[]:l(t)&&u(g)?i(a(t)):{}}return(p?r:o)(t,(function(t,r,i){return e(n,t,r,i)})),n}},3386:(t,e,n)=>{var r=n(1078),i=n(5976),o=n(5652),s=n(9246),a=i((function(t){return o(r(t,1,s,!0))}));t.exports=a},3955:(t,e,n)=>{var r=n(9833),i=0;t.exports=function(t){var e=++i;return r(t)+e}},2628:(t,e,n)=>{var r=n(7415),i=n(3674);t.exports=function(t){return null==t?[]:r(t,i(t))}},7287:(t,e,n)=>{var r=n(4865),i=n(1757);t.exports=function(t,e){return i(t||[],e||[],r)}},75:function(t){(function(){var e,n,r,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-o)/1e6},n=process.hrtime,i=(e=function(){var t;return 1e9*(t=n())[0]+t[1]})(),s=1e9*process.uptime(),o=i-s):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},4087:(t,e,n)=>{for(var r=n(75),i="undefined"==typeof window?n.g:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],c=i["cancel"+s]||i["cancelRequest"+s],h=0;!a&&h<o.length;h++)a=i[o[h]+"Request"+s],c=i[o[h]+"Cancel"+s]||i[o[h]+"CancelRequest"+s];if(!a||!c){var u=0,l=0,d=[];a=function(t){if(0===d.length){var e=r(),n=Math.max(0,16.666666666666668-(e-u));u=n+e,setTimeout((function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return d.push({handle:++l,callback:t,cancelled:!1}),l},c=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}t.exports=function(t){return a.call(i,t)},t.exports.cancel=function(){c.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=a,t.cancelAnimationFrame=c}},6131:t=>{t.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);if(s){var a=o(s);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,r=0;r<n.length;r++)for(var i=n[r].example,o=0;o<i.length;o++)t[t.length]=i[o];for(var s in e)t[t.length]=s;var a=document.createElement("ul");for(a.setAttribute("id","rgbcolor-examples"),r=0;r<t.length;r++)try{var c=document.createElement("li"),h=new RGBColor(t[r]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+h.toHex()+"; color:"+h.toHex(),u.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+t[r]+" -> "+h.toRGB()+" -> "+h.toHex());c.appendChild(u),c.appendChild(l),a.appendChild(c)}catch(t){}return a}}},4176:(t,e,n)=>{var r=n(5274);"string"==typeof r&&(r=[[t.id,r,""]]);n(6723)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(t.exports=r.locals)},6723:(t,e,n)=>{var r,i,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(t){return document.querySelector(t)},c=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=a.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),h=null,u=0,l=[],d=n(1947);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(x(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(x(r.parts[s],e));o[r.id]={id:r.id,refs:1,parts:a}}}}function p(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function g(t,e){var n=c(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=c(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function y(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),m(e,t.attrs),g(t,e),e}function m(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function x(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var s=u++;n=h||(h=y(e)),r=E.bind(null,n,s,!1),i=E.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),g(t,e),e}(e),r=_.bind(null,n,e),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(e),r=A.bind(null,n),i=function(){v(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return f(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var s=n[i];(a=o[s.id]).refs--,r.push(a)}for(t&&f(p(t,e),e),i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete o[a.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function E(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function A(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function _(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},1947:t=>{t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},7027:t=>{t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiAgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDxnIGlkPSIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgoJCTxyZWN0IGZpbGw9IiNGRkZGRkYiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCTxyZWN0IGlkPSJSZWN0YW5nbGUiIHN0cm9rZT0iI2FiZiIgIHg9Ii0xIiB5PSItMSIgd2lkdGg9IjJweCIgaGVpZ2h0PSIycHgiPjwvcmVjdD4KICAgIDwvZz4KPC9zdmc+"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};return(()=>{"use strict";n.d(r,{default:()=>dn});var t={};n.r(t),n.d(t,{animate:()=>T,createSVGElement:()=>k,drag:()=>M,getAngle:()=>O,getDOMRect:()=>_,getEase:()=>N,setAttrs:()=>C,setTransform:()=>P,svgWrapper:()=>S});var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var o,s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function c(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create,Object.create;var h=new Uint8Array(16);function u(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(h)}const l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(t){return"string"==typeof t&&l.test(t)};for(var f=[],p=0;p<256;++p)f.push((p+256).toString(16).substr(1));var g,v,y=0,m=0;const x=function(t,e,n){var r=e&&n||0,i=e||new Array(16),o=(t=t||{}).node||g,s=void 0!==t.clockseq?t.clockseq:v;if(null==o||null==s){var a=t.random||(t.rng||u)();null==o&&(o=g=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=v=16383&(a[6]<<8|a[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),h=void 0!==t.nsecs?t.nsecs:m+1,l=c-y+(h-m)/1e4;if(l<0&&void 0===t.clockseq&&(s=s+1&16383),(l<0||c>y)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=c,m=h,v=s;var p=(1e4*(268435455&(c+=122192928e5))+h)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var x=c/4294967296*1e4&268435455;i[r++]=x>>>8&255,i[r++]=255&x,i[r++]=x>>>24&15|16,i[r++]=x>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var b=0;b<6;++b)i[r+b]=o[b];return e||function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(f[t[e+0]]+f[t[e+1]]+f[t[e+2]]+f[t[e+3]]+"-"+f[t[e+4]]+f[t[e+5]]+"-"+f[t[e+6]]+f[t[e+7]]+"-"+f[t[e+8]]+f[t[e+9]]+"-"+f[t[e+10]]+f[t[e+11]]+f[t[e+12]]+f[t[e+13]]+f[t[e+14]]+f[t[e+15]]).toLowerCase();if(!d(n))throw TypeError("Stringified UUID is invalid");return n}(i)};function b(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function w(t,e){return{x:t.x*e,y:t.y*e}}var E=function(){function t(){this.lengths=[]}return t.prototype.setControl=function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},t.prototype.getPoint=function(t){var e=this,n=e.v0,r=e.v1,i=e.v2,o=e.v3,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0})}(w(s({},n),Math.pow(1-t,3)),w(s({},r),3*Math.pow(1-t,2)*t),w(s({},i),3*(1-t)*Math.pow(t,2)),w(s({},o),Math.pow(t,3)));return a},t.prototype.getAngle=function(t){var e=this.getPoint(Math.max(0,t-.001)),n=this.getPoint(Math.min(1,t+.001));return Math.atan2(n.y-e.y,n.x-e.x)},t.prototype.getSpacedPoints=function(t){var e=[];this.getLengths(t);for(var n=0;n<=t;n++){var r=this.getUtoTmapping(n/t);e.push(this.getPoint(r))}return e},t.prototype.getLengths=function(t){void 0===t&&(t=100);var e,n,r=0,i=s({},this.v0);this.lengths=[s(s({},this.v0),{length:0})];for(var o=1;o<=t;o++){var a=this.getPoint(o/t);r+=b((e=a,{x:(n=i).x-e.x,y:n.y-e.y})),this.lengths.push(s(s({},a),{length:r})),i=a}return this},t.prototype.getLength=function(t){return this.getLengths(t),this.lengths[this.lengths.length-1].length},t.prototype.getUtoTmapping=function(t){var e,n=this.lengths,r=t*n[n.length-1].length,i=0;n.find((function(t,n){return t.length>=r?(e=n,!0):(i=n,!1)}));var o=this.lengths[e],s=this.lengths[i],a=0===t?0:(r-s.length)/(o.length-s.length);return(i+Math.max(a,0))/(this.lengths.length-1)},t}();const A=E;function _(t,e){var n=document.createElement("div");return n.style.position="fixed",n.style.visibility="hidden",n.innerHTML=t,document.body.appendChild(n),n.getBoundingClientRect()}function S(t,e){var n=k("svg");return n.innerHTML=t,e&&e.appendChild(n.children[0]),n.children[0]}function k(t,e){var n=window.document.createElementNS("http://www.w3.org/2000/svg",t);return e&&e.appendChild(n),n}function C(t,e){for(var n in e){if("className"===n)return t.setAttribute("class",e[n]);e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}}function P(t,e,n){return"translate(".concat(e,",").concat(n,") scale(").concat(t,")")}function T(t,e,n,r,i,o){void 0===o&&(o="ease-in");var s,a=Date.now(),c=a+r,h=N(o),u=function(){var o=Date.now();if(o>=c)return n(e),void("function"==typeof i&&i());var l=h.getPoint((o-a)/r).y;n(t+l*(e-t)),s=requestAnimationFrame(u)};return u(),s}function N(t){var e=new A;switch(t){case"ease":e.setControl({x:0,y:0},{x:.25,y:.1},{x:.25,y:1},{x:1,y:1});case"ease-in":e.setControl({x:0,y:0},{x:.42,y:0},{x:1,y:1},{x:1,y:1});case"ease-out":e.setControl({x:0,y:0},{x:0,y:0},{x:.58,y:1},{x:1,y:1});case"ease-in-out":e.setControl({x:0,y:0},{x:.42,y:0},{x:.58,y:1},{x:1,y:1});default:e.setControl({x:0,y:0},{x:0,y:0},{x:1,y:1},{x:1,y:1})}return e}function M(t,e,n,r){function i(t){n(t),document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)}function o(n){e(n),t&&!t.parentElement&&a()}function s(t){r(t),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)}t.addEventListener("mousedown",i);var a=function(){t.removeEventListener("mousedown",i),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),t=void 0};return a}function O(t,e){var n=e.x-t.x,r=e.y-t.y;return 180*Math.atan2(r,n)/Math.PI}var L=s(s({},t),{rect:function(t,e,n,r,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),S('<rect x="'.concat(t,'" y="').concat(e,'" width="').concat(n,'" height="').concat(r,'" rx="').concat(i,'" ry="').concat(o,'" />'))},text:function(t,e,n){return void 0===n&&(n=""),S('<text x="'.concat(t,'" y="').concat(e,'">').concat(n,"</text>"))},circle:function(t,e,n){return S('<circle cx="'.concat(t,'" cy="').concat(e,'" r="').concat(n,'" />'))},image:function(t,e,n,r,i){return S('<image x="'.concat(e,'" y="').concat(n,'" width="').concat(r,'" height="').concat(i,'" xlink:href="').concat(t,'" />'))},path:function(t){return void 0===t&&(t=""),S('<path d="'.concat(t,'" />'))},group:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=k("g");return t&&t.forEach((function(t){n.appendChild(t)})),n}}),I={adsorb:[20,20],linkPoints:[{x:.5,y:0},{x:.5,y:1}],render:function(t){var e,n,r=t.data;return t.shape?t.shape.remove():(e=L.rect(0,0,100,40),n=L.text(20,25,r.name)),C(e,{fill:"#fff",stroke:"#000",rx:5,ry:5}),L.group(e,n)},renderLinkPoint:function(t,e){var n=e.data;e.dom||(e.dom=L.circle(0,0,5));var r=e.dom,i=t.shapeBBox||t.shape.getBBox();t.shapeBBox=i;var o=n.isPixel?n.x:n.x*i.width,s=n.isPixel?n.y:n.y*i.height;return C(r,{cx:o,cy:s,fill:"#fff",stroke:"#08c",class:"ve-link-points"}),e.data||(e.data=n),e.x=o+t.data.x,e.y=s+t.data.y,e.local={x:n.isPixel?n.x:n.x*i.width,y:n.isPixel?n.y:n.y*i.height},e},destroy:function(t){var e;null===(e=t.shape)||void 0===e||e.remove()}};const V=I;const R={adsorb:[20,20],linkPoints:[{x:.5,y:0},{x:.5,y:1}],render:function(t){var e=t.data,n=t.shape;n&&n.remove();var r=L.rect(0,0,180,32),i=L.text(40,21,e.name),o=L.image(e.iconPath,5,4,24,24);return o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),C(r,{class:"icon-node",fill:"#EAEEFA",stroke:"#CCD9FD",rx:17,ry:17}),L.group(r,i,o)},renderLinkPoint:function(t,e){return V.renderLinkPoint.call(void 0,t,e)}};const j={adsorb:[20,20],linkPoints:[{x:0,y:.5},{x:1,y:.5},{x:.5,y:0},{x:.5,y:1}],render:function(t){var e=t.data,n=t.shape;n&&n.remove();var r=S("<foreignObject width=".concat(e.width," height=").concat(e.height,' >\n\t\t<div style="width:').concat(e.width,"px;height:").concat(e.height,'" class="ve-node-wrapper">\n\t\t\t<div class="node-text">').concat(e.name,"</div>\n\t\t</div>\n\t\t</foreignObject>"));return L.group(r)},renderLinkPoint:function(t,e){return V.renderLinkPoint.call(void 0,t,e)}};var D=function(){function t(t){var e=this;this.addNode=function(t){t.uuid||(t.uuid=x(),e.graph.editor.fire("node:makeuuid",t)),t.uuid.indexOf&&t.uuid.indexOf("-")>-1&&(t.uuid=t.uuid.replace(/-/g,""));var n=e.renderNode(t);return e.graph.fire("node:change",{node:n}),n},this.deleteNode=function(t){var n,r,i,o="string"==typeof t?t:t.uuid,s=e.nodes[o],a=e.shapes[s.data.type||"default"];a.destroy&&a.destroy(s),delete e.nodes[o],e.graph.fire("node:remove",{node:s,uuid:o}),null===(n=s.linkPoints)||void 0===n||n.forEach((function(t){t.dom.remove(),t=null})),null===(r=s.fromLines)||void 0===r||r.forEach((function(t){e.graph.line.deleteLine(t,!0,!0)})),null===(i=s.toLines)||void 0===i||i.forEach((function(t){e.graph.line.deleteLine(t,!0,!0)})),s._destroys.forEach((function(t){return t()})),s.dom.remove()},this.graph=t,this.nodes={},this.paper=t.editor.paper,this.nodeG=k("g",this.paper),this.nodeG.classList.add("ve-nodes"),this.initDefs(),this.listenEvent(),this.actives={},this.shapes={default:V,iconNode:R,domNode:j}}return t.prototype.initDefs=function(){this.shadow=S('<defs>\n\t\t\t<filter id="ve-black-shadow" filterUnits="userSpaceOnUse">\n                <feGaussianBlur in="SourceAlpha" stdDeviation="4"></feGaussianBlur>\n                <feGaussianBlur stdDeviation="3" />\n                <feOffset dx="0" dy="0" result="offsetblur"></feOffset>\n                <feFlood flood-color="#333333"></feFlood>\n                <feComposite in2="offsetblur" operator="in"></feComposite>\n                <feComponentTransfer>\n                    <feFuncA type="linear" slope="0.3"></feFuncA>\n                </feComponentTransfer>\n                <feMerge>\n                <feMergeNode />\n                <feMergeNode in="SourceGraphic" />\n                </feMerge>\n            </filter>\n\t\t</defs>',this.paper)},t.prototype.listenEvent=function(){var t=this;this.graph.on("paper:click",(function(){t.unActive()})),this.graph.on("line:click",(function(){t.unActive()})),this.graph.on("copy",(function(){var e=s({},t.actives),n={};for(var r in e)n[r]=s(s({},e[r]),{data:JSON.parse(JSON.stringify(e[r].data))});t.copyNode=n})),this.graph.on("paste",(function(){for(var e in t.unActive(),t.copyNode){var n=t.copyNode[e],r=s({},n.data);r.x+=20+20*Math.random(),r.y+=20+20*Math.random(),delete r.uuid;var i=t.addNode(r);t.setActive(i)}}))},t.prototype.registeNode=function(t,e,n){void 0===n&&(n="default"),this.shapes[t]=Object.assign({},this.shapes[n],e)},t.prototype.render=function(t){var e=this;return void 0===t&&(t={}),new Promise((function(n,r){e.tmpLinkPoints=[],Object.keys(t).map((function(n){e.renderNode(t[n])})),e.timeout=setTimeout((function(){e.tmpLinkPoints.forEach((function(t){e.addNodeLinkPoints(t)})),e.tmpLinkPoints=void 0,n(!0)}),0)}))},t.prototype.renderNode=function(t){var e=t.uuid,n=this.shapes[t.type||"default"];n.paper=this.paper;var r={dom:void 0,toLines:new Set,fromLines:new Set,_destroys:[],data:t,linkPoints:[]},i=n.render(r),o=L.group(i);return r.shape=i,r.dom=o,r.linkPointsTypes=t.linkPointsTypes,i.classList.add("ve-node-shape"),o.setAttribute("class","ve-node ".concat(t.className||"")),o.setAttribute("data-id",e),o.setAttribute("transform","translate(".concat(t.x||0,",").concat(t.y||0,")")),this.nodeG.appendChild(o),this.nodes[t.uuid]=r,this.tmpLinkPoints?this.tmpLinkPoints.push(r):this.addNodeLinkPoints(r),this.addNodeEvent(r),r},t.prototype.update=function(){for(var t in this.nodes)this.updateNode(t,!0)},t.prototype.updateNode=function(t,e){var n;if(void 0===e&&(e=!1),n="object"!=typeof t?this.nodes[t].data:t){var r=n.uuid,i=this.nodes[r],o=this.shapes[n.type||"default"];if(e){var s=o.render(i);i.shape=s,i.dom.prepend(s)}C(i.dom,{class:"ve-node ".concat(n.className||"")}),i.dom.setAttribute("transform","translate(".concat(n.x," ,").concat(n.y,")")),i.data=n,e&&i.linkPoints.forEach((function(t){o.renderLinkPoint(i,t)}))}},t.prototype.addNodeLinkPoints=function(t){var e=this;t.linkPoints=[];var n=this.shapes[t.data.type||"default"];if(t.linkPointsTypes=t.linkPointsTypes||this.shapes[t.data.type].linkPoints,!t.linkPointsTypes)return!1;t.linkPointsTypes.forEach((function(r,i){if(n.renderLinkPoint){var o={data:s({},r),dom:void 0,x:0,y:0};n.renderLinkPoint(t,o),o.index=i,o.nodeId=t.data.uuid,t.linkPoints.push(o),C(o.dom,{"data-node-id":t.data.uuid,"data-index":i}),t.dom.append(o.dom),e.graph.line.addLinkPointEvent(o),e.addLinkHoverEvent(o,t)}}))},t.prototype.addLinkHoverEvent=function(t,e){var n=this;t.dom.addEventListener("mouseover",(function(t){if("lineing"===n.graph.linkStatus)return!1;e.linkPoints.forEach((function(t){t.dom.style.display="block"}))})),t.dom.addEventListener("mouseout",(function(){return"lineing"!==n.graph.linkStatus&&!n.actives[e.data.uuid]&&void e.linkPoints.forEach((function(t){t.dom.style.display="none"}))}))},t.prototype.updateLinkPoints=function(t){var e;null===(e=t.linkPoints)||void 0===e||e.forEach((function(t){t.dom.remove(),t=null})),this.addNodeLinkPoints(t)},t.prototype.panNode=function(t,e,n){var r=this,i=this.graph.editor.controller.scale,o=(t.startX||0)+e/i,s=(t.startY||0)+n/i,a=this.graph.anchorLine.check(o,s);a&&(o=a.x,s=a.y),t.data.x=o,t.data.y=s,t.linkPoints.forEach((function(e){r.shapes[t.data.type||"default"].renderLinkPoint(t,e)})),t.dom.setAttribute("transform","translate(".concat(o," ,").concat(s,")"))},t.prototype.addNodeEvent=function(t){var e=this;t._destroys.push(L.drag(t.shape,(function(n){var r=n.clientX-t.clientX,i=n.clientY-t.clientY;if(e.actives[t.data.uuid])for(var o in e.actives)e.panNode(e.actives[o],r,i),e.graph.fire("node:move",{node:e.actives[o]});else e.panNode(t,r,i),e.graph.fire("node:move",{node:t})}),(function(n){for(var r in e.actives)e.actives[r].startX=e.actives[r].data.x,e.actives[r].startY=e.actives[r].data.y;e.graph.anchorLine.makeAllAnchors(t),t.clientX=n.clientX,t.clientY=n.clientY,t.startX=t.data.x,t.startY=t.data.y}),(function(n){if(e.graph.anchorLine.hidePath(),t.startX===t.data.x&&t.startY===t.data.y)return!1;e.graph.fire("node:change",{node:t})}))),t.shape.addEventListener("click",(function(n){Math.abs(n.clientX-t.clientX)<2&&Math.abs(n.clientY-t.clientY)<2&&(n.shiftKey?e.actives[t.data.uuid]?e.unActive(t):e.setActive(t):(e.unActive(),e.setActive(t)),e.graph.fire("node:click",{node:t,event:n}))})),t.shape.addEventListener("mouseenter",(function(n){if(e.graph.fire("node:mouseenter",{node:t,event:n}),"view"!==e.graph.mode)return"lineing"!==e.graph.linkStatus&&void t.linkPoints.forEach((function(t){t.dom.style.display="block"}))})),t.shape.addEventListener("mouseleave",(function(n){if(e.graph.fire("node:mouseleave",{node:t,event:n}),"view"!==e.graph.mode)return"lineing"!==e.graph.linkStatus&&!e.actives[t.data.uuid]&&void t.linkPoints.forEach((function(t){t.dom.style.display="none"}))}))},t.prototype.setActive=function(t){var e,n=t?((e={})[t.data.uuid]=t,e):this.nodes;for(var r in n)(t=n[r]).shape.classList.add("active"),C(t.shape,{filter:"url(#ve-black-shadow)"}),this.actives[t.data.uuid]=t,t.linkPoints.forEach((function(t){t.dom.style.display="block"}))},t.prototype.unActive=function(t){if(t)delete this.actives[t.data.uuid],this.unActiveNode(t);else{for(var e in this.actives)this.unActiveNode(this.actives[e]);this.actives={}}this.graph.fire("node:unactive",{node:t})},t.prototype.unActiveNode=function(t){t.shape.classList.remove("active"),C(t.shape,{filter:null}),t.linkPoints.forEach((function(t){t.dom.style.display="none"}))},t.prototype.clear=function(){var t=this.nodes;for(var e in clearTimeout(this.timeout),t)this.deleteNode(t[e].data)},t}();const B=D;var z="undefined"!=typeof Float32Array?Float32Array:Array;function U(){var t=new z(6);return z!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function F(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],h=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=r*h+o*u+a,t[5]=i*h+s*u+c,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var X=function(){function t(){this.events={},this.dispatch=this.fire}return t.prototype.on=function(t,e,n){this.events[t]||(this.events[t]=[]),n=n||this.events[t].length,this.events[t].push({index:n,func:e}),this.events[t].sort((function(t,e){return t.index>e.index}))},t.prototype.fire=function(t,e){var n=this.events[t]||[];try{n.forEach((function(t){t.func(e)}))}catch(t){console.warn(t)}},t.prototype.off=function(t,e){this.events[t]=e?this.events[t].filter((function(t){return e!==t.func})):[]},t.prototype.clear=function(){delete this.events},t}();const Y=X;var H=function(){function t(t){this.d=t}return t.prototype.getTotalLength=function(){return this.getLength(this.d)},t.prototype.getPointAtLength=function(t){return this.getLength(this.d,t)},t.prototype.getLength=function(t,e){for(var n,r,i,o,s=this.path2curve(t),a=0,c=0,h=s.length;c<h;c++){if("M"==(i=s[c])[0])n=+i[1],r=+i[2];else{if(o=K(n,r,i[1],i[2],i[3],i[4],i[5],i[6]),void 0!==e&&a+o>e)return K(n,r,i[1],i[2],i[3],i[4],i[5],i[6],e-a);a+=o,n=+i[5],r=+i[6]}i.shift()}return void 0===e?a:$(n,r,i[0],i[1],i[2],i[3],i[4],i[5],1)},t.prototype.path2curve=function(t){for(var e=this.pathToAbsolute(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(Q.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(Z(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(Z(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(W(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(W(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(W(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(W(e.x,e.y,e.X,e.Y))}return t},i=function(t,n){if(t[n].length>7){t[n].shift();for(var r=t[n];r.length;)o[n]="A",t.splice(n++,0,["C"].concat(r.splice(0,6)));t.splice(n,1),h=Math.max(e.length)}},o=[],s="",a="",c=0,h=e.length;c<h;c++){e[c]&&(s=e[c][0]),"C"!=s&&(o[c]=s,c&&(a=o[c-1])),e[c]=r(e[c],n,a),"A"!=o[c]&&"C"==s&&(o[c]="C"),i(e,c);var u=e[c],l=u.length;n.x=u[l-2],n.y=u[l-1],n.bx=parseFloat(u[l-4])||n.x,n.by=parseFloat(u[l-3])||n.y}return e},t.prototype.pathToAbsolute=function(t){var e=this.parsePathString(t);if(!e||!e.length)return[["M",0,0]];var n,r=[],i=0,o=0,s=0,a=0,c=0;"M"==e[0][0]&&(s=i=+e[0][1],a=o=+e[0][2],c++,r[0]=["M",i,o]);for(var h,u,l=c,d=e.length;l<d;l++){if(r.push(h=[]),(n=(u=e[l])[0])!=n.toUpperCase())switch(h[0]=n.toUpperCase(),h[0]){case"A":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+u[6]+i,h[7]=+u[7]+o;break;case"V":h[1]=+u[1]+o;break;case"H":h[1]=+u[1]+i;break;case"M":s=+u[1]+i,a=+u[2]+o;default:for(var f=1,p=u.length;f<p;f++)h[f]=+u[f]+(f%2?i:o)}else for(var g=0,v=u.length;g<v;g++)h[g]=u[g];if("O"!=(n=n.toUpperCase()))switch(h[0]){case"Z":i=+s,o=+a;break;case"H":i=h[1];break;case"V":o=h[1];break;case"M":s=h[h.length-2],a=h[h.length-1];default:i=h[h.length-2],o=h[h.length-1]}}return r},t.prototype.parsePathString=function(e){if(!e)return null;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return r.length||e.replace(t.pathCommand,(function(e,i,o){var s=[],a=i.toLowerCase();if(o.replace(t.pathValues,(function(t,e){return e&&s.push(+e),t})),"m"==a&&s.length>2&&(r.push([i].concat(s.splice(0,2))),a="l",i="m"==i?"l":"L"),"o"==a&&1==s.length&&r.push([i,s[0]]),"r"==a)r.push([i].concat(s));else for(;s.length>=n[a]&&(r.push([i].concat(s.splice(0,n[a]))),n[a]););return e})),r},t.pathCommand=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,t.tCommand=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,t.pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,t}();const G=H;var q=Math.PI;function W(t,e,n,r){return[t,e,n,r,n,r]}function Z(t,e,n,r,i,o){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*r,s*i+a*n,s*o+a*r,i,o]}function Q(t,e,n,r,i,o,s,a,c,h){var u,l=120*q/180,d=q/180*(+i||0),f=[],p=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(!n||!r)return[t,e,a,c,a,c];if(h)A=h[0],_=h[1],w=h[2],E=h[3];else{t=(u=p(t,e,-d)).x,e=u.y;var g=(t-(a=(u=p(a,c,-d)).x))/2,v=(e-(c=u.y))/2,y=g*g/(n*n)+v*v/(r*r);y>1&&(n*=y=Math.sqrt(y),r*=y);var m=n*n,x=r*r,b=(o==s?-1:1)*Math.sqrt(Math.abs((m*x-m*v*v-x*g*g)/(m*v*v+x*g*g))),w=b*n*v/r+(t+a)/2,E=b*-r*g/n+(e+c)/2,A=Math.asin(+((e-E)/r).toFixed(9)),_=Math.asin(+((c-E)/r).toFixed(9));(A=t<w?q-A:A)<0&&(A=2*q+A),(_=a<w?q-_:_)<0&&(_=2*q+_),s&&A>_&&(A-=2*q),!s&&_>A&&(_-=2*q)}var S=_-A;if(Math.abs(S)>l){var k=_,C=a,P=c;_=A+l*(s&&_>A?1:-1),f=Q(a=w+n*Math.cos(_),c=E+r*Math.sin(_),n,r,i,0,s,C,P,[_,k,w,E])}S=_-A;var T=Math.cos(A),N=Math.sin(A),M=Math.cos(_),O=Math.sin(_),L=Math.tan(S/4),I=4/3*n*L,V=4/3*r*L,R=[t,e],j=[t+I*N,e-V*T],D=[a+I*O,c-V*M],B=[a,c];if(j[0]=2*R[0]-j[0],j[1]=2*R[1]-j[1],h)return[j,D,B].concat(f);for(var z=[],U=0,F=(f=[j,D,B].concat(f).join().split(",")).length;U<F;U++)z[U]=U%2?p(f[U-1],f[U],d).y:p(f[U],f[U+1],d).x;return z}function $(t,e,n,r,i,o,s,a,c){var h=1-c,u=Math.pow(h,3),l=Math.pow(h,2),d=c*c,f=d*c,p=t+2*c*(n-t)+d*(i-2*n+t),g=e+2*c*(r-e)+d*(o-2*r+e),v=n+2*c*(i-n)+d*(s-2*i+n),y=r+2*c*(o-r)+d*(a-2*o+r);return{x:u*t+3*l*c*n+3*h*c*c*i+f*s,y:u*e+3*l*c*r+3*h*c*c*o+f*a,m:{x:p,y:g},n:{x:v,y},start:{x:h*t+c*n,y:h*e+c*r},end:{x:h*i+c*s,y:h*o+c*a},alpha:90-180*Math.atan2(p-v,g-y)/q}}function K(t,e,n,r,i,o,s,a,c){return void 0===c?J(t,e,n,r,i,o,s,a):$(t,e,n,r,i,o,s,a,function(t,e,n,r,i,o,s,a,c){if(!(c<0||J(t,e,n,r,i,o,s,a)<c)){var h,u=.5,l=1-u;for(h=J(t,e,n,r,i,o,s,a,l);Math.abs(h-c)>.01;)h=J(t,e,n,r,i,o,s,a,l+=(h<c?1:-1)*(u/=2));return l}}(t,e,n,r,i,o,s,a,c))}function J(t,e,n,r,i,o,s,a,c){void 0===c&&(c=1);for(var h=(c=c>1?1:c<0?0:c)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=h*u[f]+h,g=tt(p,t,n,i,s),v=tt(p,e,r,o,a),y=g*g+v*v;d+=l[f]*Math.sqrt(y)}return h*d}function tt(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n}var et={arcRatio:4,adsorb:[20,20],render:function(t){var e=t.from,n=t.to,r=t.data,i=this.makePath(e,n,t),o=t.shape?t.shape:L.group();t.shape=o;var a=t.path?t.path:t.path=L.path(),c=t.shadowPath?t.shadowPath:t.shadowPath=L.path();return C(a,s({d:i,class:"ve-line-path","stroke-dasharray":"10",fill:"transparent","stroke-width":2,stroke:"rgba(178,190,205,0.7)"},r.style||{})),C(c,{d:i,stroke:"transparent",fill:"none"}),t.pathData=new G(i),c.setAttribute("class","ve-shdow-path"),T(10,0,(function(t){return C(a,{"stroke-dasharray":"".concat(t)})}),300),o.appendChild(c),o.appendChild(a),this.renderLabel&&this.renderLabel(t),o},makePath:function(t,e,n){var r=t.x,i=t.y,o=e.x,s=e.y,a=e.x,c=e.y,h={x:r,y:i},u={x:o,y:s},l=this.getPointDirect(t),d=this.getPointDirect(e),f=Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))/this.arcRatio;h.x+=(1/l<0?-1:1)*Math.cos(l)*f,h.y+=-Math.sin(l)*f,u.x+=(1/d<0?-1:1)*Math.cos(d)*f,u.y+=-Math.sin(d)*f,1===t.data.y?i+=0:0===t.data.y?i-=0:0===t.data.x?r-=0:1===t.data.x&&(r+=0),1===e.data.y?s+=8:0===e.data.y?s-=8:0===e.data.x?o-=8:1===e.data.x&&(o+=8);var p="M".concat(t.x," ").concat(t.y," T ").concat(r," ").concat(i),g="".concat(o," ").concat(s," T ").concat(a," ").concat(c," "),v="".concat(p,"C").concat(h.x," ").concat(h.y," ").concat(u.x," ").concat(u.y," ").concat(g);return n.bezierData={from:{x:r,y:i},to:{x:o,y:s},startControlPoint:h,endControlPoint:u},n.data.fromX=t.x,n.data.fromY=t.y,n.data.toX=e.x,n.data.toY=e.y,v},getPointDirect:function(t){var e=[t.data.x,t.data.y];return(0===e[1]?Math.PI/2:1===e[1]?-Math.PI/2:0===e[0]?Math.PI:1===e[0]?-Math.PI:Math.atan((e[1]-.5)/(e[0]-.5))+(e[0]-.5<0?Math.PI:0))||0},renderArrow:function(t){var e=t.to,n=0;e.data.y<=0?n=180:e.data.x>=1?n=270:e.data.x<=0&&(n=90);var r="M".concat(-5," ").concat(10,"L").concat(0," ").concat(0,"L").concat(5," ").concat(10,"Z"),i=t.arrow?t.arrow:L.path(),o=U();return F(o,o,[e.x,e.y]),function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],h=Math.sin(n),u=Math.cos(n);t[0]=r*u+o*h,t[1]=i*u+s*h,t[2]=r*-h+o*u,t[3]=i*-h+s*u,t[4]=a,t[5]=c}(o,o,n*Math.PI/180),C(i,s({class:"ve-line-arrow",d:r,fill:"rgba(178,190,205,0.7)",transform:"matrix(".concat(o.join(","),")")},t.data.arrowStyle)),i},renderLabel:function(t){var e=t.from,n=t.to,r=t.bezierData,i=r.startControlPoint,o=r.endControlPoint,s=t.data,a=s.label,c=s.labelCfg,h=void 0===c?{}:c;if(!a)return t.label&&(t.label.labelGroup.remove(),t.label=null),null;var u=a,l=h||{},d=l.refX,f=void 0===d?0:d,p=l.refY,g=void 0===p?0:p,v=l.autoRotate,y=l.showNum,m=void 0===y?20:y,x=l.style,b=void 0===x?{fill:"#333",stroke:"#fff",fontSize:"12px"}:x,w=new A;w.setControl(e,i,o,n);var E=w.getPoint(.5)||{},_=E.x,S=E.y;a&&a.length>m&&m&&(a=a.slice(0,m)+"..."),t.label||(t.label={text:L.text(0,0,a),textRect:L.rect(0,0,10,10),labelGroup:null},t.label.labelGroup=L.group(t.label.text,t.label.textRect),t.shape.appendChild(t.label.labelGroup));var k=t.label,P=k.text,T=(k.textRect,k.textBBox),N=k.oldText,M=k.labelGroup,O=_+(f||0),I=S+(g||0);C(P,{text:a||"",fill:b.fill,fontSize:b.fontSize,textAnchor:"middle",dominantBaseline:"middle",x:O,y:I}),T&&N===a||(t.oldText=a,t.label.textBBox=P.getBBox());var V=t.label.textBBox,R=V.width,j=V.height;if(C(t.label.textRect,{fill:b.stroke,width:R,height:j,stroke:"transparent",x:O-.5*R,y:I-.5*j}),C(M,{class:"ve-line-label","data-label":encodeURI(u)}),v){var D=L.getAngle(e,n);(e.x<n.x||e.x===n.x)&&(D+=180),C(M,{transform:"rotate(".concat(D,",").concat(_+(f||0),",").concat(S+(g||0),")")})}return M},checkNewLine:function(t){return t.from!==t.to}};const nt=et;var rt=s(s({},nt),{gapDistance:30,rankDir:"tb",makePath:function(t,e,n){var r=t.dom.getBBox(),i=e.dom.getBBox(),o={x:r.x+r.width/2,y:r.y+r.height/2},s={x:i.x+i.width/2,y:i.y+i.height/2},a=this.getDirection({x:t.x,y:t.y},r,o),c=this.getDirection({x:e.x,y:e.y},i,s),h={x:t.x,y:t.y},u={x:e.x,y:e.y};this.makeGap(a,h),this.makeGap(c,u);var l,d,f=[h],p=["bottom","top","left","right"];p.indexOf(a)>1==p.indexOf(c)>1?(l=(h.y+u.y)/2,f.push({x:h.x,y:l},{x:u.x,y:l})):(d=(h.x+u.x)/2,f.push({x:d,y:h.y},{x:d,y:u.y})),f.push(u);var g="M".concat(t.x," ").concat(t.y," ");return f.map((function(t){g+="L".concat(t.x," ").concat(t.y," ")})),g+="L".concat(e.x," ").concat(e.y)},makeGap:function(t,e){return"left"===t?e.x-=this.gapDistance:"right"===t&&(e.x+=this.gapDistance),"top"===t?e.y-=this.gapDistance:"bottom"===t&&(e.y+=this.gapDistance),e},getDirection:function(t,e,n){var r=t.x,i=t.y,o=e.x,s=e.y,a=e.x,c=e.y+e.height,h=function(t,e){var r=(s-n.y)/(o-n.x),i=n.y-n.x*r;return t||0===t?r*t+i:0===r?t:(void 0-i)/r}(r),u=function(t,e){var r=(c-n.y)/(a-n.x),i=n.y-n.x*r;return t?r*t+i:0===r?t:(void 0-i)/r}(r);return i<h&&i>u?"left":i>h&&i>u?"bottom":i<u&&i>h?"right":"top"}});const it=rt;var ot=function(){function t(t){var e=this;this.tempLineRender={render:function(){var t=L.path();return e.paper.appendChild(t),C(t,{stroke:"#abc","stroke-dasharray":"10 10"}),t},renderPath:function(t,e){var n=t.fromX,r=void 0===n?0:n,i=t.fromY,o=void 0===i?0:i,s=t.x,a=void 0===s?0:s,c=t.y,h=void 0===c?0:c;C(e.dom,{d:"M".concat(r," ").concat(o,"L").concat(a," ").concat(h)})}},this.updateActiveLine=function(t){var n,r=e.hoverLinkPoint,i=e.graph.node.nodes,o=t.data,a=s({},o),c=o.type,h=void 0===c?"default":c,u=o.uuid;if(r){var l=r.nodeId,d=i[o.to],f=r.index;!e.shapes[h].checkNewLine(s(s({},o),{to:l,toPoint:f}),e.graph.editor)||o.to==l&&f==o.toPoint?e.graph.fire("line:drop",{line:t}):(d.fromLines.delete(u),Object.assign(o,{to:l,toPoint:f}),i[l].fromLines.add(u),e.graph.fire("line:change",{line:t,type:"change",before:a})),null===(n=null==r?void 0:r.dom)||void 0===n||n.classList.remove("hover")}e.updateLine(u)},this.checkNewLine=function(){var t=e.hoverLinkPoint;if(t){var n=t.nodeId,r=t.index,i=Object.assign(e.tempLine.data,{uuid:x(),to:n,toPoint:r});if(e.lines[i.uuid])return;e.graph.fire("line:beforeAdd",{line:i}),e.shapes[i.type||"default"].checkNewLine(i,e.graph.editor)&&e.addLine(i),null==t||t.dom.classList.remove("hover"),e.hoverLinkPoint=void 0}},this.calcLinkPoint=function(t,n,r){var i;void 0===r&&(r=[20,20]);var o=e.allLinkPoints.find((function(i){var o,s;if(Math.abs(t-i.x)<r[0]&&Math.abs(n-i.y)<r[1])return null===(o=e.hoverLinkPoint)||void 0===o||o.dom.classList.remove("hover"),e.hoverLinkPoint=i,null===(s=i.dom)||void 0===s||s.classList.add("hover"),i}));return o||null===(i=e.hoverLinkPoint)||void 0===i||i.dom.classList.remove("hover"),o},this.makeAdsorbPoints=function(){var t=e.graph.node.nodes;for(var n in e.allLinkPoints=[],t)t[n].linkPoints.forEach((function(t){e.allLinkPoints.push(t)}))},this.addLinkPointEvent=function(t){if("view"!==e.graph.mode){var n,r,i=e.graph.node.nodes[t.nodeId];L.drag(t.dom,(function(t){var o=e.tempLine.data,s=o.fromX,a=o.fromY,c=e.graph.editor.controller.scale,h=(s||0)+(t.clientX-n)/c+1,u=(a||0)+(t.clientY-r)/c-1,l=e.graph.node.shapes[i.data.type].adsorb,d=e.calcLinkPoint(h,u,l);d&&(h=d.x,u=d.y),e.tempLineRender.renderPath({fromX:s,fromY:a,x:h,y:u},e.tempLine)}),(function(o){n=o.clientX,r=o.clientY,e.makeAdsorbPoints(),e.tempLine={dom:e.tempLineRender.render(),data:{from:i.data.uuid,to:void 0,fromPoint:t.index,fromX:t.x,fromY:t.y}},e.graph.fire("line:drag")}),(function(t){var n=e.hoverLinkPoint,r=null;n&&(r=n),e.checkNewLine(),e.tempLine.dom.remove(),e.graph.fire("line:drop",{fromNode:i,toNode:r,event:t})}))}},this.graph=t,this.node=t.node,this.paper=t.editor.paper,this.lines={},this.lineG=k("g",this.paper),this.paper.prepend(this.lineG),this.lineG.classList.add("ve-lines"),this.allLinkPoints=[],this.shapes={default:nt,polyline:it},this.listenEvent()}return t.prototype.listenEvent=function(){var t=this;this.graph.on("paper:click",(function(){t.unActiveLine()})),this.graph.on("node:click",(function(){t.unActiveLine()}))},t.prototype.addLine=function(t){this.graph.fire("line:beforeadd",{data:t,type:"add"});var e=this.renderLine(t);this.graph.fire("line:add",{line:e,type:"add"})},t.prototype.updateByNode=function(t){var e=this;t.fromLines.forEach((function(t){e.updateLine(t,!0)})),t.toLines.forEach((function(t){e.updateLine(t,!0)}))},t.prototype.renderLine=function(t){var e=t.uuid||x(),n=this.node.nodes,r=this.shapes[t.type||"default"],i=t.from,o=t.to,s=t.fromPoint,a=void 0===s?0:s,c=t.toPoint,h=void 0===c?0:c,u=n[i],l=n[o],d=u.linkPoints[a],f=l.linkPoints[h],p={arrow:null,dom:null,shape:null,arrow2:void 0,pathData:void 0,data:Object.assign(t,{uuid:e}),from:d,to:f};r.graph=this.graph;var g=r.render(p),v=r.renderArrow(p),y=L.group(g,v);return C(g,{class:"ve-line-shape"}),p.dom=y,p.shape=g,p.arrow=v,t.arrow2&&r.renderArrow2&&(p.arrow2=r.renderArrow2(p)),C(y,{class:"ve-line ".concat(t.className||"")}),this.addToNodes(p),this.addLineEvents(p),this.lines[e]=p,this.lineG.appendChild(y),p},t.prototype.update=function(){var t=this;Object.values(this.lines).forEach((function(e){t.updateLine(e.data.uuid,!0)}))},t.prototype.updateLine=function(t,e){var n,r;void 0===e&&(e=!0),"string"!=typeof t?(n=t.uuid,r=t):r={uuid:n=t};var i=this.graph.node.nodes,o=this.lines[n],s=o.data,a=s.type,c=s.className,h=void 0===c?"":c,u=s.from,l=s.to,d=s.fromPoint,f=void 0===d?0:d,p=s.toPoint,g=void 0===p?0:p;o.from=i[u].linkPoints[f],o.to=i[l].linkPoints[g],e?(this.shapes[a||"default"].render(o),o.arrow=this.shapes[a||"default"].renderArrow(o),o.dom.setAttribute("class","ve-line ".concat(h||"")),o.data=Object.assign(o.data,r||{})):o.data=Object.assign(o.data,r||{}),this.activeLine===o&&this.setActiveLine(o)},t.prototype.deleteLine=function(t,e,n){var r;void 0===e&&(e=!1),void 0===n&&(n=!1);var i=(r="string"==typeof t?this.lines[t]:this.lines[t.uuid]).data.uuid,o=this.node.nodes;if(r){delete this.lines[i];var s=r.data,a=s.from,c=s.to;o[a]&&o[a].toLines.delete(i),o[c]&&o[c].fromLines.delete(i),!e&&this.graph.fire("line:remove",{line:r,uuid:i,before:r.data,byNode:n,type:"remove"}),r.arrow.remove(),r.arrow=null,r.dom.remove(),this.activeLine=null}},t.prototype.registeLine=function(t,e){this.shapes[t]=Object.assign({},this.shapes.default,e)},t.prototype.render=function(t){var e=this;void 0===t&&(t={}),Object.keys(t).map((function(n){var r=t[n];e.renderLine(r)}))},t.prototype.addToNodes=function(t){var e=this.graph.node.nodes,n=t.data,r=n.from,i=n.to,o=t.data.uuid;e[r].toLines.add(o),e[i].fromLines.add(o)},t.prototype.setActiveLine=function(t){this.unActiveLine(),this.activeLine=t,this.activeLine.dom.classList.add("active")},t.prototype.unActiveLine=function(){this.activeLine&&this.activeLine.dom.classList.remove("active"),this.activeLine=null},t.prototype.addLineEvents=function(t){var e,n,r=this;t.shape.addEventListener("mouseenter",(function(e){r.graph.fire("line:mouseenter",{line:t,event:e})})),t.shape.addEventListener("mouseleave",(function(e){r.graph.fire("line:mouseleave",{line:t,event:e})})),t.shape.addEventListener("click",(function(e){r.setActiveLine(t),r.graph.fire("line:click",{line:t,event:e})})),"view"!==this.graph.mode&&L.drag(t.arrow,(function(i){var o=r.tempLine.data,s=o.fromX,a=o.fromY,c=o.toX,h=o.toY,u=void 0===h?0:h,l=i.clientX-e,d=i.clientY-n,f=r.graph.editor.controller.scale,p=(c||0)+l/f+1,g=u+d/f-1,v=r.graph.line.shapes[t.data.type||"default"].adsorb,y=r.calcLinkPoint(p,g,v);y&&(p=y.x,g=y.y),r.tempLineRender.renderPath({fromX:s,fromY:a,x:p,y:g},r.tempLine)}),(function(i){var o=t.data,s=o.fromX,a=void 0===s?0:s,c=o.fromY,h=void 0===c?0:c,u=o.toX,l=o.toY,d=o.from,f=o.fromPoint;e=i.clientX,n=i.clientY,r.makeAdsorbPoints(),t.dom.style.display="none",o.status="active",r.tempLine={dom:r.tempLineRender.render(),data:{from:d,fromPoint:f,fromX:a,fromY:h,to:null,toX:u,toY:l}},r.graph.fire("line:drag")}),(function(){t.dom.style.display="block",r.tempLine.dom.remove(),r.updateActiveLine(t)}))},t.prototype.clear=function(){var t=this.lines;for(var e in t)this.deleteLine(t[e].data,!0)},t}();const st=ot;var at=function(){function t(t){this.graph=t,this.anchorLines={},this.paper=t.editor.paper,this.anchorDistance=t.editor.config.anchorDistance||5,this.anchorXLength=t.editor.config.anchorXLength||10,this.anchorYLength=t.editor.config.anchorYLength||10,this.hideAchorLine=t.editor.config.hideAchorLine,this.hideAchor=t.editor.config.hideAchor,this.anchors=[],this.path=L.path(),this.path.classList.add("anchor-line")}return t.prototype.makeAllAnchors=function(t){if(!this.hideAchorLine){this.node=t;var e=[],n=this.graph.node.nodes;for(var r in n){var i=n[r],o=i.shape.getBBox();i.shapeBBox=o;var s=o.x,a=o.y,c=o.width,h=o.height;e.push({x:s,y:a},{x:s+c,y:a},{x:s+c,y:a+h},{x:s,y:a+h},{x:s+c/2,y:a+h/2})}this.anchors=e}},t.prototype.checkAchor=function(t,e){var n=this.anchorXLength,r=this.anchorYLength,i=e%r;return{x:t=t%n<n/2?Math.floor(t/n)*n:Math.ceil(t/n)*n,y:e=i<r/2?Math.floor(e/r)*r:Math.ceil(e/r)*r}},t.prototype.check=function(t,e){var n=this;if(!this.hideAchorLine){var r=this.node.shapeBBox,i=r.width,o=r.height,s={x:t+i/2,y:e+o/2},a=[{x:t,y:e},{x:t+i,y:e},{x:t+i,y:e+o},{x:t,y:e+o},s],c={x:0,y:0},h={x:t,y:e},u="",l=this.anchors.find((function(t){return a.find((function(e,r){var i=t.y-e.y,o=t.x-e.x;return Math.abs(o)<n.anchorDistance?(c.x=t.x,h.x+=o,u="x",!0):Math.abs(i)<n.anchorDistance?(c.y=t.y,h.y+=i,u="y",!0):void 0}))}));if(!l)return this.path.style.display="none",this.hideAchor?{x:t,y:e}:this.checkAchor(t,e);void 0===c.x?c.x=s.x:c.y=s.y;var d="M".concat(c.x,",").concat(c.y," L").concat(l.x,",").concat(l.y);if(this.path.setAttribute("d",d),this.path.style.display="block",!this.hideAchor){var f=this.checkAchor(h.x,h.y);return f[u]=h[u],f}return h}return this.hideAchor?{x:t,y:e}:this.checkAchor(t,e)},t.prototype.hidePath=function(){this.path.style.display="none"},t}();const ct=at;var ht=n(7027);const ut=function(t){function e(e){var n=t.call(this)||this;return n.onKeyDown=function(t){if("view"!==n.mode&&!(["TEXTAREA","INPUT"].indexOf(document.activeElement.tagName)>-1&&"false"!==document.activeElement.getAttribute("contenteditable"))){if("Backspace"===t.key){var e=[];for(var r in n.node.actives)n.node.deleteNode(n.node.actives[r].data),delete n.node.actives[r],e.push(r);n.line.activeLine&&n.line.deleteLine(n.line.activeLine.data),n.fire("delete",{event:t,deleteKeys:e})}if(t.keyCode!=="C".charCodeAt(0)||!t.metaKey&&!t.ctrlKey){if(t.keyCode!=="V".charCodeAt(0)||!t.metaKey&&!t.ctrlKey)return t.keyCode!=="Z".charCodeAt(0)||!t.metaKey&&!t.ctrlKey||t.shiftKey||n.editor.schema.undo(),t.keyCode==="Z".charCodeAt(0)&&(t.metaKey||t.ctrlKey)&&t.shiftKey&&n.editor.schema.redo(),t.preventDefault(),!1;n.fire("paste",{event:t})}else n.fire("copy",{event:t})}},n.editor=e,n.node=new B(n),n.line=new st(n),n.anchorLine=new ct(n),n.mode=e.config.mode,n.listenEvents(),n.editor.config.showBackGrid&&n.addBack(),n}return i(e,t),e.prototype.addBack=function(){this.editor.container.querySelector(".ve-editor-back").style.backgroundImage="url(".concat(ht,")")},e.prototype.listenEvents=function(){var t=this;this.on("node:move",(function(e){var n=e.node;t.line.updateByNode(n)})),C(this.editor.svg,{tabindex:"0"}),this.editor.svg.addEventListener("click",(function(e){"svg"===e.target.tagName&&t.fire("paper:click",e)})),document.addEventListener("keydown",this.onKeyDown),this.on("line:drag",(function(){for(var e in t.linkStatus="lineing",t.node.nodes)t.node.nodes[e].linkPoints.forEach((function(t){t.dom.style.display="block"}))})),this.on("line:drop",(function(){for(var e in t.linkStatus="none",t.node.nodes)t.node.nodes[e].linkPoints.forEach((function(t){t.dom.style.display="none"}))}))},e.prototype.render=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.fire("beforeRender"),this.data=t,[4,this.node.render(t.nodesMap)];case 1:return e.sent(),[4,this.line.render(t.linesMap)];case 2:return e.sent(),this.fire("render"),[2]}}))}))},e.prototype.update=function(){this.node.update(),this.line.update(),this.fire("update")},e.prototype.clearGraph=function(){this.line.clear(),this.node.clear()},e.prototype.destroy=function(){this.clearGraph(),this.clear(),document.removeEventListener("keydown",this.onKeyDown)},e}(Y);var lt=function(t){function e(e){var n=t.call(this)||this;return n.scaleRatio=.01,n.scale=1,n.x=0,n.y=0,n.achors=[],n.onWheel=function(t){if("disabled"!==n.status)if(t.preventDefault(),t.ctrlKey){var e=Math.max(1-t.deltaY*n.scaleRatio,.1);n.zoom(e,t.offsetX,t.offsetY)}else n.pan(-t.deltaX,-t.deltaY)},n.panStart=function(t){"svg"===t.target.tagName&&"disabled"!==n.status&&(t.preventDefault(),n.startPosition={x:t.clientX,y:t.clientY},n.svg.addEventListener("mousemove",n.panning))},n.panStop=function(t){t.preventDefault(),n.svg.removeEventListener("mousemove",n.panning),n.editor.fire("panEnd",{event:t})},n.zoom=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),n.scale*=t;var i=[(e-n.x)*(t-1),(r-n.y)*(t-1)];n.x-=i[0],n.y-=i[1],n.update(),n.editor.fire("zoom",{scale:t})},n.zoomTo=function(t){n.scale=t,n.update()},n.transform=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),n.scale=t,n.x=e,n.y=r,n.update(),n.editor.fire("panning"),n.editor.fire("zoom")},n.panning=function(t){t.preventDefault();var e={x:t.clientX,y:t.clientY},r=n.startPosition,i=[e.x-r.x,e.y-r.y];n.x+=i[0],n.y+=i[1],n.update(),n.startPosition=e,n.editor.fire("panning",{event:t})},n.editor=e,n.paper=e.paper,n.svg=e.svg,n.listenEvents(),n}return i(e,t),e.prototype.autoFit=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!0),a(this,void 0,void 0,(function(){var n,r,i,o,s,a,h,u=this;return c(this,(function(c){switch(c.label){case 0:return n=this.editor.schema.getData(),C(this.paper,{transform:P(this.scale,0,0),transition:"all 0.2s"}),r=this.editor.dom.getBoundingClientRect(),i=r.width,o=r.height,s=this.paper.getBBox(),a=(i-s.width)/2-s.x,h=(o-s.height)/2-s.y,n.nodes.forEach((function(n){t&&(n.x+=a),e&&(n.y+=h)})),this.x=(i-i*this.scale)/2,this.y=(o-o*this.scale)/2,this.update(),[4,this.editor.schema.setData(n)];case 1:return c.sent(),this.editor.fire("autofit",{data:n}),setTimeout((function(){u.paper.style.transition=null}),200),[2]}}))}))},e.prototype.listenEvents=function(){this.svg.addEventListener("mousedown",this.panStart),this.svg.addEventListener("mouseup",this.panStop),this.svg.addEventListener("mouseleave",this.panStop),this.svg.addEventListener("wheel",this.onWheel)},e.prototype.clear=function(){this.svg.removeEventListener("mousedown",this.panStart),this.svg.removeEventListener("mouseup",this.panStop),this.svg.removeEventListener("mouseleave",this.panStop),this.svg.removeEventListener("wheel",this.onWheel)},e.prototype.disableWheel=function(){this.svg.removeEventListener("wheel",this.onWheel)},e.prototype.disablePan=function(){this.svg.removeEventListener("mousedown",this.panStart)},e.prototype.pan=function(t,e){this.x+=t,this.y+=e,this.update(),this.editor.fire("panning")},e.prototype.moveTo=function(t,e){this.x=t,this.y=e,this.update()},e.prototype.disable=function(){this.status="disabled"},e.prototype.enable=function(){this.status="enable"},e.prototype.update=function(){C(this.paper,{transform:"matrix(".concat(this.scale,", 0, 0, ").concat(this.scale,", ").concat(this.x,", ").concat(this.y,")")})},e}(Y);const dt=lt;const ft=function(){function t(t){this.index=-1,this.schemaList=[],this.schema=t}return t.prototype.push=function(t){-1!==this.index&&this.index<this.schemaList.length-1&&this.schemaList.splice(this.index+1,this.schemaList.length-this.index-1),this.schemaList.push(JSON.stringify(t).trim()),this.index++,this.schema.editor.fire("change")},t.prototype.pop=function(){this.schemaList.pop(),this.index--,this.schema.editor.fire("change")},t.prototype.replace=function(t,e){this.schemaList[this.index+t]=e},t.prototype.redo=function(){this.schema.data=JSON.parse(this.schemaList[++this.index]),this.schema.editor.fire("change")},t.prototype.undo=function(){this.schema.data=JSON.parse(this.schemaList[--this.index]),this.schema.editor.fire("change")},t.prototype.clear=function(){this.schemaList=[],this.index=-1},t}();var pt=n(681),gt=n.n(pt);const vt=function(){function t(t){this.data={nodesMap:{},linesMap:{}},this.editor=t,this.history=new ft(this),this.listenEvents()}return t.prototype.format=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,h,u,l,d,f;return c(this,(function(c){switch(c.label){case 0:for(l in t=this.editor.graph.node.nodes,e=this.editor.graph.line.lines,n={nodes:[],lines:[]},r=new(gt().graphlib.Graph),i=Object.assign({nodesep:50,rankdir:"TB",ranksep:50,align:"UL"},this.editor.config.dagreOption),r.setGraph(i),o=this.editor.config.dagreOption.center,a=void 0===o||o,r.setDefaultEdgeLabel((function(){return{}})),t)h=t[l],(f=h.data).width&&f.height||(u=h.dom.getBBox(),f.width=u.width,f.height=u.height),r.setNode(l,s({},f));for(l in e)d=e[l],f=d.data,r.setEdge(f.from,f.to),n.lines.push(f);return gt().layout(r),r.nodes().forEach((function(t){var e=r.node(t);a&&(i.rankdir.indexOf("T")<0?e.y-=e.height/2:e.x-=e.width/2),n.nodes.push(e)})),[4,this.setData(n)];case 1:return c.sent(),this.editor.fire("format",{data:n}),[2]}}))}))},t.prototype.listenEvents=function(){var t=this;["node:change","node:add","line:change","line:add","line:remove","delete"].forEach((function(e){t.editor.graph.on(e,(function(){t.history.push(t.makeNowDataMap())}),9999)}))},t.prototype.pushHistory=function(){this.history.push(this.makeNowDataMap())},t.prototype.popHistory=function(){this.history.pop()},t.prototype.makeNowDataMap=function(){var t=this.editor.graph.node.nodes,e=this.editor.graph.line.lines,n={},r={};for(var i in t)n[i]=t[i].data;for(var i in e)r[i]=e[i].data;return this.data={nodesMap:n,linesMap:r},this.data},t.prototype.setData=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.parseData(t),this.editor.graph.clearGraph(),[4,this.renderData()];case 1:return e.sent(),this.editor.fire("load",t),[2]}}))}))},t.prototype.setInitData=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.setData(t)];case 1:return e.sent(),this.history.clear(),this.history.push(this.data),[2]}}))}))},t.prototype.parseData=function(t){var e=t.nodes,n=void 0===e?[]:e,r=t.lines,i=void 0===r?[]:r,o={},s={};n.forEach((function(t){o[t.uuid]=t})),i.forEach((function(t){var e=t.uuid;s[e||x()]=t})),this.data={nodesMap:o,linesMap:s}},t.prototype.renderData=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.editor.graph.render(this.data)];case 1:return t.sent(),[2]}}))}))},t.prototype.redo=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.editor.graph.clearGraph(),this.history.redo(),[4,this.renderData()];case 1:return t.sent(),this.editor.fire("redo"),[2]}}))}))},t.prototype.undo=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.editor.graph.clearGraph(),this.history.undo(),[4,this.renderData()];case 1:return t.sent(),this.editor.fire("undo"),[2]}}))}))},t.prototype.getData=function(){this.makeNowDataMap();var t=this.data,e=t.nodesMap,n=t.linesMap;return{nodes:Object.keys(e).map((function(t){return e[t]})),lines:Object.keys(n).map((function(t){return n[t]}))}},t}();var yt=n(4087),mt=n(6131),xt=function(t,e){return(xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function wt(t,e){var n=t[0],r=t[1];return[n*Math.cos(e)-r*Math.sin(e),n*Math.sin(e)+r*Math.cos(e)]}function Et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if("number"!=typeof t[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof t[n]+" == typeof "+t[n]);return!0}var At=Math.PI;function _t(t,e,n){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var r=t.rX,i=t.rY,o=t.x,s=t.y;r=Math.abs(t.rX),i=Math.abs(t.rY);var a=wt([(e-o)/2,(n-s)/2],-t.xRot/180*At),c=a[0],h=a[1],u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(h,2)/Math.pow(i,2);1<u&&(r*=Math.sqrt(u),i*=Math.sqrt(u)),t.rX=r,t.rY=i;var l=Math.pow(r,2)*Math.pow(h,2)+Math.pow(i,2)*Math.pow(c,2),d=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-l)/l)),f=r*h/i*d,p=-i*c/r*d,g=wt([f,p],t.xRot/180*At);t.cX=g[0]+(e+o)/2,t.cY=g[1]+(n+s)/2,t.phi1=Math.atan2((h-p)/i,(c-f)/r),t.phi2=Math.atan2((-h-p)/i,(-c-f)/r),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*At),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*At),t.phi1*=180/At,t.phi2*=180/At}function St(t,e,n){Et(t,e,n);var r=t*t+e*e-n*n;if(0>r)return[];if(0===r)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var i=Math.sqrt(r);return[[(t*n+e*i)/(t*t+e*e),(e*n-t*i)/(t*t+e*e)],[(t*n-e*i)/(t*t+e*e),(e*n+t*i)/(t*t+e*e)]]}var kt,Ct=Math.PI/180;function Pt(t,e,n){return(1-n)*t+n*e}function Tt(t,e,n,r){return t+Math.cos(r/180*At)*e+Math.sin(r/180*At)*n}function Nt(t,e,n,r){var i=1e-6,o=e-t,s=n-e,a=3*o+3*(r-n)-6*s,c=6*(s-o),h=3*o;return Math.abs(a)<i?[-h/c]:function(t,e,n){void 0===n&&(n=1e-6);var r=t*t/4-e;if(r<-n)return[];if(r<=n)return[-t/2];var i=Math.sqrt(r);return[-t/2-i,-t/2+i]}(c/a,h/a,i)}function Mt(t,e,n,r,i){var o=1-i;return t*(o*o*o)+e*(3*o*o*i)+n*(3*o*i*i)+r*(i*i*i)}!function(t){function e(){return i((function(t,e,n){return t.relative&&(void 0!==t.x1&&(t.x1+=e),void 0!==t.y1&&(t.y1+=n),void 0!==t.x2&&(t.x2+=e),void 0!==t.y2&&(t.y2+=n),void 0!==t.x&&(t.x+=e),void 0!==t.y&&(t.y+=n),t.relative=!1),t}))}function n(){var t=NaN,e=NaN,n=NaN,r=NaN;return i((function(i,o,s){return i.type&jt.SMOOTH_CURVE_TO&&(i.type=jt.CURVE_TO,t=isNaN(t)?o:t,e=isNaN(e)?s:e,i.x1=i.relative?o-t:2*o-t,i.y1=i.relative?s-e:2*s-e),i.type&jt.CURVE_TO?(t=i.relative?o+i.x2:i.x2,e=i.relative?s+i.y2:i.y2):(t=NaN,e=NaN),i.type&jt.SMOOTH_QUAD_TO&&(i.type=jt.QUAD_TO,n=isNaN(n)?o:n,r=isNaN(r)?s:r,i.x1=i.relative?o-n:2*o-n,i.y1=i.relative?s-r:2*s-r),i.type&jt.QUAD_TO?(n=i.relative?o+i.x1:i.x1,r=i.relative?s+i.y1:i.y1):(n=NaN,r=NaN),i}))}function r(){var t=NaN,e=NaN;return i((function(n,r,i){if(n.type&jt.SMOOTH_QUAD_TO&&(n.type=jt.QUAD_TO,t=isNaN(t)?r:t,e=isNaN(e)?i:e,n.x1=n.relative?r-t:2*r-t,n.y1=n.relative?i-e:2*i-e),n.type&jt.QUAD_TO){t=n.relative?r+n.x1:n.x1,e=n.relative?i+n.y1:n.y1;var o=n.x1,s=n.y1;n.type=jt.CURVE_TO,n.x1=((n.relative?0:r)+2*o)/3,n.y1=((n.relative?0:i)+2*s)/3,n.x2=(n.x+2*o)/3,n.y2=(n.y+2*s)/3}else t=NaN,e=NaN;return n}))}function i(t){var e=0,n=0,r=NaN,i=NaN;return function(o){if(isNaN(r)&&!(o.type&jt.MOVE_TO))throw new Error("path must start with moveto");var s=t(o,e,n,r,i);return o.type&jt.CLOSE_PATH&&(e=r,n=i),void 0!==o.x&&(e=o.relative?e+o.x:o.x),void 0!==o.y&&(n=o.relative?n+o.y:o.y),o.type&jt.MOVE_TO&&(r=e,i=n),s}}function o(t,e,n,r,o,s){return Et(t,e,n,r,o,s),i((function(i,a,c,h){var u=i.x1,l=i.x2,d=i.relative&&!isNaN(h),f=void 0!==i.x?i.x:d?0:a,p=void 0!==i.y?i.y:d?0:c;function g(t){return t*t}i.type&jt.HORIZ_LINE_TO&&0!==e&&(i.type=jt.LINE_TO,i.y=i.relative?0:c),i.type&jt.VERT_LINE_TO&&0!==n&&(i.type=jt.LINE_TO,i.x=i.relative?0:a),void 0!==i.x&&(i.x=i.x*t+p*n+(d?0:o)),void 0!==i.y&&(i.y=f*e+i.y*r+(d?0:s)),void 0!==i.x1&&(i.x1=i.x1*t+i.y1*n+(d?0:o)),void 0!==i.y1&&(i.y1=u*e+i.y1*r+(d?0:s)),void 0!==i.x2&&(i.x2=i.x2*t+i.y2*n+(d?0:o)),void 0!==i.y2&&(i.y2=l*e+i.y2*r+(d?0:s));var v=t*r-e*n;if(void 0!==i.xRot&&(1!==t||0!==e||0!==n||1!==r))if(0===v)delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag,i.type=jt.LINE_TO;else{var y=i.xRot*Math.PI/180,m=Math.sin(y),x=Math.cos(y),b=1/g(i.rX),w=1/g(i.rY),E=g(x)*b+g(m)*w,A=2*m*x*(b-w),_=g(m)*b+g(x)*w,S=E*r*r-A*e*r+_*e*e,k=A*(t*r+e*n)-2*(E*n*r+_*t*e),C=E*n*n-A*t*n+_*t*t,P=(Math.atan2(k,S-C)+Math.PI)%Math.PI/2,T=Math.sin(P),N=Math.cos(P);i.rX=Math.abs(v)/Math.sqrt(S*g(N)+k*T*N+C*g(T)),i.rY=Math.abs(v)/Math.sqrt(S*g(T)-k*T*N+C*g(N)),i.xRot=180*P/Math.PI}return void 0!==i.sweepFlag&&0>v&&(i.sweepFlag=+!i.sweepFlag),i}))}t.ROUND=function(t){function e(e){return Math.round(e*t)/t}return void 0===t&&(t=1e13),Et(t),function(t){return void 0!==t.x1&&(t.x1=e(t.x1)),void 0!==t.y1&&(t.y1=e(t.y1)),void 0!==t.x2&&(t.x2=e(t.x2)),void 0!==t.y2&&(t.y2=e(t.y2)),void 0!==t.x&&(t.x=e(t.x)),void 0!==t.y&&(t.y=e(t.y)),void 0!==t.rX&&(t.rX=e(t.rX)),void 0!==t.rY&&(t.rY=e(t.rY)),t}},t.TO_ABS=e,t.TO_REL=function(){return i((function(t,e,n){return t.relative||(void 0!==t.x1&&(t.x1-=e),void 0!==t.y1&&(t.y1-=n),void 0!==t.x2&&(t.x2-=e),void 0!==t.y2&&(t.y2-=n),void 0!==t.x&&(t.x-=e),void 0!==t.y&&(t.y-=n),t.relative=!0),t}))},t.NORMALIZE_HVZ=function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),i((function(r,i,o,s,a){if(isNaN(s)&&!(r.type&jt.MOVE_TO))throw new Error("path must start with moveto");return e&&r.type&jt.HORIZ_LINE_TO&&(r.type=jt.LINE_TO,r.y=r.relative?0:o),n&&r.type&jt.VERT_LINE_TO&&(r.type=jt.LINE_TO,r.x=r.relative?0:i),t&&r.type&jt.CLOSE_PATH&&(r.type=jt.LINE_TO,r.x=r.relative?s-i:s,r.y=r.relative?a-o:a),r.type&jt.ARC&&(0===r.rX||0===r.rY)&&(r.type=jt.LINE_TO,delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag),r}))},t.NORMALIZE_ST=n,t.QT_TO_C=r,t.INFO=i,t.SANITIZE=function(t){void 0===t&&(t=0),Et(t);var e=NaN,n=NaN,r=NaN,o=NaN;return i((function(i,s,a,c,h){var u=Math.abs,l=!1,d=0,f=0;if(i.type&jt.SMOOTH_CURVE_TO&&(d=isNaN(e)?0:s-e,f=isNaN(n)?0:a-n),i.type&(jt.CURVE_TO|jt.SMOOTH_CURVE_TO)?(e=i.relative?s+i.x2:i.x2,n=i.relative?a+i.y2:i.y2):(e=NaN,n=NaN),i.type&jt.SMOOTH_QUAD_TO?(r=isNaN(r)?s:2*s-r,o=isNaN(o)?a:2*a-o):i.type&jt.QUAD_TO?(r=i.relative?s+i.x1:i.x1,o=i.relative?a+i.y1:i.y2):(r=NaN,o=NaN),i.type&jt.LINE_COMMANDS||i.type&jt.ARC&&(0===i.rX||0===i.rY||!i.lArcFlag)||i.type&jt.CURVE_TO||i.type&jt.SMOOTH_CURVE_TO||i.type&jt.QUAD_TO||i.type&jt.SMOOTH_QUAD_TO){var p=void 0===i.x?0:i.relative?i.x:i.x-s,g=void 0===i.y?0:i.relative?i.y:i.y-a;d=isNaN(r)?void 0===i.x1?d:i.relative?i.x:i.x1-s:r-s,f=isNaN(o)?void 0===i.y1?f:i.relative?i.y:i.y1-a:o-a;var v=void 0===i.x2?0:i.relative?i.x:i.x2-s,y=void 0===i.y2?0:i.relative?i.y:i.y2-a;u(p)<=t&&u(g)<=t&&u(d)<=t&&u(f)<=t&&u(v)<=t&&u(y)<=t&&(l=!0)}return i.type&jt.CLOSE_PATH&&u(s-c)<=t&&u(a-h)<=t&&(l=!0),l?[]:i}))},t.MATRIX=o,t.ROTATE=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),Et(t,e,n);var r=Math.sin(t),i=Math.cos(t);return o(i,r,-r,i,e-e*i+n*r,n-e*r-n*i)},t.TRANSLATE=function(t,e){return void 0===e&&(e=0),Et(t,e),o(1,0,0,1,t,e)},t.SCALE=function(t,e){return void 0===e&&(e=t),Et(t,e),o(t,0,0,e,0,0)},t.SKEW_X=function(t){return Et(t),o(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return Et(t),o(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),Et(t),o(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),Et(t),o(1,0,0,-1,0,t)},t.A_TO_C=function(){return i((function(t,e,n){return jt.ARC===t.type?function(t,e,n){var r,i,o,s;t.cX||_t(t,e,n);for(var a=Math.min(t.phi1,t.phi2),c=Math.max(t.phi1,t.phi2)-a,h=Math.ceil(c/90),u=new Array(h),l=e,d=n,f=0;f<h;f++){var p=Pt(t.phi1,t.phi2,f/h),g=Pt(t.phi1,t.phi2,(f+1)/h),v=g-p,y=4/3*Math.tan(v*Ct/4),m=[Math.cos(p*Ct)-y*Math.sin(p*Ct),Math.sin(p*Ct)+y*Math.cos(p*Ct)],x=m[0],b=m[1],w=[Math.cos(g*Ct),Math.sin(g*Ct)],E=w[0],A=w[1],_=[E+y*Math.sin(g*Ct),A-y*Math.cos(g*Ct)],S=_[0],k=_[1];u[f]={relative:t.relative,type:jt.CURVE_TO};var C=function(e,n){var r=wt([e*t.rX,n*t.rY],t.xRot),i=r[0],o=r[1];return[t.cX+i,t.cY+o]};r=C(x,b),u[f].x1=r[0],u[f].y1=r[1],i=C(S,k),u[f].x2=i[0],u[f].y2=i[1],o=C(E,A),u[f].x=o[0],u[f].y=o[1],t.relative&&(u[f].x1-=l,u[f].y1-=d,u[f].x2-=l,u[f].y2-=d,u[f].x-=l,u[f].y-=d),l=(s=[u[f].x,u[f].y])[0],d=s[1]}return u}(t,t.relative?0:e,t.relative?0:n):t}))},t.ANNOTATE_ARCS=function(){return i((function(t,e,n){return t.relative&&(e=0,n=0),jt.ARC===t.type&&_t(t,e,n),t}))},t.CLONE=function(){return function(t){var e={};for(var n in t)e[n]=t[n];return e}},t.CALCULATE_BOUNDS=function(){var t=e(),o=r(),s=n(),a=i((function(e,n,r){var i=s(o(t(function(t){var e={};for(var n in t)e[n]=t[n];return e}(e))));function c(t){t>a.maxX&&(a.maxX=t),t<a.minX&&(a.minX=t)}function h(t){t>a.maxY&&(a.maxY=t),t<a.minY&&(a.minY=t)}if(i.type&jt.DRAWING_COMMANDS&&(c(n),h(r)),i.type&jt.HORIZ_LINE_TO&&c(i.x),i.type&jt.VERT_LINE_TO&&h(i.y),i.type&jt.LINE_TO&&(c(i.x),h(i.y)),i.type&jt.CURVE_TO){c(i.x),h(i.y);for(var u=0,l=Nt(n,i.x1,i.x2,i.x);u<l.length;u++)0<(C=l[u])&&1>C&&c(Mt(n,i.x1,i.x2,i.x,C));for(var d=0,f=Nt(r,i.y1,i.y2,i.y);d<f.length;d++)0<(C=f[d])&&1>C&&h(Mt(r,i.y1,i.y2,i.y,C))}if(i.type&jt.ARC){c(i.x),h(i.y),_t(i,n,r);for(var p=i.xRot/180*Math.PI,g=Math.cos(p)*i.rX,v=Math.sin(p)*i.rX,y=-Math.sin(p)*i.rY,m=Math.cos(p)*i.rY,x=i.phi1<i.phi2?[i.phi1,i.phi2]:-180>i.phi2?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],b=x[0],w=x[1],E=function(t){var e=t[0],n=t[1],r=180*Math.atan2(n,e)/Math.PI;return r<b?r+360:r},A=0,_=St(y,-g,0).map(E);A<_.length;A++)(C=_[A])>b&&C<w&&c(Tt(i.cX,g,y,C));for(var S=0,k=St(m,-v,0).map(E);S<k.length;S++){var C;(C=k[S])>b&&C<w&&h(Tt(i.cY,v,m,C))}}return e}));return a.minX=1/0,a.maxX=-1/0,a.minY=1/0,a.maxY=-1/0,a}}(kt||(kt={}));var Ot,Lt=function(){function t(){}return t.prototype.round=function(t){return this.transform(kt.ROUND(t))},t.prototype.toAbs=function(){return this.transform(kt.TO_ABS())},t.prototype.toRel=function(){return this.transform(kt.TO_REL())},t.prototype.normalizeHVZ=function(t,e,n){return this.transform(kt.NORMALIZE_HVZ(t,e,n))},t.prototype.normalizeST=function(){return this.transform(kt.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(kt.QT_TO_C())},t.prototype.aToC=function(){return this.transform(kt.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(kt.SANITIZE(t))},t.prototype.translate=function(t,e){return this.transform(kt.TRANSLATE(t,e))},t.prototype.scale=function(t,e){return this.transform(kt.SCALE(t,e))},t.prototype.rotate=function(t,e,n){return this.transform(kt.ROTATE(t,e,n))},t.prototype.matrix=function(t,e,n,r,i,o){return this.transform(kt.MATRIX(t,e,n,r,i,o))},t.prototype.skewX=function(t){return this.transform(kt.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(kt.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(kt.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(kt.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(kt.ANNOTATE_ARCS())},t}(),It=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},Vt=function(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)},Rt=function(t){function e(){var e=t.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return bt(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(" ",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,e){var n=this;void 0===e&&(e=[]);for(var r=function(t){e.push(t),n.curArgs.length=0,n.canParseCommandOrComma=!0},i=0;i<t.length;i++){var o=t[i],s=!(this.curCommandType!==jt.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),a=Vt(o)&&("0"===this.curNumber&&"0"===o||s);if(!Vt(o)||a)if("e"!==o&&"E"!==o)if("-"!==o&&"+"!==o||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==o||this.curNumberHasExp||this.curNumberHasDecimal||s){if(this.curNumber&&-1!==this.curCommandType){var c=Number(this.curNumber);if(isNaN(c))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===jt.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>c)throw new SyntaxError('Expected positive number, got "'+c+'" at index "'+i+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"');this.curArgs.push(c),this.curArgs.length===Dt[this.curCommandType]&&(jt.HORIZ_LINE_TO===this.curCommandType?r({type:jt.HORIZ_LINE_TO,relative:this.curCommandRelative,x:c}):jt.VERT_LINE_TO===this.curCommandType?r({type:jt.VERT_LINE_TO,relative:this.curCommandRelative,y:c}):this.curCommandType===jt.MOVE_TO||this.curCommandType===jt.LINE_TO||this.curCommandType===jt.SMOOTH_QUAD_TO?(r({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),jt.MOVE_TO===this.curCommandType&&(this.curCommandType=jt.LINE_TO)):this.curCommandType===jt.CURVE_TO?r({type:jt.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===jt.SMOOTH_CURVE_TO?r({type:jt.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===jt.QUAD_TO?r({type:jt.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===jt.ARC&&r({type:jt.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!It(o))if(","===o&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==o&&"-"!==o&&"."!==o)if(a)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==o&&"Z"!==o)if("h"===o||"H"===o)this.curCommandType=jt.HORIZ_LINE_TO,this.curCommandRelative="h"===o;else if("v"===o||"V"===o)this.curCommandType=jt.VERT_LINE_TO,this.curCommandRelative="v"===o;else if("m"===o||"M"===o)this.curCommandType=jt.MOVE_TO,this.curCommandRelative="m"===o;else if("l"===o||"L"===o)this.curCommandType=jt.LINE_TO,this.curCommandRelative="l"===o;else if("c"===o||"C"===o)this.curCommandType=jt.CURVE_TO,this.curCommandRelative="c"===o;else if("s"===o||"S"===o)this.curCommandType=jt.SMOOTH_CURVE_TO,this.curCommandRelative="s"===o;else if("q"===o||"Q"===o)this.curCommandType=jt.QUAD_TO,this.curCommandRelative="q"===o;else if("t"===o||"T"===o)this.curCommandType=jt.SMOOTH_QUAD_TO,this.curCommandRelative="t"===o;else{if("a"!==o&&"A"!==o)throw new SyntaxError('Unexpected character "'+o+'" at index '+i+".");this.curCommandType=jt.ARC,this.curCommandRelative="a"===o}else e.push({type:jt.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal="."===o}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return e},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(e,n){void 0===n&&(n=[]);for(var r=0,i=Object.getPrototypeOf(this).parse.call(this,e);r<i.length;r++){var o=i[r],s=t(o);Array.isArray(s)?n.push.apply(n,s):n.push(s)}return n}}})},e}(Lt),jt=function(t){function e(n){var r=t.call(this)||this;return r.commands="string"==typeof n?e.parse(n):n,r}return bt(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=kt.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var e=[],n=0,r=this.commands;n<r.length;n++){var i=t(r[n]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return this.commands=e,this},e.encode=function(t){return function(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.type===jt.CLOSE_PATH)e+="z";else if(r.type===jt.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===jt.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===jt.MOVE_TO)e+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===jt.LINE_TO)e+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===jt.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===jt.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===jt.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===jt.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==jt.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");e+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return e}(t)},e.parse=function(t){var e=new Rt,n=[];return e.parse(t,n),e.finish(n),n},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(Lt),Dt=((Ot={})[jt.MOVE_TO]=2,Ot[jt.LINE_TO]=2,Ot[jt.HORIZ_LINE_TO]=1,Ot[jt.VERT_LINE_TO]=1,Ot[jt.CLOSE_PATH]=0,Ot[jt.QUAD_TO]=4,Ot[jt.SMOOTH_QUAD_TO]=2,Ot[jt.CURVE_TO]=6,Ot[jt.SMOOTH_CURVE_TO]=4,Ot[jt.ARC]=7,Ot);function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}var zt=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Ut=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Ft(t,e,n,r,i,o){if(!(isNaN(o)||o<1)){o|=0;var s=function(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==Bt(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var o=t.getContext("2d");try{return o.getImageData(e,n,r,i)}catch(t){throw new Error("unable to access image data: "+t)}}(t,e,n,r,i);s=function(t,e,n,r,i,o){for(var s,a=t.data,c=2*o+1,h=r-1,u=i-1,l=o+1,d=l*(l+1)/2,f=new Xt,p=f,g=1;g<c;g++)p=p.next=new Xt,g===l&&(s=p);p.next=f;for(var v=null,y=null,m=0,x=0,b=zt[o],w=Ut[o],E=0;E<i;E++){p=f;for(var A=a[x],_=a[x+1],S=a[x+2],k=a[x+3],C=0;C<l;C++)p.r=A,p.g=_,p.b=S,p.a=k,p=p.next;for(var P=0,T=0,N=0,M=0,O=l*A,L=l*_,I=l*S,V=l*k,R=d*A,j=d*_,D=d*S,B=d*k,z=1;z<l;z++){var U=x+((h<z?h:z)<<2),F=a[U],X=a[U+1],Y=a[U+2],H=a[U+3],G=l-z;R+=(p.r=F)*G,j+=(p.g=X)*G,D+=(p.b=Y)*G,B+=(p.a=H)*G,P+=F,T+=X,N+=Y,M+=H,p=p.next}v=f,y=s;for(var q=0;q<r;q++){var W=B*b>>w;if(a[x+3]=W,0!==W){var Z=255/W;a[x]=(R*b>>w)*Z,a[x+1]=(j*b>>w)*Z,a[x+2]=(D*b>>w)*Z}else a[x]=a[x+1]=a[x+2]=0;R-=O,j-=L,D-=I,B-=V,O-=v.r,L-=v.g,I-=v.b,V-=v.a;var Q=q+o+1;Q=m+(Q<h?Q:h)<<2,R+=P+=v.r=a[Q],j+=T+=v.g=a[Q+1],D+=N+=v.b=a[Q+2],B+=M+=v.a=a[Q+3],v=v.next;var $=y,K=$.r,J=$.g,tt=$.b,et=$.a;O+=K,L+=J,I+=tt,V+=et,P-=K,T-=J,N-=tt,M-=et,y=y.next,x+=4}m+=r}for(var nt=0;nt<r;nt++){var rt=a[x=nt<<2],it=a[x+1],ot=a[x+2],st=a[x+3],at=l*rt,ct=l*it,ht=l*ot,ut=l*st,lt=d*rt,dt=d*it,ft=d*ot,pt=d*st;p=f;for(var gt=0;gt<l;gt++)p.r=rt,p.g=it,p.b=ot,p.a=st,p=p.next;for(var vt=r,yt=0,mt=0,xt=0,bt=0,wt=1;wt<=o;wt++){x=vt+nt<<2;var Et=l-wt;lt+=(p.r=rt=a[x])*Et,dt+=(p.g=it=a[x+1])*Et,ft+=(p.b=ot=a[x+2])*Et,pt+=(p.a=st=a[x+3])*Et,bt+=rt,yt+=it,mt+=ot,xt+=st,p=p.next,wt<u&&(vt+=r)}x=nt,v=f,y=s;for(var At=0;At<i;At++){var _t=x<<2;a[_t+3]=st=pt*b>>w,st>0?(st=255/st,a[_t]=(lt*b>>w)*st,a[_t+1]=(dt*b>>w)*st,a[_t+2]=(ft*b>>w)*st):a[_t]=a[_t+1]=a[_t+2]=0,lt-=at,dt-=ct,ft-=ht,pt-=ut,at-=v.r,ct-=v.g,ht-=v.b,ut-=v.a,_t=nt+((_t=At+l)<u?_t:u)*r<<2,lt+=bt+=v.r=a[_t],dt+=yt+=v.g=a[_t+1],ft+=mt+=v.b=a[_t+2],pt+=xt+=v.a=a[_t+3],v=v.next,at+=rt=y.r,ct+=it=y.g,ht+=ot=y.b,ut+=st=y.a,bt-=rt,yt-=it,mt-=ot,xt-=st,y=y.next,x+=r}}return t}(s,0,0,r,i,o),t.getContext("2d").putImageData(s,e,n)}}var Xt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Yt(t){return t.replace(/(?!\u3000)\s+/gm," ")}function Ht(t){const e=t.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return e?e.map(parseFloat):[]}const Gt=/^[A-Z-]+$/;function qt(t){const e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t);return e&&(e[2]||e[3]||e[4])||""}const Wt=/(\[[^\]]+\])/g,Zt=/(#[^\s+>~.[:]+)/g,Qt=/(\.[^\s+>~.[:]+)/g,$t=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Kt=/(:[\w-]+\([^)]*\))/gi,Jt=/(:[^\s+>~.[:]+)/g,te=/([^\s+>~.[:]+)/g;function ee(t,e){const n=e.exec(t);return n?[t.replace(e," "),n.length]:[t,0]}const ne=1e-8;function re(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function ie(t,e){return(t[0]*e[0]+t[1]*e[1])/(re(t)*re(e))}function oe(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(ie(t,e))}function se(t){return t*t*t}function ae(t){return 3*t*t*(1-t)}function ce(t){return 3*t*(1-t)*(1-t)}function he(t){return(1-t)*(1-t)*(1-t)}function ue(t){return t*t}function le(t){return 2*t*(1-t)}function de(t){return(1-t)*(1-t)}class fe{static empty(t){return new fe(t,"EMPTY","")}split(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";const{document:e,name:n}=this;return Yt(this.getString()).trim().split(t).map((t=>new fe(e,n,t)))}hasValue(t){const e=this.value;return null!==e&&""!==e&&(t||0!==e)&&void 0!==e}isString(t){const{value:e}=this,n="string"==typeof e;return n&&t?t.test(e):n}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return void 0===t||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);const{value:e}=this;let n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}getString(t){return void 0===t||this.hasValue()?void 0===this.value?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=function(t){if(!t.startsWith("rgb"))return t;let e=3;return t.replace(/\d+(\.\d+)?/g,((t,n)=>e--&&n?String(Math.round(parseFloat(t))):t))}(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;const[n,r]="boolean"==typeof t?[void 0,t]:[t],{viewPort:i}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&r:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(n);default:{const t=this.getNumber();return e&&t<1?t*i.computeSize(n):t}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const t=this.getString(),e=/#([^)'"]+)/.exec(t),n=(null==e?void 0:e[1])||t;return this.document.definitions[n]}getFillStyleDefinition(t,e){let n=this.getDefinition();if(!n)return null;if("function"==typeof n.createGradient&&"getBoundingBox"in t)return n.createGradient(this.document.ctx,t,e);if("function"==typeof n.createPattern){if(n.getHrefAttribute().hasValue()){const t=n.getAttribute("patternTransform");n=n.getHrefAttribute().getDefinition(),n&&t.hasValue()&&n.getAttribute("patternTransform",!0).setValue(t.value)}if(n)return n.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;const t=this.getString();return fe.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor();const n=e.length;let r=0;for(let t=0;t<n&&(","===e[t]&&r++,3!==r);t++);if(t.hasValue()&&this.isString()&&3!==r){const n=new mt(e);n.ok&&(n.alpha=t.getNumber(),e=n.toRGBA())}return new fe(this.document,this.name,e)}constructor(t,e,n){this.document=t,this.name=e,this.value=n,this.isNormalizedColor=!1}}fe.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class pe{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[t]=this.viewPorts;return t||ge()}getCurrent(){const{viewPorts:t}=this;return t[t.length-1]||ge()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}function ge(){return{width:pe.DEFAULT_VIEWPORT_WIDTH,height:pe.DEFAULT_VIEWPORT_HEIGHT}}pe.DEFAULT_VIEWPORT_WIDTH=800,pe.DEFAULT_VIEWPORT_HEIGHT=600;class ve{static parse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n=e,r=e]=Ht(t);return new ve(n,r)}static parseScale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const[n=e,r=n]=Ht(t);return new ve(n,r)}static parsePath(t){const e=Ht(t),n=e.length,r=[];for(let t=0;t<n;t+=2)r.push(new ve(e[t],e[t+1]));return r}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){const{x:e,y:n}=this,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}constructor(t,e){this.x=t,this.y=e}}class ye{isWorking(){return this.working}start(){if(this.working)return;const{screen:t,onClick:e,onMouseMove:n}=this,r=t.ctx.canvas;r.onclick=e,r.onmousemove=n,this.working=!0}stop(){if(!this.working)return;const t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:t,events:e,eventElements:n}=this,{style:r}=t.ctx.canvas;let i;r&&(r.cursor=""),e.forEach(((t,e)=>{let{run:r}=t;for(i=n[e];i;)r(i),i=i.parent})),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;const{events:n,eventElements:r}=this;n.forEach(((n,i)=>{let{x:o,y:s}=n;!r[i]&&e.isPointInPath&&e.isPointInPath(o,s)&&(r[i]=t)}))}checkBoundingBox(t,e){if(!this.working||!e)return;const{events:n,eventElements:r}=this;n.forEach(((n,i)=>{let{x:o,y:s}=n;!r[i]&&e.isPointInBox(o,s)&&(r[i]=t)}))}mapXY(t,e){const{window:n,ctx:r}=this.screen,i=new ve(t,e);let o=r.canvas;for(;o;)i.x-=o.offsetLeft,i.y-=o.offsetTop,o=o.offsetParent;return(null==n?void 0:n.scrollX)&&(i.x+=n.scrollX),(null==n?void 0:n.scrollY)&&(i.y+=n.scrollY),i}onClick(t){const{x:e,y:n}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:n,run(t){t.onClick&&t.onClick()}})}onMouseMove(t){const{x:e,y:n}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:n,run(t){t.onMouseMove&&t.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const me="undefined"!=typeof window?window:null,xe="undefined"!=typeof fetch?fetch.bind(void 0):void 0;class be{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const t=this.waits.every((t=>t()));return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:n,aspectRatio:r,width:i,desiredWidth:o,height:s,desiredHeight:a,minX:c=0,minY:h=0,refX:u,refY:l,clip:d=!1,clipX:f=0,clipY:p=0}=t;const g=Yt(r).replace(/^defer\s/,""),[v,y]=g.split(" "),m=v||"xMidYMid",x=y||"meet",b=i/o,w=s/a,E=Math.min(b,w),A=Math.max(b,w);let _=o,S=a;"meet"===x&&(_*=E,S*=E),"slice"===x&&(_*=A,S*=A);const k=new fe(e,"refX",u),C=new fe(e,"refY",l),P=k.hasValue()&&C.hasValue();if(P&&n.translate(-E*k.getPixels("x"),-E*C.getPixels("y")),d){const t=E*f,e=E*p;n.beginPath(),n.moveTo(t,e),n.lineTo(i,e),n.lineTo(i,s),n.lineTo(t,s),n.closePath(),n.clip()}if(!P){const t="meet"===x&&E===w,e="slice"===x&&A===w,r="meet"===x&&E===b,o="slice"===x&&A===b;m.startsWith("xMid")&&(t||e)&&n.translate(i/2-_/2,0),m.endsWith("YMid")&&(r||o)&&n.translate(0,s/2-S/2),m.startsWith("xMax")&&(t||e)&&n.translate(i-_,0),m.endsWith("YMax")&&(r||o)&&n.translate(0,s-S)}switch(!0){case"none"===m:n.scale(b,w);break;case"meet"===x:n.scale(E,E);break;case"slice"===x:n.scale(A,A)}n.translate(-c,-h)}start(t){let{enableRedraw:e=!1,ignoreMouse:n=!1,ignoreAnimation:r=!1,ignoreDimensions:i=!1,ignoreClear:o=!1,forceRedraw:s,scaleWidth:a,scaleHeight:c,offsetX:h,offsetY:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{mouse:l}=this,d=1e3/be.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=d,this.readyPromise=new Promise((t=>{this.resolveReady=t})),this.isReady()&&this.render(t,i,o,a,c,h,u),!e)return;let f=Date.now(),p=f,g=0;const v=()=>{f=Date.now(),g=f-p,g>=d&&(p=f-g%d,this.shouldUpdate(r,s)&&(this.render(t,i,o,a,c,h,u),l.runEvents())),this.intervalId=yt(v)};n||l.start(),this.intervalId=yt(v)}stop(){this.intervalId&&(yt.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){const{frameDuration:t}=this;if(this.animations.reduce(((e,n)=>n.update(t)||e),!1))return!0}return!("function"!=typeof e||!e())||!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents()}render(t,e,n,r,i,o,s){const{viewPort:a,ctx:c,isFirstRender:h}=this,u=c.canvas;a.clear(),u.width&&u.height&&a.setCurrent(u.width,u.height);const l=t.getStyle("width"),d=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(l.hasValue()&&(u.width=l.getPixels("x"),u.style&&(u.style.width="".concat(u.width,"px"))),d.hasValue()&&(u.height=d.getPixels("y"),u.style&&(u.style.height="".concat(u.height,"px"))));let f=u.clientWidth||u.width,p=u.clientHeight||u.height;if(e&&l.hasValue()&&d.hasValue()&&(f=l.getPixels("x"),p=d.getPixels("y")),a.setCurrent(f,p),"number"==typeof o&&t.getAttribute("x",!0).setValue(o),"number"==typeof s&&t.getAttribute("y",!0).setValue(s),"number"==typeof r||"number"==typeof i){const e=Ht(t.getAttribute("viewBox").getString());let n=0,o=0;if("number"==typeof r){const i=t.getStyle("width");i.hasValue()?n=i.getPixels("x")/r:e[2]&&!isNaN(e[2])&&(n=e[2]/r)}if("number"==typeof i){const n=t.getStyle("height");n.hasValue()?o=n.getPixels("y")/i:e[3]&&!isNaN(e[3])&&(o=e[3]/i)}n||(n=o),o||(o=n),t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i);const s=t.getStyle("transform",!0,!0);s.setValue("".concat(s.getString()," scale(").concat(1/n,", ").concat(1/o,")"))}n||c.clearRect(0,0,f,p),t.render(c),h&&(this.isFirstRender=!1)}constructor(t,{fetch:e=xe,window:n=me}={}){if(this.ctx=t,this.viewPort=new pe,this.mouse=new ye(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=n,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}}be.defaultWindow=me,be.defaultFetch=xe,be.FRAMERATE=30,be.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch:we}=be,Ee="undefined"!=typeof DOMParser?DOMParser:void 0;class Ae{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){const e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(n){return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){const e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){const e=await this.fetch(t),n=await e.text();return this.parseFromString(n)}constructor({fetch:t=we,DOMParser:e=Ee}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}}class _e{apply(t){const{originX:e,originY:n,matrix:r}=this,i=e.getPixels("x"),o=n.getPixels("y");t.translate(i,o),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.translate(-i,-o)}unapply(t){const{originX:e,originY:n,matrix:r}=this,i=r[0],o=r[2],s=r[4],a=r[1],c=r[3],h=r[5],u=1/(i*(1*c-0*h)-o*(1*a-0*h)+s*(0*a-0*c)),l=e.getPixels("x"),d=n.getPixels("y");t.translate(l,d),t.transform(u*(1*c-0*h),u*(0*h-1*a),u*(0*s-1*o),u*(1*i-0*s),u*(o*h-s*c),u*(s*a-i*h)),t.translate(-l,-d)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,n){this.type="matrix",this.matrix=function(t){const e=Ht(t);return[e[0]||0,e[1]||0,e[2]||0,e[3]||0,e[4]||0,e[5]||0]}(e),this.originX=n[0],this.originY=n[1]}}class Se extends _e{constructor(t,e,n){super(t,e,n),this.type="skew",this.angle=new fe(t,"angle",e)}}class ke{static fromElement(t,e){const n=e.getStyle("transform",!1,!0);if(n.hasValue()){const[r,i=r]=e.getStyle("transform-origin",!1,!0).split();if(r&&i){const e=[r,i];return new ke(t,n.getString(),e)}}return null}apply(t){this.transforms.forEach((e=>e.apply(t)))}unapply(t){this.transforms.forEach((e=>e.unapply(t)))}applyToPoint(t){this.transforms.forEach((e=>e.applyToPoint(t)))}constructor(t,e,n){this.document=t,this.transforms=[],Yt(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/).forEach((t=>{if("none"===t)return;const[e,r]=function(t){const[e="",n=""]=t.split("(");return[e.trim(),n.trim().replace(")","")]}(t),i=ke.transformTypes[e];i&&this.transforms.push(new i(this.document,r,n))}))}}ke.transformTypes={translate:class{apply(t){const{x:e,y:n}=this.point;t.translate(e||0,n||0)}unapply(t){const{x:e,y:n}=this.point;t.translate(-1*e||0,-1*n||0)}applyToPoint(t){const{x:e,y:n}=this.point;t.applyTransform([1,0,0,1,e||0,n||0])}constructor(t,e){this.type="translate",this.point=ve.parse(e)}},rotate:class{apply(t){const{cx:e,cy:n,originX:r,originY:i,angle:o}=this,s=e+r.getPixels("x"),a=n+i.getPixels("y");t.translate(s,a),t.rotate(o.getRadians()),t.translate(-s,-a)}unapply(t){const{cx:e,cy:n,originX:r,originY:i,angle:o}=this,s=e+r.getPixels("x"),a=n+i.getPixels("y");t.translate(s,a),t.rotate(-1*o.getRadians()),t.translate(-s,-a)}applyToPoint(t){const{cx:e,cy:n,angle:r}=this,i=r.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}constructor(t,e,n){this.type="rotate";const r=Ht(e);this.angle=new fe(t,"angle",r[0]),this.originX=n[0],this.originY=n[1],this.cx=r[1]||0,this.cy=r[2]||0}},scale:class{apply(t){const{scale:{x:e,y:n},originX:r,originY:i}=this,o=r.getPixels("x"),s=i.getPixels("y");t.translate(o,s),t.scale(e,n||e),t.translate(-o,-s)}unapply(t){const{scale:{x:e,y:n},originX:r,originY:i}=this,o=r.getPixels("x"),s=i.getPixels("y");t.translate(o,s),t.scale(1/e,1/n||e),t.translate(-o,-s)}applyToPoint(t){const{x:e,y:n}=this.scale;t.applyTransform([e||0,0,0,n||0,0,0])}constructor(t,e,n){this.type="scale";const r=ve.parseScale(e);0!==r.x&&0!==r.y||(r.x=ne,r.y=ne),this.scale=r,this.originX=n[0],this.originY=n[1]}},matrix:_e,skewX:class extends Se{constructor(t,e,n){super(t,e,n),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},skewY:class extends Se{constructor(t,e,n){super(t,e,n),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}};class Ce{getAttribute(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.attributes[t];if(!n&&e){const e=new fe(this.document,t,"");return this.attributes[t]=e,e}return n||fe.empty(this.document)}getHrefAttribute(){let t;for(const e in this.attributes)if("href"===e||e.endsWith(":href")){t=this.attributes[e];break}return t||fe.empty(this.document)}getStyle(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.styles[t];if(r)return r;const i=this.getAttribute(t);if(i.hasValue())return this.styles[t]=i,i;if(!n){const{parent:e}=this;if(e){const n=e.getStyle(t);if(n.hasValue())return n}}if(e){const e=new fe(this.document,t,"");return this.styles[t]=e,e}return fe.empty(this.document)}render(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){const e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){const e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){const e=ke.fromElement(this.document,this);e&&e.apply(t);const n=this.getStyle("clip-path",!1,!0);if(n.hasValue()){const e=n.getDefinition();e&&e.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach((e=>{e.render(t)}))}addChild(t){const e=t instanceof Ce?t:this.document.createElement(t);e.parent=this,Ce.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;const{node:n}=this;if("function"==typeof n.matches)return n.matches(t);const r=null===(e=n.getAttribute)||void 0===e?void 0:e.call(n,"class");return!(!r||""===r)&&r.split(" ").some((e=>".".concat(e)===t))}addStylesFromStyleDefinition(){const{styles:t,stylesSpecificity:e}=this.document;let n;for(const r in t)if(!r.startsWith("@")&&this.matchesSelector(r)){const i=t[r],o=e[r];if(i)for(const t in i){let e=this.stylesSpecificity[t];void 0===e&&(e="000"),o&&o>=e&&(n=i[t],n&&(this.styles[t]=n),this.stylesSpecificity[t]=o)}}}removeStyles(t,e){return e.reduce(((e,n)=>{const r=t.getStyle(n);if(!r.hasValue())return e;const i=r.getString();return r.setValue(""),[...e,[n,i]]}),[])}restoreStyles(t,e){e.forEach((e=>{let[n,r]=e;t.getStyle(n,!0).setValue(r)}))}isFirstChild(){var t;return 0===(null===(t=this.parent)||void 0===t?void 0:t.children.indexOf(this))}constructor(t,e,n=!1){if(this.document=t,this.node=e,this.captureTextNodes=n,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||1!==e.nodeType)return;if(Array.from(e.attributes).forEach((e=>{const n=(r=e.nodeName,Gt.test(r)?r.toLowerCase():r);var r;this.attributes[n]=new fe(t,n,e.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){const e=this.getAttribute("style").getString().split(";").map((t=>t.trim()));e.forEach((e=>{if(!e)return;const[n,r]=e.split(":").map((t=>t.trim()));n&&(this.styles[n]=new fe(t,n,r))}))}const{definitions:r}=t,i=this.getAttribute("id");i.hasValue()&&(r[i.getString()]||(r[i.getString()]=this)),Array.from(e.childNodes).forEach((e=>{if(1===e.nodeType)this.addChild(e);else if(n&&(3===e.nodeType||4===e.nodeType)){const n=t.createTextNode(e);n.getText().length>0&&this.addChild(n)}}))}}Ce.ignoreChildTypes=["title"];class Pe extends Ce{constructor(t,e,n){super(t,e,n)}}function Te(t){const e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function Ne(t){if(!t)return"";const e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function Me(t){if(!t)return"";const e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class Oe{static parse(){let t=arguments.length>1?arguments[1]:void 0,e="",n="",r="",i="",o="";const s=Yt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return s.forEach((t=>{switch(!0){case!a.fontStyle&&Oe.styles.includes(t):"inherit"!==t&&(e=t),a.fontStyle=!0;break;case!a.fontVariant&&Oe.variants.includes(t):"inherit"!==t&&(n=t),a.fontStyle=!0,a.fontVariant=!0;break;case!a.fontWeight&&Oe.weights.includes(t):"inherit"!==t&&(r=t),a.fontStyle=!0,a.fontVariant=!0,a.fontWeight=!0;break;case!a.fontSize:"inherit"!==t&&(i=t.split("/")[0]||""),a.fontStyle=!0,a.fontVariant=!0,a.fontWeight=!0,a.fontSize=!0;break;default:"inherit"!==t&&(o+=t)}})),new Oe(e,n,r,i,o,t)}toString(){return[Ne(this.fontStyle),this.fontVariant,Me(this.fontWeight),this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map(Te).join(","))].join(" ").trim();var t}constructor(t,e,n,r,i,o){const s=o?"string"==typeof o?Oe.parse(o):o:{};this.fontFamily=i||s.fontFamily,this.fontSize=r||s.fontSize,this.fontStyle=t||s.fontStyle,this.fontWeight=n||s.fontWeight,this.fontVariant=e||s.fontVariant}}Oe.styles="normal|italic|oblique|inherit",Oe.variants="normal|small-caps|inherit",Oe.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Le{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;const{x1:e,y1:n,x2:r,y2:i}=t;this.addPoint(e,n),this.addPoint(r,i)}sumCubic(t,e,n,r,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i}bezierCurveAdd(t,e,n,r,i){const o=6*e-12*n+6*r,s=-3*e+9*n-9*r+3*i,a=3*n-3*e;if(0===s){if(0===o)return;const s=-a/o;return void(0<s&&s<1&&(t?this.addX(this.sumCubic(s,e,n,r,i)):this.addY(this.sumCubic(s,e,n,r,i))))}const c=Math.pow(o,2)-4*a*s;if(c<0)return;const h=(-o+Math.sqrt(c))/(2*s);0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,r,i)):this.addY(this.sumCubic(h,e,n,r,i)));const u=(-o-Math.sqrt(c))/(2*s);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i)))}addBezierCurve(t,e,n,r,i,o,s,a){this.addPoint(t,e),this.addPoint(s,a),this.bezierCurveAdd(!0,t,n,i,s),this.bezierCurveAdd(!1,e,r,o,a)}addQuadraticCurve(t,e,n,r,i,o){const s=t+2/3*(n-t),a=e+2/3*(r-e),c=s+1/3*(i-t),h=a+1/3*(o-e);this.addBezierCurve(t,e,s,c,a,h,i,o)}isPointInBox(t,e){const{x1:n,y1:r,x2:i,y2:o}=this;return n<=t&&t<=i&&r<=e&&e<=o}constructor(t=Number.NaN,e=Number.NaN,n=Number.NaN,r=Number.NaN){this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.addPoint(t,e),this.addPoint(n,r)}}class Ie extends Ce{calculateOpacity(){let t=1,e=this;for(;e;){const n=e.getStyle("opacity",!1,!0);n.hasValue(!0)&&(t*=n.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){const e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),i=this.getStyle("stroke-opacity");if(e.isUrlDefinition()){const r=e.getFillStyleDefinition(this,n);r&&(t.fillStyle=r)}else if(e.hasValue()){"currentColor"===e.getString()&&e.setValue(this.getStyle("color").getColor());const n=e.getColor();"inherit"!==n&&(t.fillStyle="none"===n?"rgba(0,0,0,0)":n)}if(n.hasValue()){const e=new fe(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=e}if(r.isUrlDefinition()){const e=r.getFillStyleDefinition(this,i);e&&(t.strokeStyle=e)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());const e=r.getString();"inherit"!==e&&(t.strokeStyle="none"===e?"rgba(0,0,0,0)":e)}if(i.hasValue()){const e=new fe(this.document,"stroke",t.strokeStyle).addOpacity(i).getString();t.strokeStyle=e}const o=this.getStyle("stroke-width");if(o.hasValue()){const e=o.getPixels();t.lineWidth=e||ne}const s=this.getStyle("stroke-linecap"),a=this.getStyle("stroke-linejoin"),c=this.getStyle("stroke-miterlimit"),h=this.getStyle("stroke-dasharray"),u=this.getStyle("stroke-dashoffset");if(s.hasValue()&&(t.lineCap=s.getString()),a.hasValue()&&(t.lineJoin=a.getString()),c.hasValue()&&(t.miterLimit=c.getNumber()),h.hasValue()&&"none"!==h.getString()){const e=Ht(h.getString());void 0!==t.setLineDash?t.setLineDash(e):void 0!==t.webkitLineDash?t.webkitLineDash=e:void 0===t.mozDash||1===e.length&&0===e[0]||(t.mozDash=e);const n=u.getPixels();void 0!==t.lineDashOffset?t.lineDashOffset=n:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=n:void 0!==t.mozDashOffset&&(t.mozDashOffset=n)}}if(this.modifiedEmSizeStack=!1,void 0!==t.font){const e=this.getStyle("font"),n=this.getStyle("font-style"),r=this.getStyle("font-variant"),i=this.getStyle("font-weight"),o=this.getStyle("font-size"),s=this.getStyle("font-family"),a=new Oe(n.getString(),r.getString(),i.getString(),o.hasValue()?"".concat(o.getPixels(!0),"px"):"",s.getString(),Oe.parse(e.getString(),t.font));n.setValue(a.fontStyle),r.setValue(a.fontVariant),i.setValue(a.fontWeight),o.setValue(a.fontSize),s.setValue(a.fontFamily),t.font=a.toString(),o.isPixels()&&(this.document.emSize=o.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}}class Ve extends Ie{setContext(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(t,e);const n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach(((n,r)=>{const i=this.getChildBoundingBox(t,this,this,r);e?e.addBoundingBox(i):e=i})),e}getFontSize(){const{document:t,parent:e}=this,n=Oe.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(n)}getTElementBoundingBox(t){const e=this.getFontSize();return new Le(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,n){const r=e[n];let i;if(t.isArabic){var o;const s=e.length,a=e[n-1],c=e[n+1];let h="isolated";(0===n||" "===a)&&n<s-1&&" "!==c&&(h="terminal"),n>0&&" "!==a&&n<s-1&&" "!==c&&(h="medial"),n>0&&" "!==a&&(n===s-1||" "===c)&&(h="initial"),i=(null===(o=t.arabicGlyphs[r])||void 0===o?void 0:o[h])||t.glyphs[r]}else i=t.glyphs[r];return i||(i=t.missingGlyph),i}getText(){return""}getTextFromNode(t){const e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1;let o=Yt(e.textContent||"");return 0===r&&(o=o.replace(/^[\n \t]+/,"")),r===i&&(o=function(t){return t.replace(/[\n \t]+$/,"")}(o)),o}renderChildren(t){if("text"!==this.type)return void this.renderTElementChildren(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach(((e,n)=>{this.renderChild(t,this,this,n)}));const{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){const{document:e,parent:n}=this,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i){const{unitsPerEm:o}=i.fontFace,s=Oe.parse(e.ctx.font),a=n.getStyle("font-size").getNumber(s.fontSize),c=n.getStyle("font-style").getString(s.fontStyle),h=a/o,u=i.isRTL?r.split("").reverse().join(""):r,l=Ht(n.getAttribute("dx").getString()),d=u.length;for(let e=0;e<d;e++){const n=this.getGlyph(i,u,e);t.translate(this.x,this.y),t.scale(h,-h);const r=t.lineWidth;t.lineWidth=t.lineWidth*o/a,"italic"===c&&t.transform(1,0,.4,1,0,0),n.render(t),"italic"===c&&t.transform(1,0,-.4,1,0,0),t.lineWidth=r,t.scale(1/h,-1/h),t.translate(-this.x,-this.y),this.x+=a*(n.horizAdvX||i.horizAdvX)/o,void 0===l[e]||isNaN(l[e])||(this.x+=l[e])}return}const{x:o,y:s}=this;t.fillStyle&&t.fillText(r,o,s),t.strokeStyle&&t.strokeText(r,o,s)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start");let n=0;n="start"===e?t.x-this.minX:"end"===e?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(let t=this.textChunkStart;t<this.leafTexts.length;t++)this.leafTexts[t].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach(((e,n)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,n)})),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,n,r){const i=n.children[r];i.children.length>0?i.children.forEach(((n,r)=>{e.adjustChildCoordinatesRecursiveCore(t,e,i,r)})):this.adjustChildCoordinates(t,e,n,r)}adjustChildCoordinates(t,e,n,r){const i=n.children[r];if("function"!=typeof i.measureText)return i;t.save(),i.setContext(t,!0);const o=i.getAttribute("x"),s=i.getAttribute("y"),a=i.getAttribute("dx"),c=i.getAttribute("dy"),h=i.getStyle("font-family").getDefinition(),u=Boolean(null==h?void 0:h.isRTL);0===r&&(o.hasValue()||o.setValue(i.getInheritedAttribute("x")),s.hasValue()||s.setValue(i.getInheritedAttribute("y")),a.hasValue()||a.setValue(i.getInheritedAttribute("dx")),c.hasValue()||c.setValue(i.getInheritedAttribute("dy")));const l=i.measureText(t);return u&&(e.x-=l),o.hasValue()?(e.applyAnchoring(),i.x=o.getPixels("x"),a.hasValue()&&(i.x+=a.getPixels("x"))):(a.hasValue()&&(e.x+=a.getPixels("x")),i.x=e.x),e.x=i.x,u||(e.x+=l),s.hasValue()?(i.y=s.getPixels("y"),c.hasValue()&&(i.y+=c.getPixels("y"))):(c.hasValue()&&(e.y+=c.getPixels("y")),i.y=e.y),e.y=i.y,e.leafTexts.push(i),e.minX=Math.min(e.minX,i.x,i.x+l),e.maxX=Math.max(e.maxX,i.x,i.x+l),i.clearContext(t),t.restore(),i}getChildBoundingBox(t,e,n,r){const i=n.children[r];if("function"!=typeof i.getBoundingBox)return null;const o=i.getBoundingBox(t);return o&&i.children.forEach(((n,r)=>{const s=e.getChildBoundingBox(t,e,i,r);o.addBoundingBox(s)})),o}renderChild(t,e,n,r){const i=n.children[r];i.render(t),i.children.forEach(((n,r)=>{e.renderChild(t,e,i,r)}))}measureText(t){const{measureCache:e}=this;if(~e)return e;const n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r,r}measureTargetText(t,e){if(!e.length)return 0;const{parent:n}=this,r=n.getStyle("font-family").getDefinition();if(r){const t=this.getFontSize(),i=r.isRTL?e.split("").reverse().join(""):e,o=Ht(n.getAttribute("dx").getString()),s=i.length;let a=0;for(let e=0;e<s;e++)a+=(this.getGlyph(r,i,e).horizAdvX||r.horizAdvX)*t/r.fontFace.unitsPerEm,void 0===o[e]||isNaN(o[e])||(a+=o[e]);return a}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);const{width:i}=t.measureText(e);return this.clearContext(t),t.restore(),i}getInheritedAttribute(t){let e=this;for(;e instanceof Ve&&e.isFirstChild()&&e.parent;){const n=e.parent.getAttribute(t);if(n.hasValue(!0))return n.getString("0");e=e.parent}return null}constructor(t,e,n){super(t,e,new.target===Ve||n),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class Re extends Ve{getText(){return this.text}constructor(t,e,n){super(t,e,new.target===Re||n),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class je extends Re{constructor(...t){super(...t),this.type="textNode"}}class De extends jt{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new ve(0,0),this.control=new ve(0,0),this.current=new ve(0,0),this.points=[],this.angles=[]}isEnd(){const{i:t,commands:e}=this;return t>=e.length-1}next(){const t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";const n=new ve(this.command[t],this.command[e]);return this.makeAbsolute(n)}getAsControlPoint(t,e){const n=this.getPoint(t,e);return this.control=n,n}getAsCurrentPoint(t,e){const n=this.getPoint(t,e);return this.current=n,n}getReflectedControlPoint(){const t=this.previousCommand.type;if(t!==jt.CURVE_TO&&t!==jt.SMOOTH_CURVE_TO&&t!==jt.QUAD_TO&&t!==jt.SMOOTH_QUAD_TO)return this.current;const{current:{x:e,y:n},control:{x:r,y:i}}=this;return new ve(2*e-r,2*n-i)}makeAbsolute(t){if(this.command.relative){const{x:e,y:n}=this.current;t.x+=e,t.y+=n}return t}addMarker(t,e,n){const{points:r,angles:i}=this;n&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:t}=this,e=t.length;for(let n=0;n<e;n++)if(!t[n])for(let r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new ve(0,0),this.start=new ve(0,0),this.current=new ve(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class Be extends Ie{path(t){const{pathParser:e}=this,n=new Le;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case De.MOVE_TO:this.pathM(t,n);break;case De.LINE_TO:this.pathL(t,n);break;case De.HORIZ_LINE_TO:this.pathH(t,n);break;case De.VERT_LINE_TO:this.pathV(t,n);break;case De.CURVE_TO:this.pathC(t,n);break;case De.SMOOTH_CURVE_TO:this.pathS(t,n);break;case De.QUAD_TO:this.pathQ(t,n);break;case De.SMOOTH_QUAD_TO:this.pathT(t,n);break;case De.ARC:this.pathA(t,n);break;case De.CLOSE_PATH:this.pathZ(t,n)}return n}getBoundingBox(t){return this.path()}getMarkers(){const{pathParser:t}=this,e=t.getMarkerPoints(),n=t.getMarkerAngles(),r=e.map(((t,e)=>[t,n[e]]));return r}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);const e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());const n=this.getMarkers();if(n){const e=n.length-1,r=this.getStyle("marker-start"),i=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(r.isUrlDefinition()){const e=r.getDefinition(),[i,o]=n[0];e.render(t,i,o)}if(i.isUrlDefinition()){const r=i.getDefinition();for(let i=1;i<e;i++){const[e,o]=n[i];r.render(t,e,o)}}if(o.isUrlDefinition()){const r=o.getDefinition(),[i,s]=n[e];r.render(t,i,s)}}}static pathM(t){const e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){const{pathParser:n}=this,{point:r}=Be.pathM(n),{x:i,y:o}=r;n.addMarker(r),e.addPoint(i,o),t&&t.moveTo(i,o)}static pathL(t){const{current:e}=t;return{current:e,point:t.getAsCurrentPoint()}}pathL(t,e){const{pathParser:n}=this,{current:r,point:i}=Be.pathL(n),{x:o,y:s}=i;n.addMarker(i,r),e.addPoint(o,s),t&&t.lineTo(o,s)}static pathH(t){const{current:e,command:n}=t,r=new ve((n.relative?e.x:0)+n.x,e.y);return t.current=r,{current:e,point:r}}pathH(t,e){const{pathParser:n}=this,{current:r,point:i}=Be.pathH(n),{x:o,y:s}=i;n.addMarker(i,r),e.addPoint(o,s),t&&t.lineTo(o,s)}static pathV(t){const{current:e,command:n}=t,r=new ve(e.x,(n.relative?e.y:0)+n.y);return t.current=r,{current:e,point:r}}pathV(t,e){const{pathParser:n}=this,{current:r,point:i}=Be.pathV(n),{x:o,y:s}=i;n.addMarker(i,r),e.addPoint(o,s),t&&t.lineTo(o,s)}static pathC(t){const{current:e}=t;return{current:e,point:t.getPoint("x1","y1"),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}pathC(t,e){const{pathParser:n}=this,{current:r,point:i,controlPoint:o,currentPoint:s}=Be.pathC(n);n.addMarker(s,o,i),e.addBezierCurve(r.x,r.y,i.x,i.y,o.x,o.y,s.x,s.y),t&&t.bezierCurveTo(i.x,i.y,o.x,o.y,s.x,s.y)}static pathS(t){const{current:e}=t;return{current:e,point:t.getReflectedControlPoint(),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}pathS(t,e){const{pathParser:n}=this,{current:r,point:i,controlPoint:o,currentPoint:s}=Be.pathS(n);n.addMarker(s,o,i),e.addBezierCurve(r.x,r.y,i.x,i.y,o.x,o.y,s.x,s.y),t&&t.bezierCurveTo(i.x,i.y,o.x,o.y,s.x,s.y)}static pathQ(t){const{current:e}=t;return{current:e,controlPoint:t.getAsControlPoint("x1","y1"),currentPoint:t.getAsCurrentPoint()}}pathQ(t,e){const{pathParser:n}=this,{current:r,controlPoint:i,currentPoint:o}=Be.pathQ(n);n.addMarker(o,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,o.x,o.y),t&&t.quadraticCurveTo(i.x,i.y,o.x,o.y)}static pathT(t){const{current:e}=t,n=t.getReflectedControlPoint();return t.control=n,{current:e,controlPoint:n,currentPoint:t.getAsCurrentPoint()}}pathT(t,e){const{pathParser:n}=this,{current:r,controlPoint:i,currentPoint:o}=Be.pathT(n);n.addMarker(o,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,o.x,o.y),t&&t.quadraticCurveTo(i.x,i.y,o.x,o.y)}static pathA(t){const{current:e,command:n}=t;let{rX:r,rY:i,xRot:o,lArcFlag:s,sweepFlag:a}=n;const c=o*(Math.PI/180),h=t.getAsCurrentPoint(),u=new ve(Math.cos(c)*(e.x-h.x)/2+Math.sin(c)*(e.y-h.y)/2,-Math.sin(c)*(e.x-h.x)/2+Math.cos(c)*(e.y-h.y)/2),l=Math.pow(u.x,2)/Math.pow(r,2)+Math.pow(u.y,2)/Math.pow(i,2);l>1&&(r*=Math.sqrt(l),i*=Math.sqrt(l));let d=(s===a?-1:1)*Math.sqrt((Math.pow(r,2)*Math.pow(i,2)-Math.pow(r,2)*Math.pow(u.y,2)-Math.pow(i,2)*Math.pow(u.x,2))/(Math.pow(r,2)*Math.pow(u.y,2)+Math.pow(i,2)*Math.pow(u.x,2)));isNaN(d)&&(d=0);const f=new ve(d*r*u.y/i,d*-i*u.x/r),p=new ve((e.x+h.x)/2+Math.cos(c)*f.x-Math.sin(c)*f.y,(e.y+h.y)/2+Math.sin(c)*f.x+Math.cos(c)*f.y),g=oe([1,0],[(u.x-f.x)/r,(u.y-f.y)/i]),v=[(u.x-f.x)/r,(u.y-f.y)/i],y=[(-u.x-f.x)/r,(-u.y-f.y)/i];let m=oe(v,y);return ie(v,y)<=-1&&(m=Math.PI),ie(v,y)>=1&&(m=0),{currentPoint:h,rX:r,rY:i,sweepFlag:a,xAxisRotation:c,centp:p,a1:g,ad:m}}pathA(t,e){const{pathParser:n}=this,{currentPoint:r,rX:i,rY:o,sweepFlag:s,xAxisRotation:a,centp:c,a1:h,ad:u}=Be.pathA(n),l=1-s?1:-1,d=h+l*(u/2),f=new ve(c.x+i*Math.cos(d),c.y+o*Math.sin(d));if(n.addMarkerAngle(f,d-l*Math.PI/2),n.addMarkerAngle(r,d-l*Math.PI),e.addPoint(r.x,r.y),t&&!isNaN(h)&&!isNaN(u)){const e=i>o?i:o,n=i>o?1:i/o,r=i>o?o/i:1;t.translate(c.x,c.y),t.rotate(a),t.scale(n,r),t.arc(0,0,e,h,h+u,Boolean(1-s)),t.scale(1/n,1/r),t.rotate(-a),t.translate(-c.x,-c.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){Be.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,n){super(t,e,n),this.type="path",this.pathParser=new De(this.getAttribute("d").getString())}}class ze extends Ie{setContext(t){var e;const{document:n}=this,{screen:r,window:i}=n,o=t.canvas;if(r.setDefaults(t),"style"in o&&void 0!==t.font&&i&&void 0!==i.getComputedStyle){t.font=i.getComputedStyle(o).getPropertyValue("font");const e=new fe(n,"fontSize",Oe.parse(t.font).fontSize);e.hasValue()&&(n.rootEmSize=e.getPixels("y"),n.emSize=n.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:s,height:a}=r.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const c=this.getAttribute("refX"),h=this.getAttribute("refY"),u=this.getAttribute("viewBox"),l=u.hasValue()?Ht(u.getString()):null,d=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden");let f=0,p=0,g=0,v=0;l&&(f=l[0],p=l[1]),this.root||(s=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y"),"marker"===this.type&&(g=f,v=p,f=0,p=0)),r.viewPort.setCurrent(s,a),!this.node||this.parent&&"foreignObject"!==(null===(e=this.node.parentNode)||void 0===e?void 0:e.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),l&&(s=l[2],a=l[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r.viewPort.width,desiredWidth:s,height:r.viewPort.height,desiredHeight:a,minX:f,minY:p,refX:c.getValue(),refY:h.getValue(),clip:d,clipX:g,clipY:v}),l&&(r.viewPort.removeCurrent(),r.viewPort.setCurrent(s,a))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.getAttribute("width",!0),i=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),s=this.getAttribute("style"),a=r.getNumber(0),c=i.getNumber(0);if(n)if("string"==typeof n)this.getAttribute("preserveAspectRatio",!0).setValue(n);else{const t=this.getAttribute("preserveAspectRatio");t.hasValue()&&t.setValue(t.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(r.setValue(t),i.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(a||t," ").concat(c||e)),s.hasValue()){const n=this.getStyle("width"),r=this.getStyle("height");n.hasValue()&&n.setValue("".concat(t,"px")),r.hasValue()&&r.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}}class Ue extends Be{path(t){const e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),s=this.getAttribute("ry");let a=o.getPixels("x"),c=s.getPixels("y");if(o.hasValue()&&!s.hasValue()&&(c=a),s.hasValue()&&!o.hasValue()&&(a=c),a=Math.min(a,r/2),c=Math.min(c,i/2),t){const o=(Math.sqrt(2)-1)/3*4;t.beginPath(),i>0&&r>0&&(t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.bezierCurveTo(e+r-a+o*a,n,e+r,n+c-o*c,e+r,n+c),t.lineTo(e+r,n+i-c),t.bezierCurveTo(e+r,n+i-c+o*c,e+r-a+o*a,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.bezierCurveTo(e+a-o*a,n+i,e,n+i-c+o*c,e,n+i-c),t.lineTo(e,n+c),t.bezierCurveTo(e,n+c-o*c,e+a-o*a,n,e+a,n),t.closePath())}return new Le(e,n,e+r,n+i)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}}class Fe extends Be{path(t){const{points:e}=this,[{x:n,y:r}]=e,i=new Le(n,r);return t&&(t.beginPath(),t.moveTo(n,r)),e.forEach((e=>{let{x:n,y:r}=e;i.addPoint(n,r),t&&t.lineTo(n,r)})),i}getMarkers(){const{points:t}=this,e=t.length-1,n=[];return t.forEach(((r,i)=>{i!==e&&n.push([r,r.angleTo(t[i+1])])})),n.length>0&&n.push([t[t.length-1],n[n.length-1][1]]),n}constructor(t,e,n){super(t,e,n),this.type="polyline",this.points=[],this.points=ve.parsePath(this.getAttribute("points").getString())}}class Xe extends Ie{getBoundingBox(t){const e=new Le;return this.children.forEach((n=>{e.addBoundingBox(n.getBoundingBox(t))})),e}constructor(...t){super(...t),this.type="g"}}class Ye extends Ce{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,n){let r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));const{stops:i}=r,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(n,i[i.length-1].color);if(i.forEach((t=>{o.addColorStop(t.offset,this.addParentOpacity(n,t.color))})),this.getAttribute("gradientTransform").hasValue()){const{document:t}=this,{MAX_VIRTUAL_PIXELS:e}=be,{viewPort:n}=t.screen,r=n.getRoot(),i=new Ue(t);i.attributes.x=new fe(t,"x",-e/3),i.attributes.y=new fe(t,"y",-e/3),i.attributes.width=new fe(t,"width",e),i.attributes.height=new fe(t,"height",e);const s=new Xe(t);s.attributes.transform=new fe(t,"transform",this.getAttribute("gradientTransform").getValue()),s.children=[i];const a=new ze(t);a.attributes.x=new fe(t,"x",0),a.attributes.y=new fe(t,"y",0),a.attributes.width=new fe(t,"width",r.width),a.attributes.height=new fe(t,"height",r.height),a.children=[s];const c=t.createCanvas(r.width,r.height),h=c.getContext("2d");return h.fillStyle=o,a.render(h),h.createPattern(c,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach((e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())}))}addParentOpacity(t,e){return t.hasValue()?new fe(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,n){super(t,e,n),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:r,children:i}=this;i.forEach((t=>{"stop"===t.type&&r.push(t)}))}}class He extends Ce{getProperty(){const t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){const{initialUnits:t}=this,{progress:e,from:n,to:r}=this.getProgress();let i=n.getNumber()+(r.getNumber()-n.getNumber())*e;return"%"===t&&(i*=100),"".concat(i).concat(t)}update(t){const{parent:e}=this,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){const t=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==t||this.frozen){if("remove"===t&&!this.removed)return this.removed=!0,e&&n&&n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e&&n&&(e.animationFrozen=!0,e.animationFrozenValue=n.getString());return!1}this.duration+=t;let r=!1;if(this.begin<this.duration){let t=this.calcValue();const e=this.getAttribute("type");if(e.hasValue()){const n=e.getString();t="".concat(n,"(").concat(t,")")}n.setValue(t),r=!0}return r}getProgress(){const{document:t,values:e}=this;let n,r,i=(this.duration-this.begin)/(this.maxDuration-this.begin);if(e.hasValue()){const o=i*(e.getValue().length-1),s=Math.floor(o),a=Math.ceil(o);let c;c=e.getValue()[s],n=new fe(t,"from",c?parseFloat(c):0),c=e.getValue()[a],r=new fe(t,"to",c?parseFloat(c):0),i=(o-s)/(a-s)}else n=this.from,r=this.to;return{progress:i,from:n,to:r}}constructor(t,e,n){super(t,e,n),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new fe(t,"values",null);const r=this.getAttribute("values");r.hasValue()&&this.values.setValue(r.getString().split(";"))}}class Ge extends Ce{constructor(t,e,n){super(t,e,n),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class qe extends Be{constructor(t,e,n){super(t,e,n),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class We extends qe{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}}const Ze=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class Qe{async load(t,e){try{const{document:n}=this,r=(await n.canvg.parser.load(e)).getElementsByTagName("font");Array.from(r).forEach((e=>{const r=n.createElement(e);n.definitions[t]=r}))}catch(t){console.error('Error while loading font "'.concat(e,'":'),t)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}}class $e extends Ce{constructor(t,e,n){super(t,e,n),this.type="style";const r=Yt(Array.from(e.childNodes).map((t=>t.textContent)).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,""));r.split("}").forEach((e=>{const n=e.trim();if(!n)return;const r=n.split("{"),i=r[0].split(","),o=r[1].split(";");i.forEach((e=>{const n=e.trim();if(!n)return;const r=t.styles[n]||{};if(o.forEach((e=>{const n=e.indexOf(":"),i=e.substr(0,n).trim(),o=e.substr(n+1,e.length-n).trim();i&&o&&(r[i]=new fe(t,i,o))})),t.styles[n]=r,t.stylesSpecificity[n]=function(t){const e=[0,0,0];let n=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0;return[n,r]=ee(n,Wt),e[1]+=r,[n,r]=ee(n,Zt),e[0]+=r,[n,r]=ee(n,Qt),e[1]+=r,[n,r]=ee(n,$t),e[2]+=r,[n,r]=ee(n,Kt),e[1]+=r,[n,r]=ee(n,Jt),e[1]+=r,n=n.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[n,r]=ee(n,te),e[2]+=r,e.join("")}(n),"@font-face"===n){const e=r["font-family"].getString().replace(/"|'/g,"");r.src.getString().split(",").forEach((n=>{if(n.indexOf('format("svg")')>0){const r=qt(n);r&&new Qe(t).load(e,r)}}))}}))}))}}function Ke(t,e,n,r,i,o){return t[n*r*4+4*e+o]}function Je(t,e,n,r,i,o,s){t[n*r*4+4*e+o]=s}function tn(t,e,n){return t[e]*n}function en(t,e,n,r){return e+Math.cos(t)*n+Math.sin(t)*r}$e.parseExternalUrl=qt;class nn extends Ce{apply(t,e,n,r,i){const{includeOpacity:o,matrix:s}=this,a=t.getImageData(0,0,r,i);for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=Ke(a.data,e,t,r,0,0),i=Ke(a.data,e,t,r,0,1),c=Ke(a.data,e,t,r,0,2),h=Ke(a.data,e,t,r,0,3);let u=tn(s,0,n)+tn(s,1,i)+tn(s,2,c)+tn(s,3,h)+tn(s,4,1),l=tn(s,5,n)+tn(s,6,i)+tn(s,7,c)+tn(s,8,h)+tn(s,9,1),d=tn(s,10,n)+tn(s,11,i)+tn(s,12,c)+tn(s,13,h)+tn(s,14,1),f=tn(s,15,n)+tn(s,16,i)+tn(s,17,c)+tn(s,18,h)+tn(s,19,1);o&&(u=0,l=0,d=0,f*=h/255),Je(a.data,e,t,r,0,0,u),Je(a.data,e,t,r,0,1,l),Je(a.data,e,t,r,0,2,d),Je(a.data,e,t,r,0,3,f)}t.clearRect(0,0,r,i),t.putImageData(a,0,0)}constructor(t,e,n){super(t,e,n),this.type="feColorMatrix";let r=Ht(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const t=r[0];r=[.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const t=r[0]*Math.PI/180;r=[en(t,.213,.787,-.213),en(t,.715,-.715,-.715),en(t,.072,-.072,.928),0,0,en(t,.213,-.213,.143),en(t,.715,.285,.14),en(t,.072,-.072,-.283),0,0,en(t,.213,-.213,-.787),en(t,.715,-.715,.715),en(t,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=r,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class rn extends Ce{apply(t,e){const{document:n}=this;let r=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(!o&&!s){const e=new Le;this.children.forEach((n=>{e.addBoundingBox(n.getBoundingBox(t))})),r=Math.floor(e.x1),i=Math.floor(e.y1),o=Math.floor(e.width),s=Math.floor(e.height)}const a=this.removeStyles(e,rn.ignoreStyles),c=n.createCanvas(r+o,i+s),h=c.getContext("2d");n.screen.setDefaults(h),this.renderChildren(h),new nn(n,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(h,0,0,r+o,i+s);const u=n.createCanvas(r+o,i+s),l=u.getContext("2d");n.screen.setDefaults(l),e.render(l),l.globalCompositeOperation="destination-in",l.fillStyle=h.createPattern(c,"no-repeat"),l.fillRect(0,0,r+o,i+s),t.fillStyle=l.createPattern(u,"no-repeat"),t.fillRect(0,0,r+o,i+s),this.restoreStyles(e,a)}render(t){}constructor(...t){super(...t),this.type="mask"}}rn.ignoreStyles=["mask","transform","clip-path"];const on=()=>{};class sn extends Ce{apply(t,e){const{document:n,children:r}=this,i="getBoundingBox"in e?e.getBoundingBox(t):null;if(!i)return;let o=0,s=0;r.forEach((t=>{const e=t.extraFilterDistance||0;o=Math.max(o,e),s=Math.max(s,e)}));const a=Math.floor(i.width),c=Math.floor(i.height),h=a+2*o,u=c+2*s;if(h<1||u<1)return;const l=Math.floor(i.x),d=Math.floor(i.y),f=this.removeStyles(e,sn.ignoreStyles),p=n.createCanvas(h,u),g=p.getContext("2d");n.screen.setDefaults(g),g.translate(-l+o,-d+s),e.render(g),r.forEach((t=>{"function"==typeof t.apply&&t.apply(g,0,0,h,u)})),t.drawImage(p,0,0,h,u,l-o,d-s,h,u),this.restoreStyles(e,f)}render(t){}constructor(...t){super(...t),this.type="filter"}}sn.ignoreStyles=["filter","transform","clip-path"];const an={svg:ze,rect:Ue,circle:class extends Be{path(t){const e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&r>0&&(t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()),new Le(e-r,n-r,e+r,n+r)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},ellipse:class extends Be{path(t){const e=(Math.sqrt(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&n>0&&r>0&&(t.beginPath(),t.moveTo(i+n,o),t.bezierCurveTo(i+n,o+e*r,i+e*n,o+r,i,o+r),t.bezierCurveTo(i-e*n,o+r,i-n,o+e*r,i-n,o),t.bezierCurveTo(i-n,o-e*r,i-e*n,o-r,i,o-r),t.bezierCurveTo(i+e*n,o-r,i+n,o-e*r,i+n,o),t.closePath()),new Le(i-n,o-r,i+n,o+r)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},line:class extends Be{getPoints(){return[new ve(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new ve(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){const[{x:e,y:n},{x:r,y:i}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,n),t.lineTo(r,i)),new Le(e,n,r,i)}getMarkers(){const[t,e]=this.getPoints(),n=t.angleTo(e);return[[t,n],[e,n]]}constructor(...t){super(...t),this.type="line"}},polyline:Fe,polygon:class extends Fe{path(t){const e=super.path(t),[{x:n,y:r}]=this.points;return t&&(t.lineTo(n,r),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},path:Be,pattern:class extends Ce{createPattern(t,e,n){const r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),o=new ze(this.document,null);o.attributes.viewBox=new fe(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.width=new fe(this.document,"width","".concat(r,"px")),o.attributes.height=new fe(this.document,"height","".concat(i,"px")),o.attributes.transform=new fe(this.document,"transform",this.getAttribute("patternTransform").getValue()),o.children=this.children;const s=this.document.createCanvas(r,i),a=s.getContext("2d"),c=this.getAttribute("x"),h=this.getAttribute("y");c.hasValue()&&h.hasValue()&&a.translate(c.getPixels("x",!0),h.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(let t=-1;t<=1;t++)for(let e=-1;e<=1;e++)a.save(),o.attributes.x=new fe(this.document,"x",t*s.width),o.attributes.y=new fe(this.document,"y",e*s.height),o.render(a),a.restore();return t.createPattern(s,"repeat")}constructor(...t){super(...t),this.type="pattern"}},marker:class extends Ce{render(t,e,n){if(!e)return;const{x:r,y:i}=e,o=this.getAttribute("orient").getString("auto"),s=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(r,i),"auto"===o&&t.rotate(n),"strokeWidth"===s&&t.scale(t.lineWidth,t.lineWidth),t.save();const a=new ze(this.document);a.type=this.type,a.attributes.viewBox=new fe(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.refX=new fe(this.document,"refX",this.getAttribute("refX").getValue()),a.attributes.refY=new fe(this.document,"refY",this.getAttribute("refY").getValue()),a.attributes.width=new fe(this.document,"width",this.getAttribute("markerWidth").getValue()),a.attributes.height=new fe(this.document,"height",this.getAttribute("markerHeight").getValue()),a.attributes.overflow=new fe(this.document,"overflow",this.getAttribute("overflow").getValue()),a.attributes.fill=new fe(this.document,"fill",this.getAttribute("fill").getColor("black")),a.attributes.stroke=new fe(this.document,"stroke",this.getAttribute("stroke").getValue("none")),a.children=this.children,a.render(t),t.restore(),"strokeWidth"===s&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===o&&t.rotate(-n),t.translate(-r,-i)}constructor(...t){super(...t),this.type="marker"}},defs:class extends Ce{render(){}constructor(...t){super(...t),this.type="defs"}},linearGradient:class extends Ye{getGradient(t,e){const n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),s=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),a=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===s&&o===a?null:t.createLinearGradient(i,o,s,a)}constructor(t,e,n){super(t,e,n),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},radialGradient:class extends Ye{getGradient(t,e){const n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let s=i,a=o;this.getAttribute("fx").hasValue()&&(s=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(a=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const c=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),h=this.getAttribute("fr").getPixels();return t.createRadialGradient(s,a,h,i,o,c)}constructor(t,e,n){super(t,e,n),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},stop:class extends Ce{constructor(t,e,n){super(t,e,n),this.type="stop";const r=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),i=this.getStyle("stop-opacity");let o=this.getStyle("stop-color",!0);""===o.getString()&&o.setValue("#000"),i.hasValue()&&(o=o.addOpacity(i)),this.offset=r,this.color=o.getColor()}},animate:He,animateColor:class extends He{calcValue(){const{progress:t,from:e,to:n}=this.getProgress(),r=new mt(e.getColor()),i=new mt(n.getColor());if(r.ok&&i.ok){const e=r.r+(i.r-r.r)*t,n=r.g+(i.g-r.g)*t,o=r.b+(i.b-r.b)*t;return"rgb(".concat(Math.floor(e),", ").concat(Math.floor(n),", ").concat(Math.floor(o),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},animateTransform:class extends He{calcValue(){const{progress:t,from:e,to:n}=this.getProgress(),r=Ht(e.getString()),i=Ht(n.getString()),o=r.map(((e,n)=>e+(i[n]-e)*t)).join(" ");return o}constructor(...t){super(...t),this.type="animateTransform"}},font:class extends Ce{render(){}constructor(t,e,n){super(t,e,n),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:r}=t,{children:i}=this;for(const t of i)if(t instanceof Ge){this.fontFace=t;const e=t.getStyle("font-family");e.hasValue()&&(r[e.getString()]=this)}else if(t instanceof We)this.missingGlyph=t;else if(t instanceof qe)if(t.arabicForm){this.isRTL=!0,this.isArabic=!0;const e=this.arabicGlyphs[t.unicode];void 0===e?this.arabicGlyphs[t.unicode]={[t.arabicForm]:t}:e[t.arabicForm]=t}else this.glyphs[t.unicode]=t}},"font-face":Ge,"missing-glyph":We,glyph:qe,text:Ve,tspan:Re,tref:class extends Ve{getText(){const t=this.getHrefAttribute().getDefinition();if(t){const e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},a:class extends Ve{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);const{document:e,x:n,y:r}=this,{mouse:i}=e.screen,o=new fe(e,"fontSize",Oe.parse(e.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new Le(n,r-o.getPixels("y"),n+this.measureText(t),r))}else if(this.children.length>0){const e=new Xe(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){const{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}constructor(t,e,n){super(t,e,n),this.type="a";const{childNodes:r}=e,i=r[0],o=r.length>0&&Array.from(r).every((t=>3===t.nodeType));this.hasText=o,this.text=o?this.getTextFromNode(i):""}},textPath:class extends Ve{getText(){return this.text}path(t){const{dataArray:e}=this;t&&t.beginPath(),e.forEach((e=>{let{type:n,points:r}=e;switch(n){case De.LINE_TO:t&&t.lineTo(r[0],r[1]);break;case De.MOVE_TO:t&&t.moveTo(r[0],r[1]);break;case De.CURVE_TO:t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case De.QUAD_TO:t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case De.ARC:{const[e,n,i,o,s,a,c,h]=r,u=i>o?i:o,l=i>o?1:i/o,d=i>o?o/i:1;t&&(t.translate(e,n),t.rotate(c),t.scale(l,d),t.arc(0,0,u,s,s+a,Boolean(1-h)),t.scale(1/l,1/d),t.rotate(-c),t.translate(-e,-n));break}case De.CLOSE_PATH:t&&t.closePath()}}))}renderChildren(t){this.setTextData(t),t.save();const e=this.parent.getStyle("text-decoration").getString(),n=this.getFontSize(),{glyphInfo:r}=this,i=t.fillStyle;"underline"===e&&t.beginPath(),r.forEach(((r,i)=>{const{p0:o,p1:s,rotation:a,text:c}=r;t.save(),t.translate(o.x,o.y),t.rotate(a),t.fillStyle&&t.fillText(c,0,0),t.strokeStyle&&t.strokeText(c,0,0),t.restore(),"underline"===e&&(0===i&&t.moveTo(o.x,o.y+n/8),t.lineTo(s.x,s.y+n/5))})),"underline"===e&&(t.lineWidth=n/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,n,r,i,o,s,a,c){let h=o,u=this.measureText(t,a);" "===a&&"justify"===e&&n<r&&(u+=(r-n)/i),c>-1&&(h+=this.getLetterSpacingAt(c));const l=this.textHeight/20,d=this.getEquidistantPointOnPath(h,l,0),f=this.getEquidistantPointOnPath(h+u,l,0),p={p0:d,p1:f},g=d&&f?Math.atan2(f.y-d.y,f.x-d.x):0;if(s){const t=Math.cos(Math.PI/2+g)*s,e=Math.cos(-g)*s;p.p0={...d,x:d.x+t,y:d.y+e},p.p1={...f,x:f.x+t,y:f.y+e}}return h+=u,{offset:h,segment:p,rotation:g}}measureText(t,e){const{measuresCache:n}=this,r=e||this.getText();if(n.has(r))return n.get(r);const i=this.measureTargetText(t,r);return n.set(r,i),i}setTextData(t){if(this.glyphInfo)return;const e=this.getText(),n=e.split(""),r=e.split(" ").length-1,i=this.parent.getAttribute("dx").split().map((t=>t.getPixels("x"))),o=this.parent.getAttribute("dy").getPixels("y"),s=this.parent.getStyle("text-anchor").getString("start"),a=this.getStyle("letter-spacing"),c=this.parent.getStyle("letter-spacing");let h=0;a.hasValue()&&"inherit"!==a.getValue()?a.hasValue()&&"initial"!==a.getValue()&&"unset"!==a.getValue()&&(h=a.getPixels()):h=c.getPixels();const u=[],l=e.length;this.letterSpacingCache=u;for(let t=0;t<l;t++)u.push(void 0!==i[t]?i[t]:h);const d=u.reduce(((t,e,n)=>0===n?0:t+e||0),0),f=this.measureText(t),p=Math.max(f+d,0);this.textWidth=f,this.textHeight=this.getFontSize(),this.glyphInfo=[];const g=this.getPathLength(),v=this.getStyle("startOffset").getNumber(0)*g;let y=0;"middle"!==s&&"center"!==s||(y=-p/2),"end"!==s&&"right"!==s||(y=-p),y+=v,n.forEach(((e,i)=>{const{offset:a,segment:c,rotation:h}=this.findSegmentToFitChar(t,s,p,g,r,y,o,e,i);y=a,c.p0&&c.p1&&this.glyphInfo.push({text:n[i],p0:c.p0,p1:c.p1,rotation:h})}))}parsePathData(t){if(this.pathLength=-1,!t)return[];const e=[],{pathParser:n}=t;for(n.reset();!n.isEnd();){const{current:t}=n,r=t?t.x:0,i=t?t.y:0,o=n.next();let s=o.type,a=[];switch(o.type){case De.MOVE_TO:this.pathM(n,a);break;case De.LINE_TO:s=this.pathL(n,a);break;case De.HORIZ_LINE_TO:s=this.pathH(n,a);break;case De.VERT_LINE_TO:s=this.pathV(n,a);break;case De.CURVE_TO:this.pathC(n,a);break;case De.SMOOTH_CURVE_TO:s=this.pathS(n,a);break;case De.QUAD_TO:this.pathQ(n,a);break;case De.SMOOTH_QUAD_TO:s=this.pathT(n,a);break;case De.ARC:a=this.pathA(n);break;case De.CLOSE_PATH:Be.pathZ(n)}o.type!==De.CLOSE_PATH?e.push({type:s,points:a,start:{x:r,y:i},pathLength:this.calcLength(r,i,s,a)}):e.push({type:De.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){const{x:n,y:r}=Be.pathM(t).point;e.push(n,r)}pathL(t,e){const{x:n,y:r}=Be.pathL(t).point;return e.push(n,r),De.LINE_TO}pathH(t,e){const{x:n,y:r}=Be.pathH(t).point;return e.push(n,r),De.LINE_TO}pathV(t,e){const{x:n,y:r}=Be.pathV(t).point;return e.push(n,r),De.LINE_TO}pathC(t,e){const{point:n,controlPoint:r,currentPoint:i}=Be.pathC(t);e.push(n.x,n.y,r.x,r.y,i.x,i.y)}pathS(t,e){const{point:n,controlPoint:r,currentPoint:i}=Be.pathS(t);return e.push(n.x,n.y,r.x,r.y,i.x,i.y),De.CURVE_TO}pathQ(t,e){const{controlPoint:n,currentPoint:r}=Be.pathQ(t);e.push(n.x,n.y,r.x,r.y)}pathT(t,e){const{controlPoint:n,currentPoint:r}=Be.pathT(t);return e.push(n.x,n.y,r.x,r.y),De.QUAD_TO}pathA(t){let{rX:e,rY:n,sweepFlag:r,xAxisRotation:i,centp:o,a1:s,ad:a}=Be.pathA(t);return 0===r&&a>0&&(a-=2*Math.PI),1===r&&a<0&&(a+=2*Math.PI),[o.x,o.y,e,n,s,a,i,r]}calcLength(t,e,n,r){let i=0,o=null,s=null,a=0;switch(n){case De.LINE_TO:return this.getLineLength(t,e,r[0],r[1]);case De.CURVE_TO:for(i=0,o=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),a=.01;a<=1;a+=.01)s=this.getPointOnCubicBezier(a,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),i+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return i;case De.QUAD_TO:for(i=0,o=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),a=.01;a<=1;a+=.01)s=this.getPointOnQuadraticBezier(a,t,e,r[0],r[1],r[2],r[3]),i+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return i;case De.ARC:{i=0;const t=r[4],e=r[5],n=r[4]+e;let c=Math.PI/180;if(Math.abs(t-n)<c&&(c=Math.abs(t-n)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],t,0),e<0)for(a=t-c;a>n;a-=c)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],a,0),i+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(a=t+c;a<n;a+=c)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],a,0),i+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],n,0),i+=this.getLineLength(o.x,o.y,s.x,s.y),i}}return 0}getPointOnLine(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n;const a=(i-n)/(r-e+ne);let c=Math.sqrt(t*t/(1+a*a));r<e&&(c*=-1);let h=a*c,u=null;if(r===e)u={x:o,y:s+h};else if((s-n)/(o-e+ne)===a)u={x:o+c,y:s+h};else{let l=0,d=0;const f=this.getLineLength(e,n,r,i);if(f<ne)return null;let p=(o-e)*(r-e)+(s-n)*(i-n);p/=f*f,l=e+p*(r-e),d=n+p*(i-n);const g=this.getLineLength(o,s,l,d),v=Math.sqrt(t*t-g*g);c=Math.sqrt(v*v/(1+a*a)),r<e&&(c*=-1),h=a*c,u={x:l+c,y:d+h}}return u}getPointOnPath(t){const e=this.getPathLength();let n=0,r=null;if(t<-5e-5||t-5e-5>e)return null;const{dataArray:i}=this;for(const e of i){if(e&&(e.pathLength<5e-5||n+e.pathLength+5e-5<t)){n+=e.pathLength;continue}const i=t-n;let o=0;switch(e.type){case De.LINE_TO:r=this.getPointOnLine(i,e.start.x,e.start.y,e.points[0],e.points[1],e.start.x,e.start.y);break;case De.ARC:{const t=e.points[4],n=e.points[5],s=e.points[4]+n;if(o=t+i/e.pathLength*n,n<0&&o<s||n>=0&&o>s)break;r=this.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],o,e.points[6]);break}case De.CURVE_TO:o=i/e.pathLength,o>1&&(o=1),r=this.getPointOnCubicBezier(o,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case De.QUAD_TO:o=i/e.pathLength,o>1&&(o=1),r=this.getPointOnQuadraticBezier(o,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}if(r)return r;break}return null}getLineLength(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}getPathLength(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(((t,e)=>e.pathLength>0?t+e.pathLength:t),0)),this.pathLength}getPointOnCubicBezier(t,e,n,r,i,o,s,a,c){return{x:a*se(t)+o*ae(t)+r*ce(t)+e*he(t),y:c*se(t)+s*ae(t)+i*ce(t)+n*he(t)}}getPointOnQuadraticBezier(t,e,n,r,i,o,s){return{x:o*ue(t)+r*le(t)+e*de(t),y:s*ue(t)+i*le(t)+n*de(t)}}getPointOnEllipticalArc(t,e,n,r,i,o){const s=Math.cos(o),a=Math.sin(o),c=n*Math.cos(i),h=r*Math.sin(i);return{x:t+(c*s-h*a),y:e+(c*a+h*s)}}buildEquidistantCache(t,e){const n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};let t=0;for(let e=0;e<=n;e+=r){const n=this.getPointOnPath(e),o=this.getPointOnPath(e+r);n&&o&&(t+=this.getLineLength(n.x,n.y,o.x,o.y),t>=i&&(this.equidistantCache.points.push({x:n.x,y:n.y,distance:e}),t-=i))}}}getEquidistantPointOnPath(t,e,n){if(this.buildEquidistantCache(e,n),t<0||t-this.getPathLength()>5e-5)return null;const r=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}constructor(t,e,n){super(t,e,n),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const r=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(r)}},image:class extends Ie{async loadImage(t){try{const e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){const e=Ze.exec(t);if(e){const t=e[5];t&&("base64"===e[4]?this.image=atob(t):this.image=decodeURIComponent(t))}else try{const e=await this.document.fetch(t),n=await e.text();this.image=n}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}renderChildren(t){const{document:e,image:n,loaded:r}=this,i=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(r&&n&&s&&a){if(t.save(),t.translate(i,o),"string"==typeof n){const r=e.canvg.forkString(t,n,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:s,scaleHeight:a}),{documentElement:i}=r.document;i&&(i.parent=this),r.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s,desiredWidth:n.width,height:a,desiredHeight:n.height}),this.loaded&&("complete"in n&&!n.complete||t.drawImage(n,0,0));t.restore()}}getBoundingBox(){const t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new Le(t,e,t+n,e+r)}constructor(t,e,n){super(t,e,n),this.type="image",this.loaded=!1;const r=this.getHrefAttribute().getString();if(!r)return;const i=r.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(r);t.images.push(this),i?this.loadSvg(r):this.loadImage(r)}},g:Xe,symbol:class extends Ie{render(t){}constructor(...t){super(...t),this.type="symbol"}},style:$e,use:class extends Ie{setContext(t){super.setContext(t);const e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}path(t){const{element:e}=this;e&&e.path(t)}renderChildren(t){const{document:e,element:n}=this;if(n){let r=n;if("symbol"===n.type&&(r=new ze(e),r.attributes.viewBox=new fe(e,"viewBox",n.getAttribute("viewBox").getString()),r.attributes.preserveAspectRatio=new fe(e,"preserveAspectRatio",n.getAttribute("preserveAspectRatio").getString()),r.attributes.overflow=new fe(e,"overflow",n.getAttribute("overflow").getString()),r.children=n.children,n.styles.opacity=new fe(e,"opacity",this.calculateOpacity())),"svg"===r.type){const t=this.getStyle("width",!1,!0),n=this.getStyle("height",!1,!0);t.hasValue()&&(r.attributes.width=new fe(e,"width",t.getString())),n.hasValue()&&(r.attributes.height=new fe(e,"height",n.getString()))}const i=r.parent;r.parent=this,r.render(t),r.parent=i}}getBoundingBox(t){const{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){const{document:t,element:e}=this;return e?ke.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}},mask:rn,clipPath:class extends Ce{apply(t){const{document:e}=this,n=Reflect.getPrototypeOf(t),{beginPath:r,closePath:i}=t;n&&(n.beginPath=on,n.closePath=on),Reflect.apply(r,t,[]),this.children.forEach((r=>{if(!("path"in r))return;let o="elementTransform"in r?r.elementTransform():null;o||(o=ke.fromElement(e,r)),o&&o.apply(t),r.path(t),n&&(n.closePath=i),o&&o.unapply(t)})),Reflect.apply(i,t,[]),t.clip(),n&&(n.beginPath=r,n.closePath=i)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},filter:sn,feDropShadow:class extends Ce{apply(t,e,n,r,i){}constructor(t,e,n){super(t,e,n),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},feMorphology:class extends Ce{apply(t,e,n,r,i){}constructor(...t){super(...t),this.type="feMorphology"}},feComposite:class extends Ce{apply(t,e,n,r,i){}constructor(...t){super(...t),this.type="feComposite"}},feColorMatrix:nn,feGaussianBlur:class extends Ce{apply(t,e,n,r,i){const{document:o,blurRadius:s}=this,a=o.window?o.window.document.body:null,c=t.canvas;c.id=o.getUniqueId(),a&&(c.style.display="none",a.appendChild(c)),Ft(c,e,n,r,i,s),a&&a.removeChild(c)}constructor(t,e,n){super(t,e,n),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},title:class extends Ce{constructor(...t){super(...t),this.type="title"}},desc:class extends Ce{constructor(...t){super(...t),this.type="desc"}}};class cn{bindCreateImage(t,e){return"boolean"==typeof e?(n,r)=>t(n,"boolean"==typeof r?r:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:t}=this;return t[t.length-1]||12}set emSize(t){const{emSizeStack:e}=this;e.push(t)}popEmSize(){const{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every((t=>t.loaded))}isFontsLoaded(){return this.fonts.every((t=>t.loaded))}createDocumentElement(t){const e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){const e=t.nodeName.replace(/^[^:]+:/,""),n=cn.elementTypes[e];return n?new n(this,t):new Pe(this,t)}createTextNode(t){return new je(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=12,emSize:n=12,createCanvas:r=cn.createCanvas,createImage:i=cn.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=n,this.createCanvas=r,this.createImage=this.bindCreateImage(i,o),this.screen.wait((()=>this.isImagesLoaded())),this.screen.wait((()=>this.isFontsLoaded()))}}cn.createCanvas=function(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n},cn.createImage=async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.createElement("img");return e&&(n.crossOrigin="Anonymous"),new Promise(((e,r)=>{n.onload=()=>{e(n)},n.onerror=(t,e,n,i,o)=>{r(o)},n.src=t}))},cn.elementTypes=an;class hn{static async from(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ae(n),i=await r.parse(e);return new hn(t,i,n)}static fromString(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ae(n).parseFromString(e);return new hn(t,r,n)}fork(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return hn.from(t,e,{...this.options,...n})}forkString(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return hn.fromString(t,e,{...this.options,...n})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{documentElement:e,screen:n,options:r}=this;n.start(e,{enableRedraw:!0,...r,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,n)}constructor(t,e,n={}){this.parser=new Ae(n),this.screen=new be(t,n),this.options=n;const r=new cn(this,n),i=r.createDocumentElement(e);this.document=r,this.documentElement=i}}var un=function(){function t(t){var e=this;this.resetDrag=function(){var t=e.editor.controller,n=t.x,r=t.y,i=t.scale,o=e.padding;e.svgBBox&&(e.drag.style.left=-n/i/e.scale+o+"px",e.drag.style.top=-r/i/e.scale+o+"px",e.dragBBox={width:e.svgBBox.width/e.scale/i,height:e.svgBBox.height/e.scale/i},e.drag.style.width=e.dragBBox.width+"px",e.drag.style.height=e.dragBBox.height+"px")},this.render=function(){clearTimeout(e.timeout),e.timeout=setTimeout((function(){return a(e,void 0,void 0,(function(){return c(this,(function(t){return this.renderCanvas(),this.resetDrag(),[2]}))}))}),200)},this.editor=t;var n=t.config.minimap,r=void 0===n?[]:n;this.width=r.width||160,this.height=r.height||160,this.padding=r.padding||20,this.scale=r.scale||10}return t.prototype.init=function(){var t='<div class="ve-minimap" >\n\t\t\t<canvas width="100%" height="100%"></canvas>\n\t\t\t<div class="drag-rect" style="left:'.concat(this.padding,"px;top:").concat(this.padding,'px">\n\t\t\t\t<div class="drag-point"></div>\n\t\t\t</div>\n\t\t</div>'),e=document.createElement("div");e.innerHTML=t,this.container=e.querySelector(".ve-minimap"),this.editor.container.append(this.container),this.canvas=this.container.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.drag=this.container.querySelector(".drag-rect"),this.dragPoint=this.container.querySelector(".drag-point");var n=this.container.getBoundingClientRect();this.width=n.width,this.height=n.height,this.canvas.width=this.width,this.canvas.height=this.height,this.initEvent()},t.prototype.initEvent=function(){var t=this,e=this.editor.controller;this.canvas.addEventListener("click",(function(n){var r=n.offsetX-t.dragBBox.width/2,i=n.offsetY-t.dragBBox.height/2;t.drag.style.left=r+"px",t.drag.style.top=i+"px",e.moveTo(-(r-t.padding)*t.scale*e.scale,-(i-t.padding)*t.scale*e.scale),t.resetDrag()}));var n=0,r=0;L.drag(this.drag,(function(i){var o=i.clientX-n,s=i.clientY-r,a=o+t.dragStart.x,c=s+t.dragStart.y,h=Math.min(Math.max(a,0),t.width-t.dragBBox.width+2*t.padding),u=Math.min(Math.max(c,0),t.height-t.dragBBox.height+2*t.padding);t.drag.style.left=h+"px",t.drag.style.top=u+"px",e.moveTo(-(h-t.padding)*t.scale*e.scale,-(u-t.padding)*t.scale*e.scale)}),(function(e){n=e.clientX,r=e.clientY;var i=t.drag.style;t.dragStart={x:i.left?parseInt(i.left.split("px")[0]):0,y:i.top?parseInt(i.top.split("px")[0]):0}}),(function(){}));var i=0;L.drag(this.dragPoint,(function(n){n.clientX;var r=n.clientY-i,o=t.svgBBox.width/t.svgBBox.height,s=Math.max(r+t.dragStartBBox.height,10),a=s*o;t.drag.style.width=a+"px",t.drag.style.height=s+"px",e.scale=t.svgBBox.width/(a*t.scale),e.update()}),(function(e){return e.clientX,i=e.clientY,e.preventDefault(),e.stopPropagation(),t.dragStartBBox=t.drag.getBoundingClientRect(),!1}),(function(){})),this.editor.on("change",this.render),this.editor.on("format",this.render),this.editor.on("autofit",this.resetDrag),this.editor.on("panning",this.resetDrag),this.editor.on("zoom",this.resetDrag)},t.prototype.renderCanvas=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,h;return c(this,(function(c){switch(c.label){case 0:return t=this.editor.svg,e=t.getBoundingClientRect(),(t.querySelectorAll("image")||[]).forEach((function(t){t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")})),n=this.editor.paper.getAttribute("transform"),this.editor.paper.setAttribute("transform",""),r=t.innerHTML,n&&this.editor.paper.setAttribute("transform",n),i=this.editor.paper.getBBox(),this.scale=this.limitScale||Math.max(i.width/(this.width-2*this.padding),i.height/(this.height-2*this.padding),10),o=this.padding,s=this.padding,F(a=U(),a,[o,s]),function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],h=n[0],u=n[1];t[0]=r*h,t[1]=i*h,t[2]=o*u,t[3]=s*u,t[4]=a,t[5]=c}(a,a,[1/this.scale,1/this.scale]),this.svgBBox=e,h=this,[4,hn.fromString(this.ctx,'<g transform="matrix('.concat(a.toString(),')" class="minimap-graph">').concat(r,"</g>"),{ignoreMouse:!0,ignoreDimensions:!0,ignoreAnimation:!0})];case 1:return h.converting=c.sent(),this.converting.render(),[2]}}))}))},t.prototype.destroy=function(){clearTimeout(this.timeout),this.editor.off("change",this.render),this.editor.off("format",this.render),this.editor.off("autofit",this.resetDrag),this.editor.off("panning",this.resetDrag),this.editor.off("zoom",this.resetDrag),this.drag.remove(),this.dragPoint.remove(),this.drag.remove(),this.dragPoint.remove()},t}();const ln=un;n(4176);const dn=function(t){function e(e){var n=t.call(this)||this;return n.config=Object.assign({hideAchor:!1,hideAchorLine:!1,anchorDistance:5,showBackGrid:!0,showMiniMap:!1,mode:void 0,dagreOption:{}},e),e.dom?(n.dom=n.initDom(e.dom),n.svg=n.dom.querySelector("svg"),n.paper=k("g",n.svg),n.paper.classList.add("ve-editor-paper"),n.container=n.dom.querySelector(".ve-editor"),n.resize(),n.graph=new ut(n),n.controller=new dt(n),n.schema=new vt(n),n.config.showMiniMap&&(n.minimap=new ln(n),n.minimap.init()),n):n}return i(e,t),e.prototype.initDom=function(t){return t.innerHTML='<div class="ve-editor '.concat(this.config.mode||"",'" >\n\t\t\t\t<div class="ve-editor-back" ></div>\n\t\t\t\t<div class="ve-editor-svg" >\n\t\t\t\t\t<svg  />\n\t\t\t\t</div>\n\t\t\t</div>'),t},e.prototype.resize=function(){var t=this.config,e=t.width,n=t.height;C(this.svg,{width:e||"100%",height:n||"100%"})},e.prototype.destroy=function(){this.minimap&&this.minimap.destroy(),this.graph.destroy(),this.graph=void 0,this.svg.remove(),this.dom.innerHTML=void 0,this.controller.clear(),this.controller=void 0,this.schema=void 0,this.clear()},e.prototype.repaint=function(){this.graph.clearGraph(),this.graph.render(this.schema.data)},e}(Y)})(),r.default})()));